
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Wings!</title>
<link rel="stylesheet" type="text/css" href="css/main.css?v=2" />
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<meta charset="utf-8" />
<meta name="title" content="Wings!" />
<meta name="keywords" content="wingsio, wings, io, game, games, web game, html5, fun, flash">
<meta name="description" content="Wings.io - Massive multiplayer online game. Control your plane and shoot down other players! Play with millions of players around the world and try to become the King!" />
<meta property="og:description" content="Wings.io - Massive multiplayer online game. Control your plane and shoot down other players! Play with millions of players around the world and try to become the King!" />
<meta property="og:title" content="Wings.io" />
<meta property="og:url" content="http://Wings.io/" />
<meta property="og:image" content="http://wings.io/images/thumbnail.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:type" content="website" />
<link id="favicon" rel="icon" type="image/png" href="images/favicon.png" />
<style>

    .modalDialog {
        position: fixed;
        font-family: Arial, Helvetica, sans-serif;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0,0,0,0.8);
        z-index: 99999;
        opacity:0;
        -webkit-transition: opacity 200ms ease-in;
        -moz-transition: opacity 200ms ease-in;
        transition: opacity 200ms ease-in;
        pointer-events: none;
    }

    .modalDialog:target {
        opacity:1;
        pointer-events: auto;
    }

    .modalDialog > div {
        width: 400px;
        position: relative;
        margin: 10% auto;
        padding: 5px 20px 13px 20px;
        border-radius: 10px;
        background: #fff;
        background: -moz-linear-gradient(#fff, #999);
        background: -webkit-linear-gradient(#fff, #999);
        background: -o-linear-gradient(#fff, #999);
    }

    .close {
        background: #606061;
        opacity:1.0;
        color: #FFFFFF;
        line-height: 25px;
        position: absolute;
        right: -12px;
        text-align: center;
        top: -10px;
        width: 24px;
        text-decoration: none;
        font-weight: bold;
        -webkit-border-radius: 12px;
        -moz-border-radius: 12px;
        border-radius: 12px;
        -moz-box-shadow: 1px 1px 3px #000;
        -webkit-box-shadow: 1px 1px 3px #000;
        box-shadow: 1px 1px 3px #000;
    }

    .close:hover {
        background: #00d9ff;
        opacity:1.0;
    }

    .notbold{
        font-weight:normal
    }​

    #adsBottom {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        z-index: 2;
    }

    #adsBottomInner {
        margin: 0px auto;
        width: 728px;
        height: 90px;
        border: 5px solid white;
        border-radius: 0px 0px 5px 5px;
        background-color: #FFFFFF;
        box-sizing: content-box;
    }

    .check {
        position: relative;
        top:-15px;
        left:16px;
    }

    .btn-test {
        position: relative;
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -ms-transform: rotate(0deg);
        -o-transform: rotate(0deg);
        transform: rotate(0deg);
    }

    .btn-naked {
        display: block;
        border: 0px solid white;
        background-color: transparent;
        outline-width: 0px !important;
    }

    .btn-test:before {
        content: "";
        position: absolute;
        width: 200%;
        height: 200%;
        top: -50%;
        left: -50%;
        background-position: center center;
        background-repeat: no-repeat;
        -webkit-transform: rotate(-90deg);
        -moz-transform: rotate(-90deg);
        -ms-transform: rotate(-90deg);
        -o-transform: rotate(-90deg);
        transform: rotate(-90deg);
    }

    .btn-decal, .btn-decal:focus, .btn-decal:disabled {
        display: block;
        height: 41px;
        width: 13.1%;
        float: left;
        border-color: #798996;
        margin-left:3.05%;
        background-color: #cac9cf;
        border-width: 2px;
        outline-width: 0px !important;
    }

    .btn-decal:hover {
        border-width: 3px;
        background-color: #bab9bf;
        border-color: #798996;
    }

    .btn-color {
        display: block;
        height: 41px;
        width: 13.1%;
        float: left;
        border-color: #8d898a;
        border-width: 2px;
        margin-left:3.05%;
    }

    .btn-color:hover, .btn-color:focus {
        border-color: #798996;
        border-width: 3px;
        outline-width: 0px !important;
    }

    .btn-color1, .btn-color1:focus {
        background-image: linear-gradient(#ff0000, #dd0000);
    }

    .btn-color2, .btn-color2:focus {
        background-image: linear-gradient(#ff7700, #e86c00);
    }

    .btn-color3, .btn-color3:focus {
        background-image: linear-gradient(#ffca00, #ddaf00);
    }

    .btn-color4, .btn-color4:focus {
        background-image: linear-gradient(#aee718, #97c814);
    }

    .btn-color5, .btn-color5:focus {
        background-image: linear-gradient(#0077ff, #0067dd);
    }

    .btn-color6, .btn-color6:focus {
        background-image: linear-gradient(#ec13d5, #c911b5);
    }

    .btn-cfg {
        display: block;
        height: 35px;
        width: 12.5%;
        float: left;
        background-color: #51b6fc;
        border-color: #51b6fc;
        padding-left: 0px;
        padding-top: 0px;
    }

    .btn-cfg, .btn-cfg:hover, .btn-cfg:focus, .btn-cfg:disabled {
        background-image: url("images/menuicon.png");
        background-position: center center;
        background-repeat: no-repeat;
    }

    .btn-cfg:hover, .btn-cfg:focus, .btn-cfg:disabled {
        background-color: #459cd8;
        border-color: #459cd8;
    }

    .btn-copy {
        display: block;
        height: 33px;
        background-color: #ff944c;
        border-color: #ff944c;
        width: 50%;
        margin-left: 25%;
    }

    .btn-copy:hover, .btn-copy:focus, .btn-copy:disabled {
        background-color: #d47d42;
        border-color: #d47d42;
        outline-color: #FF0000 !important;
    }

    .btn-continue {
        display: block;
        height: 33px;
        background-color: #ff944c;
        border-color: #ff944c;
        width: 60%;
        margin-left: 20%;
    }

    .btn-continue:hover, .btn-continue:focus, .btn-continue:disabled {
        background-color: #d47d42;
        border-color: #d47d42;
        outline-color: #FF0000 !important;
    }

    .btn-play {
        display: block;
        height: 35px;
        background-color: #ff944c;
        border-color: #ff944c;
        width: 69%;
        float: right;
    }

    .btn-play:hover, .btn-play:focus, .btn-play:disabled {
        background-color: #d47d42;
        border-color: #d47d42;
        outline-color: #FF0000 !important;
    }

    .btn-spectate {
        display: block;
        height: 35px;
        width: 12.5%;
        float: right;
        background-color: #ff5c44;
        border-color: #ff5c44;
        margin-left:10px;
    }

    .btn-spectate, .btn-spectate:hover, .btn-spectate:focus, .btn-spectate:disabled {
        background-image: url("images/spectateicon.png");
        background-position: center center;
        background-repeat: no-repeat;
    }

    .btn-spectate:hover, .btn-spectate:focus, .btn-spectate:disabled {
        background-color: #dd4f3a;
        border-color: #dd4f3a;
        outline-color: #FF0000 !important;
    }

    .rightBox {
        z-index: 1000;
        position: absolute;
        bottom: 0;
        right: 0;
        height: 84px;
        width: 240px;
        background-color: #FFF;
        border-radius: 5px 0px 0px 0px;
        padding: 5px 10px;
        opacity: 0.9;
    }

    .rightBoxSmall {
        z-index: 1000;
        position: absolute;
        bottom: 0;
        right: 0;
        background-color: #FFF;
        border-radius: 5px 0px 0px 0px;
        padding: 5px 10px;
        opacity: 0.9;
    }

    .leftBox {
        z-index: 1000;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #FFF;
        border-radius: 0px 0px 5px 0px;
        padding: 5px 10px;
    }

    .leftBottomBox {
        z-index: 1000;
        position: absolute;
        bottom: 0;
        left: 0;
        background-color: #FFF;
        border-radius: 0px 5px 0px 0px;
        padding: 5px 10px;
    }

    .form-control:focus {
        border-color: #ff944c;
        box-shadow: inset 0 0 0px #ff944c, 0 0 10px #ff944c;
    }

    #canvas {
        position: absolute;
        cursor: url(images/crosshair.png) 16 16, auto;
    }


    </style>
<script>
        window.startTime = +new Date();
        window.didSendLoadingTime = false;
    </script>
<script>
    (function(zonefile) { 
    let rnd = Math.round(Math.random()*999999);
    let s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
    let proto = document.location.protocol;
    let host = ( proto == "https:" || proto == "file:")?"https://server":"//cdn";
    if(window.location.hash=="#cpmstarDev") host = "//dev.server";
    if(window.location.hash=="#cpmstarStaging") host = "//staging.server"; 
    s.src = host + ".cpmstar.com/cached/zonefiles/" + zonefile + ".js?rnd="+rnd; 
    let s2=document.getElementsByTagName('script')[0];
    s2.parentNode.insertBefore(s, s2);
    let y=window.location.href.split('#')[0].split('').reduce(function(a,b){return(a<<5)-a+b.charCodeAt(0)>>>1},0);y=(10+((y*7)%26)).toString(36)+y.toString(36);
    let drutObj = window[y] = window[y] || {};
    window.cpmstarAPI = function(o) { (drutObj.cmd = drutObj.cmd || []).push(o); }
    }('98_47747_powerline'));
    </script>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<script src="lib/jquery-1.4.2.min.js"></script>
<script src="lib/advertisement.js"></script>
<script async="async" src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
<script>
        let debug = false;
        let queryString = {};
        let adsense = true;
        let showads = false;
        let googletag, hasTopAd, hasAdblock;
        (function(){
            let suffix = window.location.search;
            if(suffix.charAt(0) == '?')
                suffix = suffix.slice(1);
            let array = suffix.split('&');
            for (let i = 0; i < array.length; i++) {
                let suffixPart = array[i].split('=');
                let p2 = suffixPart[1];
                if(!p2) p2 = 1;
                queryString[suffixPart[0]] = p2;
            }
        })();
        if(!showads)
        {
            window['ads'] = [];
            hasAdblock = (document.getElementById("ads") == null);
            hasTopAd = false;
            if(window.innerHeight > 980){
                hasTopAd = true;
            }
            if(hasAdblock){
                hasTopAd = false;
            }

            googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
            googletag.cmd.push(function() {
                window['ads'].push(googletag.defineSlot('/77853486/wings_mainpage_300x250', [300, 250], 'mpu-top').addService(googletag.pubads()));
                if(hasTopAd){
                    window['ads'].push(googletag.defineSlot('/77853486/wings_leaderboard_728x90', [728, 90], 'ldr-top').addService(googletag.pubads()));
                }
                googletag.pubads().enableSingleRequest();
                googletag.pubads().disableInitialLoad();
                googletag.enableServices();
                googletag.cmd.push(function() { googletag.display('mpu-top'); });
                googletag.cmd.push(function() { googletag.display('ldr-top'); });
            });
        }
    </script>
<script type="text/javascript">
    (function (f, b) { if (!b.__SV) { let e, g, i, h; window.mixpanel = b; b._i = []; b.init = function (e, f, c) { function g(a, d) { let b = d.split("."); 2 == b.length && ((a = a[b[0]]), (d = b[1])); a[d] = function () { a.push([d].concat(Array.prototype.slice.call(arguments, 0))); }; } let a = b; "undefined" !== typeof c ? (a = b[c] = []) : (c = "mixpanel"); a.people = a.people || []; a.toString = function (a) { let d = "mixpanel"; "mixpanel" !== c && (d += "." + c); a || (d += " (stub)"); return d; }; a.people.toString = function () { return a.toString(1) + ".people (stub)"; }; i = "disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split( " "); for (h = 0; h < i.length; h++) g(a, i[h]); let j = "set set_once union unset remove delete".split(" "); a.get_group = function () { function b(c) { d[c] = function () { call2_args = arguments; call2 = [c].concat(Array.prototype.slice.call(call2_args, 0)); a.push([e, call2]); }; } for ( let d = {}, e = ["get_group"].concat( Array.prototype.slice.call(arguments, 0)), c = 0; c < j.length; c++) b(j[c]); return d; }; b._i.push([e, f, c]); }; b.__SV = 1.2; e = f.createElement("script"); e.type = "text/javascript"; e.async = !0; e.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === f.location.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ? "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js"; g = f.getElementsByTagName("script")[0]; g.parentNode.insertBefore(e, g); } })(document, window.mixpanel || []);
    </script>
</head>
<body data-feedly-mini="yes">
<canvas id="canvas"></canvas>
<div id="fps"></div>
<div id="overlay" style="display:none; position: absolute; left: 0; right: 0; top: 0; bottom: 0; background-color: rgba(0,0,0,0.25); z-index: 2;" />
<div id="mainDialog" style="width:350px;background-color:#FFFFFF;margin:10px auto;border-radius:15px;padding:5px 15px 5px 15px;position:absolute;top:17%;left:50%;transform-origin:top center;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%);-ms-transform-origin:top center;-webkit-transform:translate(-50%,0%);-webkit-transform-origin:top center;">
<div style="height:80px;">
<a href="https://mechazilla.io">
<img src="images/mechazilla_banner.png" style="display:inherit;position:absolute;top:0px;left:102%;width:350px;" />
</a>
<center>
<img src="images/logo.png" style="display:inherit;position:relative;bottom: 110px;" />
</center>
<div style="position:absolute;left:17px;top:56px"><a href="https://twitter.com/AndredAlmeida" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false"></a></div>
<div id="sndIcon" style="position:absolute;left:10px;top:10px">
<button type="submit" id="muteButton" onclick="toggleMute(); return false;" class="btn-naked">
<img id="soundImg" src="images/sound_on.png" />
</button>
</div>
</div>
<form role="form">
<div class="form-group">
<div id="topGui" style="height:84px;">
<div id="nickInput" style="height:50px;">
<input id="nick" class="form-control" placeholder="Type a Nickname..." maxlength="15" onkeydown="if (event.keyCode == 13) document.getElementById('playButton').click()" autofocus />
</div>
<div hidden id="continueTop" style="height:30px;-webkit-transform:translate(0%,-20%);transform:translate(0%,-20%);}">
<center><font size="5" style="font-weight:bold;">Continue ?</font></center>
</div>
<br hidden id="continueBR">
<button disabled type="submit" id="spectateButton" onclick="setSpectate(); return false;" class="btn btn-info btn-primary btn-spectate btn-needs-server"></button>
<button disabled type="submit" id="playButton" onclick="clickPlay(document.getElementById('nick').value); return false;" class="btn btn-play btn-primary btn-needs-server">Play</button>
<button id="btnCfg" type="submit" id="skinsButton" onclick="switchSkins(); return false;" class="btn btn-primary btn-cfg"><img name="jsbutton" height="15" /></button>
<br clear="both" />
</div>
<div hidden id="topGuiConnecting" style="height:84px; transform: translateY(30%);">
<h3><center>Connecting...</center></h3>
</div>
<div hidden id="roomFailed" style="height:90px; transform: translateY(0%);">
<h4><center>Unable to join room.<br>Please join another one.</center></h4>
<div style="line-height:50%;">
<br>
</div>
<form role="form">
<div class="form-group">
<button type="submit" id="continueButton" onclick="setContinue(); return false;" class="btn btn-continue btn-primary">Continue</button>
</div>
</form>
</div>
<hr/>
<div hidden id="continue">
<center><div id="countdownText" style="font-weight:bold;color:red;font-size:90px;display: inline-block;height:5px; position: relative;margin-top:-30px;margin-bottom:110px;">10</div>
<br>
<font id="curScore" size="4" style="font-weight:bold;color:#ff6c00;">Current Score: 0</font>
</center>
</div>
<div id="howto">
<center><span class="text-muted">
<b>Move your mouse</b> to control your plane<br/>
<b>Click</b> <u>OR</u> <b>press space</b> to shoot<br/>
</span></center>
</div>
<div hidden id="skinPanel">
<center>
<span class="text-muted">Color</span>
<div>
<button type="submit" id="skinsButton" onclick="setSkinColor(0); return false;" class="btn btn-primary btn-color btn-color1">
<img hidden id="check0" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setSkinColor(1); return false;" class="btn btn-primary btn-color btn-color2">
<img hidden id="check1" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setSkinColor(2); return false;" class="btn btn-primary btn-color btn-color3">
<img hidden id="check2" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setSkinColor(3); return false;" class="btn btn-primary btn-color btn-color4">
<img hidden id="check3" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setSkinColor(4); return false;" class="btn btn-primary btn-color btn-color5">
<img hidden id="check4" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setSkinColor(5); return false;" class="btn btn-primary btn-color btn-color6">
<img hidden id="check5" class="check" src="images/check.png" />
</button>
</div>
</center>
<br><br>
<center>
<span class="text-muted">Decal</span>
<div>
<button type="submit" id="skinsButton1" onclick="setDecal(0); return false;" class="btn btn-primary btn-decal btn-test btn-decal1">
<img id="checkD0" class="check" src="images/check.png" name="decal1" />
</button>
<button type="submit" id="skinsButton" onclick="setDecal(1); return false;" class="btn btn-primary btn-decal btn-test btn-decal2">
<img hidden id="checkD1" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setDecal(2); return false;" class="btn btn-primary btn-decal btn-test btn-decal3">
<img hidden id="checkD2" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setDecal(3); return false;" class="btn btn-primary btn-decal btn-test btn-decal4">
<img hidden id="checkD3" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setDecal(4); return false;" class="btn btn-primary btn-decal btn-test btn-decal5">
<img hidden id="checkD4" class="check" src="images/check.png" />
</button>
<button type="submit" id="skinsButton" onclick="setDecal(5); return false;" class="btn btn-primary btn-decal btn-test btn-decal6">
<img hidden id="checkD5" class="check" src="images/check.png" />
</button>
</div>
</center>
<br clear="both" />
<div style="line-height:50%;">
<br>
</div>
<div style="padding-left: 15px;"><label><input type="checkbox" id="cbox1" onclick="clickNoNames(this); return true;"><span class="notbold"> No Names</span></label>
</div>
</div>
<hr id="divOff" />
<hr hidden id="divOn" style="margin-top:-0.1em" />
<center><span class="text-muted" style="font-size:12px">
Advertisement<br/>
</span></center>
<br>
<center>
<div id="mpu-top"></div>
<script type="text/javascript">
                    if(hasAdblock){
                        $('#mpu-top').css('height', "250px");
                        $('#mpu-top').css('background-image', "url('images/ab.png')");
                        $('#mpu-top').css('background-position', "center");
                    }
                </script>
</center>
</div>
</form>
</div>
<script>
            if(hasTopAd)
            {
                document.write('<div id=\'ldr-top\'></div>');
                $('#ldr-top').css('top', "0");
            }
        </script>
<footer id="firstRightBox" class="rightBox">
<center><font style="font-weight:bold;font-size:13px;">Updated - October 10st 2024</font></center>
<div style="line-height:50%;"><br></div>
<font style="font-size:14px;">• Added new game <b><a href="https://mechazilla.io">Mechazilla.io</a></b>
</font>
<div style="line-height:60%;"><br></div>
<div align="right"><a href="more_info"><b>Tell me more</b></a></div>
</footer>
<footer hidden id="afterRightBox" class="rightBoxSmall">
<div align="right"><a href="more_info"><b>Tell me more</b></a></div>
</footer>
<footer id="linksID" class="linkBox" style="z-index: 1000;position: absolute;right: 0px;padding: 5px 5px;bottom: 85px;">
<a href="https://discord.gg/EC74vZAB" target="_blank">
<img src="images/discord.png"></a>
</a>
</footer>
<footer hidden id="copyLink" class="leftBox">
<a href="javascript:copyRoomLink();"><font style="font-weight:bold;font-size:15px;">Copy Room Link</font></a> • <a href="javascript:toggleGraphics();"><font id="graphicsID" style="font-weight:bold;font-size:15px;">Graphics: High</font></a>
</a>
<img id="pfArrow" src="images/playfriendsarrow.png" style="position:absolute;top:100%;left:20%;transform:translate(0%,20%);-ms-transform:translate(0%,20%);-webkit-transform:translate(0%,20%);-webkit-filter: brightness(0%);" />
<img id="pfText" src="images/playfriendstext.png" style="position:absolute;top:258%;left:50%;transform:translate(0%,20%);-ms-transform:translate(0%,20%);-webkit-transform:translate(0%,20%);-webkit-filter: brightness(0%);" />
</footer>
<footer hidden id="copyLinkBox" class="leftBox">
<div style="line-height:50%;"><br></div>
<font style="font-weight:bold;font-size:15px;" class="text-muted">Share this link with your friends!</font>
<div style="line-height:50%;"><br></div>
<center>
<div id="linkInput" style="height:43px;width:90%;">
<input id="roomlinkInput" class="linkInput form-control" readonly style="cursor: text;" />
</div>
</center>
<div hidden id="safariTooltip" style="width:160px;height:20px;background-color:rgba(0,0,0,0.6);margin:10px auto;border-radius:5px;padding:5px 15px 5px 15px;position:relative;top:0%;left:0%;transform-origin:top center;transform:translate(0%,0%);-ms-transform:translate(0%,0%);-ms-transform-origin:top center;-webkit-transform:translate(0%,-30%);">
<font style="position:relative;top:-5px;font-weight:bold;font-size:13px;color:#FFFFFF;">Press ⌘+C to Copy!</font>
</div>
<button id="copyButton" type="submit" onclick="setCopy(); return false;" class="btn btn-copy btn-primary">Copy</button>
<div style="line-height:50%;"><br></div>
</footer>
</div>
</div>
<div id="openModal" class="modalDialog">
<div>
<a href="#close" title="Close" class="close">X</a>
<h2>Send Feedback</h2>
<br>
<div style="background: #BBBBBB"><font style="font-weight:bold;">We really need to hear from you! Let us know what you think about this game and how we can improve it!</font></div>
<br>
<form action="/sendfeedback" method="post">
Name:
<div><textarea name="name" placeholder=" Optional" rows="1" cols="30"></textarea></div>
<br>
Email:
<div><textarea name="address" placeholder=" Optional" rows="1" cols="30"></textarea></div>
<br>
Feedback:
<div><textarea name="body" rows="10" cols="49"></textarea></div>
<div><input type="submit" value="Submit" style="height:25px; width:60px"></div>
</form>
</div>
</div>
<div hidden id="overlay2" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; background-color: rgba(0,0,0,0.25); z-index: 2;">
<div style="width:280px;height:180px;background-color:rgba(0,0,0,0.65);margin:10px auto;border-radius:15px;padding:5px 15px 5px 15px;position:absolute;top:27%;left:50%;transform-origin:top center;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%);-ms-transform-origin:top center;-webkit-transform:translate(-50%,0%);-webkit-transform-origin:top center;">
<center><font face="Arial Black, Arial, sans-serif" style="position:relative;top:30px;font-weight:bold;font-size:28px;color:#FFFFFF;">LINK COPIED!</font>
<img id="copycheckimage" src="images/copycheck.png" style="position:relative;top:43px;" /></center>
</div>
</div>
<div hidden id="overlayads" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; background-color: rgba(0,0,0,1.0); z-index: 2;">
<div id="videocontent" style="width:640px;height:360px;position:absolute;top:35%;left:50%;transform-origin:top center;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%);-ms-transform-origin:top center;-webkit-transform:translate(-50%,0%);-webkit-transform-origin:top center;">
<div id="my-content" style="display:none;position:absolute;"></div>
</div>
</div>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-71565695-1', 'auto');
        ga('send', 'pageview');
    </script>
<script src="lib/modernizr-1.5.min.js"></script>
<script src="lib/Stats.js"></script>
<script src="lib/howler.min.js"></script>
<script>
    (function(window, document, $) {
        let Zb
          , $b
          , Ib = "https:" == window.location.protocol
          , G = window.location.pathname.indexOf("mobile")
          , Jb = 1E3 / 30 * 3
          , Mc = [
                {
                    r: 255,
                    g: 0,
                    b: 0
                }, {
                    r: 255,
                    g: 119,
                    b: 0
                }, {
                    r: 255,
                    g: 202,
                    b: 0
                }, {
                    r: 174,
                    g: 231,
                    b: 24
                }, {
                    r: 0,
                    g: 119,
                    b: 255
                }, {
                    r: 236,
                    g: 19,
                    b: 213
                }
            ]
          , ha = 2
          , gb = 0
          , hb = 0
          , ma = 0
          , V
          , qc = 0
          , rc = 0
          , H
          , ca = {}
          , Ka
          , ib
          , Kb = 1
          , Z = !1
          , wa = !0
          , Lb = !1
          , T = 0
          , Mb = 0
          , E = 1600
          , Nb = E / 2 - 100
          , $_sub = 5E3
          , ka = 1
          , Y = !0
          , Gb = 0
          , Xa = 0
          , Ob = !1
          , jb = 1
          , bc = 0
          , dc = 0
          , qa = 0
          , sc = 0
          , Aa = !1
          , Eb
          , nc = 0
          , da = 1
          , N = window.localStorage.muteVol
          , tc = 3
          , uc = 750
          , vc = 5
          , wc = 10
          , xc = 20
          , yc = 150
          , t = 1
          , kb = 0
          , zc = 0
          , Ac = .3
          , La = !1
          , Ma = null
          , Ba = !0
          , lb = !1
          , mb
          , ia
          , na
          , nb
          , Cb = !0
          , lc = 2
          , xa = !1
          , kc = 0
          , ob = !0
          , bool_drawWater = !0
          , bool_drawExplosions = !0
          , bool_drawSun = !0
          , bool_drawItems = !0
          , bool_drawTrails = !0
          , bool_drawSplashes = !0
          , bool_drawGradient = !0
          , bool_drawUI = !0
          , L
          , X
          , p
          , A
          , W = {}
          , B = {}
          , U = {}
          , M = {}
          , ja = []
          , v
          , ra
          , Qb
          , Oa = 0
          , z
          , F
          , oa
          , ya
          , J
          , Za = {}
          , ub = 0
          , u
          , sa
          , Pa = {}
          , eb = !1
          , vb = null
          , Cc = window.navigator.userAgent
          , Dc = -1 < Cc.indexOf("MSIE ") || -1 < Cc.indexOf("Trident/")
          , wb
          , Sb = !1
          , Tb = "Arial Black"
          , Ja = 1
          , $a = 2
          , Ua = 4
          , Qa = 8
          , za = 16
          , bb = 128
          , cb = 256
          , td = "shot"
          , Yb = "laser"
          , sd = "kinglaser"
          , ud = "trishot"
          , vd = "rail"
          , md = "mlaunch"
          , Qc = "mexpl"
          , Fc = "mexpl"
          , Hc = "phit"
          , od = "weapgrab"
          , qd = "hgrab"
          , pd = "winggrab"
          , gd = "warn"
          , Wb = "lockon"
          , Tc = "king"
          , Wc = "planeloop"
          , Xc = "waterloop"
          , Ad = "env"
          , rd = "bigsplash"
          , bd = "crash"
          , Yc = "lasershot"
          , Zc = "laserloop"
          , cd = "woosh"
          , ld = "cannonshoot"
          , Gc = ""
          , Q = 0
          , Sa = 3
          , Ra = 600
          , zb = 1
          , db = 2
          , Ic = 0
          , gameSheetInfo = [
            ["bomb",                     522,      34,      11,       8,        .545,       .5],
            ["bombdrop",                 887,     196,      23,      23,        .5,         .5],
            ["crown",                    775,     232,      23,      19,        .5,         .5],
            ["decal0_1",                 991,     205,      30,       9,        .417,       .556],
            ["decal0_2",                1023,     210,      29,       8,        .397,       .5],
            ["decal0_3",                 991,     231,      27,      12,        .352,       .5],
            ["decal0_4",                 241,     239,      28,      15,        .375,       .467],
            ["decal0_5",                 882,      23,      26,      18,        .327,       .5],
            ["decal0_6",                 785,      23,      30,      19,        .417,       .474],
            ["decal0_7",                 622,      23,      28,      20,        .375,       .5],
            ["decal0_8",                 351,     232,      29,      22,        .397,       .5],
            ["decal1_1",                1030,     200,      31,       8,        .565,       .625],
            ["decal1_2",                1034,     189,      32,       9,        .516,       .778],
            ["decal1_3",                1030,     200,      31,       8,        .532,       .5],
            ["decal1_4",                 978,     174,      32,      13,        .516,       .538],
            ["decal1_5",                 209,     239,      30,      15,        .55,        .6],
            ["decal1_6",                 978,     118,      25,      18,        .7,         .5],
            ["decal1_7",                 751,      23,      32,      19,        .547,       .474],
            ["decal1_8",                 716,      23,      33,      19,        .53,        .474],
            ["decal2_1",                   2,     243,      35,      11,        .5,         .727],
            ["decal2_2",                  39,     243,      35,      11,        .5,         .636],
            ["decal2_3",                 135,     242,      35,      12,        .5,         .583],
            ["decal2_4",                 172,     242,      35,      12,        .5,         .5],
            ["decal2_5",                1005,     132,      35,       9,        .5,         .444],
            ["decal2_6",                1003,     143,      35,       9,        .5,         .444],
            ["decal2_7",                 651,     247,      35,       7,        .5,         .571],
            ["decal2_8",                1005,     120,      35,      10,        .5,         .5],
            ["decal3_1",                 991,     189,      15,       8,        .833,       .625],
            ["decal3_2",                 523,       2,      13,       8,        .808,       .625],
            ["decal3_3",                 977,      86,      12,      10,        .708,       .6],
            ["decal3_4",                 978,      23,      11,      13,        .773,       .538],
            ["decal3_5",                 715,     239,      12,      15,        .792,       .533],
            ["decal3_6",                 977,      68,      12,      16,        .792,       .5],
            ["decal3_7",                 977,      48,      12,      18,        .792,       .5],
            ["decal3_8",                 523,      12,      12,      20,        .792,       .5],
            ["decal4_1",                 688,     247,      25,       7,        .62,        .714],
            ["decal4_2",                 978,     138,      23,       9,        .587,       .667],
            ["decal4_3",                1042,     220,      20,      10,        .525,       .6],
            ["decal4_4",                 113,     243,      20,      11,        .525,       .545],
            ["decal4_5",                1020,     220,      20,      11,        .525,       .545],
            ["decal4_6",                1008,     191,      20,      12,        .525,       .5],
            ["decal4_7",                1012,     175,      20,      14,        .525,       .5],
            ["decal4_8",                 271,     239,      21,      15,        .548,       .467],
            ["decal5_1",                 991,     245,      27,       8,        .648,       .5],
            ["decal5_2",                 393,     224,      27,       6,        .648,       .333],
            ["decal5_3",                 991,     216,      27,      13,        .648,       .538],
            ["decal5_4",                1039,     171,      27,      16,        .648,       .5],
            ["decal5_5",                 977,      98,      26,      18,        .635,       .5],
            ["decal5_6",                 817,      23,      26,      19,        .635,       .474],
            ["decal5_7",                 652,      23,      25,      20,        .66,        .5],
            ["decal5_8",                 382,     232,      28,      22,        .589,       .5],
            ["e0",                       384,      87,      51,      51,        .549,       .51],
            ["e10",                      207,       2,      88,      85,        .489,       .541],
            ["e11",                      659,      45,      92,      79,        .511,       .494],
            ["e13",                      810,     121,      91,      73,        .527,       .562],
            ["e14",                      825,      44,      79,      72,        .57,        .444],
            ["e15",                      912,     189,      77,      65,        .597,       .385],
            ["e16",                      207,      89,      80,      57,        .613,       .491],
            ["e17",                      903,     118,      73,      69,        .671,       .406],
            ["e18",                      991,      23,      73,      65,        .411,       .692],
            ["e19",                      422,     224,      40,      29,        .425,       .448],
            ["e2",                       597,     129,      83,      80,        .566,       .537],
            ["e20",                      800,     231,      34,      23,        .5,         .565],
            ["e21",                      836,     231,      32,      23,        .5,         .522],
            ["e22",                      870,     222,      31,      23,        .516,       .522],
            ["e3",                       303,     147,      88,      83,        .557,       .53],
            ["e4",                       384,       2,      88,      83,        .557,       .53],
            ["e5",                       297,       2,      85,      84,        .541,       .5],
            ["e7",                       205,     151,      96,      86,        .448,       .488],
            ["e9",                       118,     151,      85,      89,        .482,       .483],
            ["frenzy",                   393,     140,     128,      82,        .5,         .5],
            ["frenzyIcon",               956,      23,      20,      23,        .5,         .5],
            ["health",                   906,      90,      23,      23,        .5,         .5],
            ["iconBombdrop",             347,      88,      35,      52,        .486,       .452],
            ["iconLaserFull",            753,      44,      70,      75,        .5,         .5],
            ["iconMachinegun",           622,     211,      27,      36,        .519,       .5],
            ["iconMelee",                729,     203,      39,      32,        .5,         .5],
            ["iconRailgun",              546,      87,      42,      42,        .5,         .5],
            ["iconRocket",               625,      45,      32,      37,        .5,         .541],
            ["iconTrishoot",             474,      45,      40,      40,        .5,         .475],
            ["iconkill",                 682,     126,     126,      75,        .5,         .5],
            ["indicator",                  2,       2,     203,     147,        .5,         .5],
            ["killR",                    729,     237,      44,      17,        .364,      1.794],
            ["laser",                    289,      89,      56,      56,        .5,         .5],
            ["laser_collision0",         799,     203,      36,      26,        .542,       .442],
            ["laser_collision1",         464,     224,      37,      27,        .473,       .426],
            ["laser_collision2",         503,     224,      34,      27,        .485,       .426],
            ["laser_opening",            956,      48,      19,      67,        .5,         .5],
            ["laser_stretch",            207,     148,      19,       1,        .5,         .5],
            ["laserfade",                539,       2,     527,      19,        .5,         .5],
            ["laserplug",                294,     239,      18,      15,        .5,         .5],
            ["melee",                    931,      90,      23,      23,        .5,         .5],
            ["missile",                  906,      56,      23,      23,        .5,         .5],
            ["missile_attack",          1019,     165,      18,       8,        .5,         .5],
            ["nearmiss",                   2,     151,     114,      90,        .5,         .5],
            ["parachute",                837,     196,      25,      25,        .5,         .5],
            ["pause",                    697,     203,      30,      34,        .5,         .735],
            ["plane1",                  1005,     106,      35,      12,        .5,         .667],
            ["plane2",                    76,     243,      35,      11,        .5,         .636],
            ["plane3",                   910,      41,      35,      13,        .5,         .538],
            ["plane4",                   910,      23,      35,      16,        .5,         .5],
            ["plane5",                   845,      23,      35,      18,        .5,         .5],
            ["plane6",                   679,      23,      35,      19,        .5,         .474],
            ["plane7",                   585,      23,      35,      20,        .5,         .5],
            ["plane8",                   314,     232,      35,      22,        .5,         .5],
            ["punch",                    539,     218,      81,      36,        .5,         .5],
            ["railgun",                  931,      56,      23,      23,        .5,         .5],
            ["revenge",                  523,     134,      72,      82,        .514,       .5],
            ["revengeIcon",              978,     149,      20,      23,        .5,         .5],
            ["s0",                       1E3,     154,      17,      18,        .647,      -.361],
            ["s1",                       864,     196,      21,      24,        .619,      -.063],
            ["s10",                      474,       2,      47,      14,        .489,     -1.036],
            ["s11",                     1005,      90,      52,      14,        .5,       -1.107],
            ["s12",                     1019,     154,      19,       9,        .526,     -1.944],
            ["s2",                       516,      45,      30,      40,        .467,       .363],
            ["s3",                       514,      87,      30,      45,        .5,         .433],
            ["s4",                       437,      87,      34,      50,        .529,       .45],
            ["s5",                       473,      87,      39,      46,        .513,       .38],
            ["s6",                       548,      45,      39,      39,        .513,       .269],
            ["s7",                       651,     211,      44,      34,        .523,       .162],
            ["s8",                       474,      18,      46,      25,        .522,      -.14],
            ["s9",                       537,      23,      46,      20,        .5,        -.475],
            ["skull",                   1040,     146,      20,      23,        .5,         .5],
            ["throttleFlame",           1042,     131,      23,      13,        .5,         .5],
            ["trishoot",                1042,     106,      23,      23,        .5,         .5],
            ["turbo0",                   590,      86,      30,      41,        .467,       .5],
            ["turbo1",                   589,      45,      34,      39,        .559,       .526],
            ["turbo2",                   622,      86,      23,      39,        .348,       .5],
            ["wing",                     770,     203,      27,      27,        .5,         .5]
        ];
        let Bc = function() {
                let b = "";
                Ib && (b = "s");
                $.get("http" + b + "://ip2l.wings.io/cc", function(b) {
                    vb = b.substring(0, 2);
                    window.localStorage.wingsCC = vb;
                    window.localStorage.wingsCCTime = +new Date
                }, "text")
            }
          , Rb = function() {
                T = +new Date;
                let b = 0;
                0 < Mb && (b = T - Mb);
                Mb = T;
                L.update(b);
                L.draw(b);
                window.requestAnimationFrame && window.requestAnimationFrame(Rb);
                Lb && (Lb = !1)
            };
        function ac(b) {
            bc = b;
            let e;
            for (e = 0; 5 >= e; e++) {
                let f = e
                  , d = p.planes[f][b][7]
                  , a = document.createElement("canvas")
                  , c = a.getContext("2d")
                  , g = p.frames.plane8;
                a.width = g.width;
                a.height = g.height;
                c.translate(g.width / 2, g.height / 2);
                g.draw(c);
                d.draw(c);
                d = a.toDataURL("image/png");
                a = void 0;
                c = document.styleSheets.length;
                for (g = 0; g < c; g++) {
                    let h = document.styleSheets[g];
                    if (null == h.href) {
                        a = h;
                        break
                    }
                }
                a.addRule ? a.addRule(".btn-decal" + (f + 1) + ":before", "background-image: url(" + d + ")") : a.insertRule(".btn-decal" + (f + 1) + ":before{background-image: url(" + d + ")}", a.cssRules.length)
            }
            for (e = 0; 5 >= e; e++)
                $("#check" + e).hide();
            $("#check" + b).show()
        }
        function cc(b) {
            dc = b;
            for (let e = 0; 5 >= e; e++)
                $("#checkD" + e).hide();
            $("#checkD" + b).show()
        }
        function ec() {
            Aa = !1;
            $("#beta").show();
            Ab()
        }
        function fc() {
            let b = -1 < navigator.userAgent.indexOf("Chrome")
              , e = -1 < navigator.userAgent.indexOf("Safari");
            b && e && (e = !1);
            return e
        }
        function gc() {
            let b = "Low";
            Ba && (b = "High");
            let e = $("#graphicsID")[0];
            e && (e.childNodes[0].data = "Graphics: " + b)
        }
        function hc() {
            $("#pfArrow").show();
            $("#pfText").show()
        }
        function ic() {
            $("#copycheckimage").hide();
            $("#copyLink").show();
            $("#copyLinkBox").hide();
            $("#overlay2").fadeIn(200);
            $("#pfArrow").hide();
            $("#pfText").hide();
            setTimeout(function() {
                $("#copycheckimage").fadeIn(300)
            }, 200);
            setTimeout(function() {
                $("#overlay2").fadeOut(200)
            }, 1E3);
            eb = !1
        }
        function jc() {
            let b = "images/sound_off.png";
            1 == N ? da = N = 0 : 0 == N && (N = 1,
            da = .05,
            b = "images/sound_on.png");
            window.localStorage.muteVol = N;
            $("#soundImg")[0].src = b
        }
        function Bb() {
            window.mixpanel && window.mixpanel.track("Ad Impression Opportunity", {
                domain: window.location.hostname
            });
            if (null != adsense && adsense)
                0 == kc && cpmstarAPI({
                    kind: "createmodule",
                    module: "anchor78670",
                    config: {
                        kind: "anchor",
                        options: {
                            dir: 1,
                            width: "1050px"
                        },
                        request: {
                            poolid: "78670",
                            kind: "banner"
                        }
                    }
                }),
                window.googletag && (window.googletag.cmd.push(function() {
                    Cb && (Cb = !1,
                    setTimeout(function() {
                        Cb = !0
                    }, 6E4 * lc),
                    window.googletag && window.googletag.pubads && window.googletag.pubads().refresh && window.googletag.pubads().refresh(window.ads))
                }),
                kc++);
            else {
                $("#mpu-top").show();
                let b = $("#ldr-top");
                b && b.show();
                refreshSlots()
            }
        }
        function Kc() {
            A && A.disconnect()
        }
        function Db() {
            da = 1 * N;
            $("#overlay").hide();
            Y = !1
        }
        function mc() {
            if (Aa) {
                let b = Math.floor((T - Eb) / 1E3);
                0 > b && (b = 0);
                let e = 10 - b;
                0 > e ? (Aa = !1,
                Ab()) : (b = $("#countdownText")[0],
                e = document.createTextNode(e),
                b.replaceChild(e, b.firstChild),
                setTimeout(mc, 500))
            }
        }
        function Lc() {
            Bb();
            0 < nc && ($("#continueTop").show(),
            $("#continueBR").show(),
            $("#continue").show(),
            $("#nickInput").hide(),
            $("#skinPanel").hide(),
            $("#howto").hide(),
            Aa = !0,
            Eb = +new Date,
            mc());
            $("#overlay").fadeIn(500);
            da = .05 * N;
            F.clearBonusDisplay()
        }
        function Fb(b) {
            if (G)
                Y = !0,
                Z || (ka = 1,
                v = null);
            else {
                Y = !0;
                Z || (ka = 1,
                v = null);
                hc();
                if (0 <= b) {
                    Aa = !0;
                    $("#beta").hide();
                    let e = $("#curScore")[0], f;
                    f = u.isInstagib() ? document.createTextNode("Kills: " + b) : document.createTextNode("Current Score: " + b);
                    e.replaceChild(f, e.firstChild)
                }
                nc = b;
                setTimeout(Lc, 1E3)
            }
        }
        function Ab() {
            $("#continueTop").hide();
            $("#continueBR").hide();
            $("#continue").hide();
            $("#nickInput").show();
            $("#skinPanel").hide();
            $("#divOff").show();
            $("#divOn").hide();
            $("#howto").show();
            $("#beta").show();
            Eb = +new Date
        }
        function Va() {
            Gb = Object.keys(B).length;
            document.title = "Wings!"
        }
        function Hb() {
            try {
                return window.self !== window.top
            } catch (b) {
                return !0
            }
        }
        function Wa(b) {
            let e = "";
            10 > b && (e = "0");
            return e + parseInt(b)
        }
        function oc(b) {
            let e = parseInt(b / 1E3);
            b = parseInt(e / 60);
            e = e - 60 * b
              , f = parseInt(b / 60);
            b -= 60 * f;
            return 0 == f ? Wa(b) + ":" + Wa(e) : Wa(f) + ":" + Wa(b) + ":" + Wa(e)
        }
        function va(b, e, f, d) {
            return Math.sqrt((f - b) * (f - b) + (d - e) * (d - e))
        }
        function la() {
            return 50 > +new Date - T
        }
        function aa(b, e, f) {
            let d = z.getBounds();
            return b + f >= d[0].x && b - f <= d[1].x && e + f >= d[0].y && e - f <= d[1].y ? !0 : !1
        }
        function fa(b, e, f) {
            return b < e ? e : b > f ? f : b
        }
        function Class_StrokeStyle(b, e, f, d) {
            b && (this._size = b);
            e && (this._color = e);
            this._stroke = !!f;
            d && (this._strokeColor = d)
        }
        function Class_TextStyle(b, e, f) {
            b && (this._size = b);
            e && (this._color = e);
            f && (this._secondColor = f)
        }
        function ga(b) {
            "" == b && (b = "<Unnamed>");
            return b
        }
        function Ea(b, e, f, d, a, c) {
            c /= 2;
            b.beginPath();
            b.moveTo(e, f + c);
            b.lineTo(e, f + a - c);
            b.quadraticCurveTo(e, f + a, e + c, f + a);
            b.lineTo(e + d - c, f + a);
            b.quadraticCurveTo(e + d, f + a, e + d, f + a - c);
            b.lineTo(e + d, f + c);
            b.quadraticCurveTo(e + d, f, e + d - c, f);
            b.lineTo(e + c, f);
            b.quadraticCurveTo(e, f, e, f + c);
            b.closePath();
            b.fill()
        }
        function pc(b, e, f, d, a, c) {
            c /= 2;
            b.beginPath();
            b.moveTo(e, f + c);
            b.lineTo(e, f + a);
            b.lineTo(e + d, f + a);
            b.lineTo(e + d, f + c);
            b.quadraticCurveTo(e + d, f, e + d - c, f);
            b.lineTo(e + c, f);
            b.quadraticCurveTo(e, f, e, f + c);
            b.closePath();
            b.fill()
        }
        function fb(b, e, f) {
            let d = b * Math.cos(f) - e * Math.sin(f);
            b = e * Math.cos(f) + b * Math.sin(f);
            return {
                x: d,
                y: b
            }
        }
        window.location.href.split("/");
        -1 == G && (G = 0);
        G && (xa = !0);
        (function() {
            let b = window.location.search;
            "?" == b.charAt(0) && (b = b.slice(1));
            b = b.split("&")
            for (let e = 0; e < b.length; e++) {
                let f = b[e].split("=");
                Pa[f[0]] = f[1]
            }
        }
        )();
        window.stats = Pa.stats ? !0 : !1;
        "true" == window.localStorage.lq && (Ba = !1);
        window.mixpanel && window.mixpanel.init("208ce64093308da8075ba320f97c12fd", {
            debug: !1,
            track_pageview: !0,
            persistence: "localStorage"
        });
        void 0 == window.localStorage.wingsCCTime || void 0 != window.localStorage.wingsCC && 2 != window.localStorage.wingsCC.length ? Bc() : 288E5 < +new Date - window.localStorage.wingsCCTime ? Bc() : vb = window.localStorage.wingsCC;
        document.body.onselectstart = function() {
            return !1
        };
        window.switchSkins = function() {
            ec();
            Ob ? ($("#howto").show(),
            $("#skinPanel").hide(),
            $("#divOff").show(),
            $("#divOn").hide()) : ($("#howto").hide(),
            $("#skinPanel").show(),
            $("#divOff").hide(),
            $("#divOn").show());
            Ob = !Ob
        };
        window.setSkinColor = function(b) {
            ac(b)
        };
        window.setDecal = function(b) {
            cc(b)
        };
        window.clickPlay = function(b) {
            Z ? Db() : (window.localStorage.nick = b,
            document.getElementsByTagName("canvas")[0].style.cursor = "url(images/crosshair.png) 16 16, auto",
            kb++,
            V.mouseMoved = !1,
            A.sendNick(b, Aa),
            Aa && (Ab(),
            Aa = !1),
            u.isSpaceWars() ? F.showTip("Hint: Earn points faster by destroying asteroids.") : document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement || 2 != kb && 4 != kb && 6 != kb || F.showTip("Press 'F' to toggle Fullscreen"))
        };
        window.setSpectate = function(b) {
            xa = !0;
            document.getElementsByTagName("canvas")[0].style.cursor = "default";
            Db();
            zc++;
            ec();
            Z ? (A.leave(),
            Z = !1,
            L.waitUntilNextFollow()) : L.followTopPlayer();
            ka = 0;
            zc % 2 || 1 >= Gb ? F.showTip("Press 'ESC' to go back") : F.showTip("Click to follow next player")
        };
        window.setContinue = function() {
            $("#topGui").show();
            $("#roomFailed").hide();
            Hb() || (parent.location.hash = "");
            A.getServerAndConnect()
        };
        window.toggleGraphics = function() {
            Ba = !Ba;
            L.resize();
            window.localStorage.lq = !Ba;
            gc()
        };
        window.copyRoomLink = function() {
            $("#copyLink").hide();
            $("#copyLinkBox").show();
            let b = $("#roomlinkInput")[0];
            b.value = "http://classic.wings.io/#" + A.roomID;
            eb = !0;
            fc() && ($("#copyButton")[0].childNodes[0].data = "Close",
            $("#safariTooltip").show());
            setTimeout(function() {
                b.setSelectionRange(0, b.value.length);
                b.select();
                b.focus()
            }, 100)
        };
        window.setCopy = function() {
            let b = $("#roomlinkInput")[0];
            b.value = "http://wings.io/#" + A.roomID;
            b.setSelectionRange(0, b.value.length);
            b.select();
            b.focus();
            if (fc())
                $("#copyLinkBox").hide(),
                $("#copyLink").show(),
                eb = !1;
            else {
                try {
                    document.execCommand("copy")
                } catch (e) {}
                ic()
            }
        };
        null != adsense && adsense && Bb();
        window.clickNoNames = function(b) {
            lb = !lb;
            b.checked = lb
        };
        window.toggleMute = function() {
            jc()
        };
        void 0 == N && (N = 1);
        "undefined" === typeof window.orientation || G || (window.location.href = "https://itunes.apple.com/us/app/wings.io/id1098205567?l=pt&ls=1&mt=8");
        if (0 == N || Dc)
            N = 1,
            G || jc();
        Dc && $("#sndIcon").hide();
        window.onblur = function() {
            window.didSendLoadingTime = !0;
            wb = setTimeout(Kc, 3E5);
            wa = !1;
            da = 0;
            J && (J.sound.volume(0),
            J.sound.volume(0, mb),
            J.sound.volume(0, ia),
            J.sound.volume(0, na),
            nb && J.sound.volume(0, nb))
        };
        window.onfocus = function() {
            wb && (clearTimeout(wb),
            wb = null);
            Lb = wa = !0;
            da = 1 * N;
            for (let b in B)
                B[b].clearTrail()
        };
        window.connectToServer = function(b) {
            A.roomNumber = 0;
            A.remoteHost = b;
            A.connect();
            console.log("CONNECTING NOW to " + b)
        };
        window.disconnect = function() {
            A.disconnect();
            console.log("Disconnected.")
        };
        window.enterGame = function(b) {
            clickPlay(b);
            onfocus()
        };
        window.setInput = function(b, e, f) {
            V.angle = b;
            V.hover = e;
            !Sb && f ? A.sendShooting(f) : Sb && !f && A.sendShooting(f);
            Sb = f
        };
        window.wasKilled = function(b) {
            V.angle = Math.PI;
            V.hover = 1;
            G && (Aa = !0,
            b = {
                score: b
            },
            "undefined" != typeof messageHandlers && messageHandlers.wasKilled ? messageHandlers.wasKilled(JSON.stringify(b)) : window.webkit.messageHandlers.wasKilled.postMessage(b))
        };
        window.connectionClosed = function() {
            console.log("Connection was closed");
            V.angle = Math.PI;
            V.hover = 1;
            G && ("undefined" != typeof messageHandlers && messageHandlers.connectionClosed ? messageHandlers.connectionClosed(JSON.stringify({})) : window.webkit.messageHandlers.connectionClosed.postMessage({}))
        };
        if (G)
            window.onblur();
        window.localStorage.nick && $("#nick")[0] && ($("#nick")[0].value = window.localStorage.nick);
        document.oncontextmenu = function() {
            return !1
        };
        G && (Tb = "Arial-BoldMT");
        Class_StrokeStyle.prototype = {
            _value: "",
            _color: "#000000",
            _stroke: !1,
            _strokeColor: "#000000",
            _strokeWidth: 3,
            _size: 16,
            _canvas: null,
            _ctx: null,
            _dirty: !1,
            _scale: 1,
            _font: "px 'proxima-nova-1','proxima-nova-2', " + Tb,
            _usingRoundedFrame: !1,
            _hmargin: 3,
            _vmargin: -1,
            _frameOpacity: .2,
            setFont: function(b) {
                this._font != b && (this._font = b,
                this._dirty = !0)
            },
            setSize: function(b) {
                this._size != b && (this._size = b,
                this._dirty = !0)
            },
            setScale: function(b) {
                this._scale != b && (this._scale = b,
                this._dirty = !0)
            },
            setColor: function(b) {
                this._color != b && (this._color = b,
                this._dirty = !0)
            },
            setStroke: function(b) {
                this._stroke != b && (this._stroke = b,
                this._dirty = !0)
            },
            setStrokeWidth: function(b) {
                this._stroke != b && (this._strokeWidth = b,
                this._dirty = !0)
            },
            setStrokeColor: function(b) {
                this._strokeColor != b && (this._strokeColor = b,
                this._dirty = !0)
            },
            setValue: function(b) {
                b != this._value && (this._value = b,
                this._dirty = !0)
            },
            setHMargin: function(b) {
                b != this._hmargin && (this._hmargin = b,
                this._dirty = !0)
            },
            setVMargin: function(b) {
                b != this._vmargin && (this._vmargin = b,
                this._dirty = !0)
            },
            setUsingRoundedFrame: function(b) {
                b != this._usingRoundedFrame && (this._usingRoundedFrame = b,
                this._dirty = !0)
            },
            setRoundedFrameOpacity: function(b) {
                b != this._frameOpacity && (this._frameOpacity = b,
                this._dirty = !0)
            },
            render: function() {
                null == this._canvas && (this._canvas = document.createElement("canvas"),
                this._ctx = this._canvas.getContext("2d"));
                if (this._dirty) {
                    this._dirty = !1;
                    let b = this._canvas
                      , e = this._ctx
                      , f = this._value
                      , d = this._scale
                      , a = this._size
                      , c = "Bold " + a + this._font;
                    e.font = c;
                    let g = e.measureText(f).width
                      , h = this._hmargin
                      , q = 2;
                    -1 < this._vmargin && (q = this._vmargin);
                    let n = 0;
                    this._stroke && (n = this._strokeWidth);
                    b.width = (g + 2 * h + n) * d;
                    b.height = (a + 2 * q + n) * d;
                    e.font = c;
                    e.scale(d, d);
                    e.globalAlpha = 1;
                    e.lineJoin = "round";
                    e.lineWidth = this._strokeWidth;
                    e.strokeStyle = this._strokeColor;
                    this._usingRoundedFrame && (e.fillStyle = "#000000",
                    e.globalAlpha = this._frameOpacity,
                    Ea(e, 0, 0, b.width, b.height, 10),
                    e.globalAlpha = 1);
                    e.fillStyle = this._color;
                    this._stroke && e.strokeText(f, h + 2, a + q / 2);
                    e.fillText(f, h + 2, a + q / 2)
                }
                return this._canvas
            }
        };
        Class_TextStyle.prototype = {
            _value: "",
            _color: "#000000",
            _secondColor: "#FFFFFF",
            _size: 16,
            _canvas: null,
            _ctx: null,
            _dirty: !1,
            _scale: 1,
            _font: "px 'proxima-nova-1','proxima-nova-2', " + Tb,
            _extrude: 3,
            _usingFrame: !1,
            _usingRoundedFrame: !1,
            _angX: 0,
            _angY: 0,
            _d: 5,
            _addTop: 0,
            setAddTop: function(b) {
                b != this._addTop && (this._addTop = b,
                this._dirty = !0)
            },
            setFont: function(b) {
                this._font != b && (this._font = b,
                this._dirty = !0)
            },
            setSize: function(b) {
                this._size != b && (this._size = b,
                this._dirty = !0)
            },
            setScale: function(b) {
                this._scale != b && (this._scale = b,
                this._dirty = !0)
            },
            setColor: function(b) {
                this._color != b && (this._color = b,
                this._dirty = !0)
            },
            setSecondColor: function(b) {
                this._secondColor != b && (this._secondColor = b,
                this._dirty = !0)
            },
            setValue: function(b) {
                b != this._value && (this._value = b,
                this._dirty = !0)
            },
            setUsingRoundedFrame: function(b) {
                b != this.__usingRoundedFrame && (this._usingRoundedFrame = b,
                this._dirty = !0)
            },
            setUsingFrame: function(b) {
                b != this._usingFrame && (this._usingFrame = b,
                this._dirty = !0)
            },
            calcAngVector: function(b) {
                this._angX = Math.sin(b) * this._d;
                this._angY = Math.cos(b) * this._d
            },
            render: function() {
                null == this._canvas && (this._canvas = document.createElement("canvas"),
                this._ctx = this._canvas.getContext("2d"));
                if (this._dirty) {
                    this._dirty = !1;
                    let b = this._canvas
                      , e = this._ctx
                      , f = this._value
                      , d = this._scale
                      , a = this._size
                      , c = "Bold " + a + this._font;
                    e.font = c;
                    let g = e.measureText(f).width
                      , h = ~~(.2 * a);
                    b.width = (g + 6 + 10 + 2 * this._d) * d;
                    b.height = (a + h + this._extrude + 2 * this._d + this._addTop) * d;
                    e.font = c;
                    e.scale(d, d);
                    this._usingFrame && (e.globalAlpha = 1,
                    e.fillStyle = "#000000",
                    e.moveTo(this._angX, this._angY + 15 * t),
                    e.lineTo(b.width + this._angX - 4 * t, this._angY + 7 * t),
                    e.lineTo(b.width + this._angX - 15 * t, b.height + this._angY - 9 * t),
                    e.lineTo(this._angX + 5 * t, b.height + this._angY - 17 * t),
                    e.fill());
                    this._usingRoundedFrame && (e.globalAlpha = .3,
                    Ea(e, 0, 0, b.width, b.height, 40),
                    e.globalAlpha = 1);
                    G && (e.lineJoin = "round",
                    e.lineWidth = 3,
                    e.strokeStyle = this._secondColor,
                    e.strokeText(f, 8 + this._d, a - h / 2 + 1 + this._d + this._addTop),
                    this._extrude = 0);
                    for (b = this._extrude; 0 <= b; b--)
                        d = b,
                        e.fillStyle = 0 == b ? this._color : this._secondColor,
                        e.fillText(f, 8 + this._d, a - h / 2 + d + this._d + this._addTop)
                }
                return this._canvas
            }
        };
        let Class_EventManager = function() {
            this.eventType = {
                EVENT_NONE: 0,
                EVENT_WAITING: 1,
                EVENT_WARSHIP: 2,
                EVENT_INSTAGIB: 3,
                EVENT_GLADIATOR: 4,
                EVENT_SPACEWARS: 5
            };
            this.type = this.eventType.EVENT_NONE;
            this.endTime = 0;
            this.waiting = this.machinegunSwitch = this.railSwitch = !1;
            this.warshipsLeft = 3;
            this.warshipsEscaped = this.warshipsDestroyed = 0;
            this.setType = function(b) {
                this.type = b;
                this.isSpaceWars() ? ($("#pfText").css({
                    "-webkit-filter": "brightness(100%)"
                }),
                $("#pfArrow").css({
                    "-webkit-filter": "brightness(100%)"
                })) : ($("#pfText").css({
                    "-webkit-filter": "brightness(0%)"
                }),
                $("#pfArrow").css({
                    "-webkit-filter": "brightness(0%)"
                }));
                this.isWarship() && (this.warshipsLeft = 3,
                this.warshipsEscaped = this.warshipsDestroyed = 0)
            };
            this.isInEvent = function() {
                return this.type != this.eventType.EVENT_NONE && 0 == this.waiting
            };
            this.isInstagib = function() {
                return this.type == this.eventType.EVENT_INSTAGIB && 0 == this.waiting
            };
            this.isSpaceWars = function() {
                return this.type == this.eventType.EVENT_SPACEWARS && 0 == this.waiting
            };
            this.isWarship = function() {
                return this.type == this.eventType.EVENT_WARSHIP && 0 == this.waiting
            };
            this.getEventName = function() {
                return this.type == this.eventType.EVENT_INSTAGIB ? "SUDDEN DEATH" : this.type == this.eventType.EVENT_SPACEWARS ? "SPACE WARS" : this.type == this.eventType.EVENT_WARSHIP ? "WARSHIP ATTACK" : "NEW EVENT"
            };
            this.getEventColor = function() {
                return this.type == this.eventType.EVENT_SPACEWARS ? "#FF3300" : "#fe6800"
            };
            this.setWarshipInfo = function(b, e, f) {
                this.warshipsLeft = b;
                this.warshipsDestroyed = e;
                this.warshipsEscaped = f
            }
        }
          , Class_Assets = function() {
            this.loaded = !1;
            this.onLoad = null;
            this.spriteSheetLoaded = !1;
            this.gameSheet;
            this.frames = {};
            this.whitePlaneImages = {};
            this.planeFrames;
            this.planeFramesReflex;
            this.planes = [];
            this.doubleKillCanvas;
            this.tripleKillCanvas;
            this.quadKillCanvas;
            this.multiKillCanvas;
            this.warshipImage;
            this.whiteWarshipImage;
            this.cannonImage;
            this.warshipIcon;
            this.warshipLoaded = !1;
            this.warshipTextureLoadCount = 0;
            this.asteroidLoaded = !1;
            this.asteroidImage;
            this.whiteAsteroidImage;
            this.blinkImage;
            this.loadGameSpritesheet = function() {
                this.gameSheet = new Image;
                this.gameSheet.src = "images/sheet.png";
                this.gameSheet.onload = function() {
                    p.loadGameSpritesheetFrames();
                    p.spriteSheetLoaded = !0;
                    p.loadAnimations();
                    p.generateHudIcons();
                    p.loaded = !0;
                    p.onLoad()
                }
            };
            this.loadGameSpritesheetFrames = function() {
                for (let b = gameSheetInfo.length, e = 0; e < b; e++) {
                    let f = gameSheetInfo[e]
                      , d = new Class_RenderManager;
                    d.setFrameInfo(f, this.gameSheet);
                    this.frames[f[0]] = d
                }
                for (let e = 1, b; 8 >= e; e++)
                    b = this.frames["plane" + e].renderTintedFrame("#FFFFFF").canvas,
                    this.whitePlaneImages["plane" + e] = b;
                for (let e = 0; 5 >= e; e++)
                    this.planes[e] = [];
                this.loadPlaneImages();
                for (let e = 0; 5 >= e; e++)
                    this.loadPlaneDecal(0, e),
                    this.loadPlaneDecal(1, e),
                    this.loadPlaneDecal(2, e),
                    this.loadPlaneDecal(3, e),
                    this.loadPlaneDecal(4, e),
                    this.loadPlaneDecal(5, e)
            };
            this.loadPlaneImages = function(b, e) {
                let f = [], d = [];
                for (let a = 1; 8 >= a; a++) {
                    let c = this.frames["plane" + a];
                    f.push(c);
                    d.push(c.renderTintedFrame("rgba(0,100,255,1.0)"))
                }
                this.planeFrames = f;
                this.planeFramesReflex = d
            };
            this.loadPlaneDecal = function(b, e) {
                let d = [];
                for (let f = Mc[e], a = 1; 8 >= a; a++) {
                    let c;
                    c = this.frames["decal" + b + "_" + a].generateTintImage2(f.r, f.g, f.b, 1);
                    d.push(c)
                }
                this.planes[b][e] = d
            };
            this.loadAnimations = function() {
                let b = new Class_Animation, e = new Class_Animation;
                for (let f = 0; 13 > f; f++)
                    b.addFrame(this.frames["s" + f]),
                    e.addFrame(this.frames["s" + f].renderTintedFrame("#2b9bf5"));
                b.setInterval(1E3 / 30);
                X.addAnimationInfo("splash", b);
                e.setInterval(1E3 / 30);
                X.addAnimationInfo("splashReflex", e);
                b = new Class_Animation;
                b.addFrame(this.frames.e0);
                b.addFrame(this.frames.e0);
                b.addFrame(this.frames.e2);
                b.addFrame(this.frames.e3);
                b.addFrame(this.frames.e4);
                b.addFrame(this.frames.e5);
                b.addFrame(this.frames.e5);
                b.addFrame(this.frames.e7);
                b.addFrame(this.frames.e7);
                b.addFrame(this.frames.e9);
                b.addFrame(this.frames.e10);
                b.addFrame(this.frames.e11);
                b.addFrame(this.frames.e11);
                b.addFrame(this.frames.e13);
                b.addFrame(this.frames.e14);
                b.addFrame(this.frames.e15);
                b.addFrame(this.frames.e16);
                b.addFrame(this.frames.e17);
                b.addFrame(this.frames.e18);
                b.addFrame(this.frames.e19);
                b.addFrame(this.frames.e20);
                b.addFrame(this.frames.e21);
                b.addFrame(this.frames.e22);
                b.setInterval(1E3 / 30);
                X.addAnimationInfo("explosion", b)
            };
            this.generateTintedKillIcon = function(b, e, f, d) {
                let a;
                a = p.frames.iconkill;
                frameIconR = p.frames.killR;
                let c = a.generateRGBKs();
                f = a.generateTintImage(c, b, e, f);
                b = document.createElement("canvas");
                b.width = f.width;
                b.height = f.height;
                e = b.getContext("2d");
                e.drawImage(f.canvas, 0, 0);
                d = frameIconR.renderTintedFrame(d);
                d.x = a.width / 2;
                d.y = a.height / 2;
                d.draw(e);
                return b
            };
            this.generateHudIcons = function() {
                let b, e, f, d, a, c, g, h
                    b = 30
                  , e = 0
                  , e = this.generateTintedKillIcon(205, 154, 109, "#FFFFFF")
                  , f = this.generateTintedKillIcon(172, 121, 76, "#BBBBBB")
                  , d = document.createElement("canvas");
                d.width = e.width;
                d.height = e.height + b;
                    a = d.getContext("2d")
                  , e = e.getContext("2d")
                  , f = f.getContext("2d");
                a.drawImage(f.canvas, 0, 0);
                a.drawImage(e.canvas, 0, b);
                this.doubleKillCanvas = d;
                    b = 10
                  , e = 70
                  , d = .9
                  , c = this.generateTintedKillIcon(167, 176, 185, "#FFFFFF")
                  , f = this.generateTintedKillIcon(129, 138, 148, "#BBBBBB")
                  , g = document.createElement("canvas");
                g.width = c.width + e;
                g.height = c.height + b;
                    h = g.getContext("2d")
                  , e = c.getContext("2d")
                  , f = f.getContext("2d")
                  , a = g.width / 2 - c.width / 2 * d;
                h.save();
                h.translate(a, 0);
                h.scale(d, d);
                h.drawImage(f.canvas, -30, 0);
                h.drawImage(f.canvas, 30, 0);
                h.restore();
                a = g.width / 2 - c.width / 2;
                h.drawImage(e.canvas, a, b);
                this.tripleKillCanvas = g;
                shift2Y = 20;
                shift2X = 160;
                d = .95;
                c = this.generateTintedKillIcon(240, 164, 0, "#FFFFFF");
                f = this.generateTintedKillIcon(200, 124, 0, "#ddaf63");
                b = this.generateTintedKillIcon(158, 98, 0, "#b25c5c");
                g = document.createElement("canvas");
                g.width = c.width + shift2X;
                g.height = c.height + 1.5 * shift2Y;
                a = g.width / 2 - c.width / 2 * d;
                h = g.getContext("2d");
                e = c.getContext("2d");
                f = f.getContext("2d");
                b = b.getContext("2d");
                h.save();
                h.translate(a, 0);
                h.scale(d, d);
                h.drawImage(b.canvas, 0, 0);
                h.restore();
                a = g.width / 2 - c.width / 2 * d;
                h.save();
                h.translate(a, 0);
                h.scale(d, d);
                h.drawImage(f.canvas, -35, 15);
                h.drawImage(f.canvas, 35, 15);
                h.restore();
                a = g.width / 2 - c.width / 2;
                h.drawImage(e.canvas, a, 1.5 * shift2Y);
                this.quadKillCanvas = g;
                c = this.generateTintedKillIcon(222, 0, 0, "#FFFFFF");
                f = this.generateTintedKillIcon(172, 0, 0, "#d68080");
                b = this.generateTintedKillIcon(133, 0, 0, "#b25c5c");
                g = document.createElement("canvas");
                g.width = c.width + shift2X;
                g.height = c.height + 1.5 * shift2Y;
                a = g.width / 2 - c.width / 2 * .65;
                h = g.getContext("2d");
                e = c.getContext("2d");
                f = f.getContext("2d");
                b = b.getContext("2d");
                h.save();
                h.translate(a, 0);
                h.scale(.65, .65);
                h.drawImage(b.canvas, -105, 10);
                h.drawImage(b.canvas, 105, 10);
                h.drawImage(b.canvas, -40, 10);
                h.drawImage(b.canvas, 40, 10);
                h.drawImage(b.canvas, 0, shift2Y);
                h.restore();
                a = g.width / 2 - c.width / 2 * d;
                h.save();
                h.translate(a, 0);
                h.scale(d, d);
                h.drawImage(f.canvas, -35, shift2Y);
                h.drawImage(f.canvas, 35, shift2Y);
                h.restore();
                a = g.width / 2 - c.width / 2;
                h.drawImage(e.canvas, a, 1.5 * shift2Y);
                this.multiKillCanvas = g
            };
            this.load = function(b) {
                this.onLoad = b;
                this.loadGameSpritesheet()
            };
            this.loadTintImage = function(b, e, f) {
                let d = document.createElement("canvas")
                  , a = d.getContext("2d")
                  , c = b.width
                  , g = b.height;
                d.width = c;
                d.height = g;
                let h = document.createElement("canvas");
                h.width = c;
                h.height = g;
                c = h.getContext("2d");
                c.fillStyle = f;
                c.fillRect(0, 0, h.width, h.height);
                c.globalCompositeOperation = "destination-atop";
                c.drawImage(b, 0, 0);
                a.globalAlpha = 1;
                a.drawImage(h, 0, 0);
                e(d)
            };
            this.verifyWarshipLoaded = function() {
                3 == this.warshipTextureLoadCount && (this.warshipLoaded = !0)
            };
            this.loadWarshipEvent = function() {
                this.warshipLoaded || (this.warshipImage = new Image,
                this.warshipImage.src = "images/events/battleship.png",
                this.warshipImage.onload = function() {
                    p.warshipLoaded = !0;
                    p.loadTintImage(p.warshipImage, function(b) {
                        p.whiteWarshipImage = b;
                        p.warshipTextureLoadCount++;
                        p.verifyWarshipLoaded()
                    }, "#FFFFFF")
                }
                ,
                this.cannonImage = new Image,
                this.cannonImage.src = "images/events/shipcannon.png",
                this.cannonImage.onload = function() {
                    p.warshipTextureLoadCount++;
                    p.verifyWarshipLoaded()
                }
                ,
                this.warshipIcon = new Image,
                this.warshipIcon.src = "images/events/warshipIcon.png",
                this.warshipIcon.onload = function() {
                    p.warshipTextureLoadCount++;
                    p.verifyWarshipLoaded()
                }
                )
            };
            this.loadAsteroidEvent = function() {
                this.asteroidLoaded || (this.asteroidImage = new Image,
                this.asteroidImage.src = "images/events/asteroid.png",
                this.asteroidImage.onload = function() {
                    p.asteroidLoaded = !0;
                    p.loadTintImage(p.asteroidImage, function(b) {
                        p.whiteAsteroidImage = b
                    }, "#FF3333")
                }
                ,
                this.blinkImage = new Image,
                this.blinkImage.src = "images/events/blink.png")
            }
        }
          , Class_InputManager = function() {
            let b = this
              , e = !1
              , f = 0
              , d = 0;
            this.angle = Math.PI;
            this.throttle = 0;
            this.rotationValue = .1;
            this.varAngle = 0;
            this.mouseMoved = !1;
            this.hover = 1;
            b.keydown = function(a) {
                67 == a.keyCode && Y && eb ? setTimeout(function() {
                    ic()
                }, 10) : Y || (32 == a.keyCode ? Z && A.sendShooting(!0) : 188 != a.keyCode && 49 != a.keyCode && (222 == a.keyCode ? bool_drawUI = !bool_drawUI : 51 == a.keyCode ? (bool_drawGradient = !bool_drawGradient,
                console.log("Toggled Gradient to " + bool_drawGradient)) : 52 == a.keyCode ? (ob = !ob,
                console.log("Toggled drawClouds to " + ob)) : 53 == a.keyCode ? (bool_drawWater = !bool_drawWater,
                console.log("Toggled drawWater to " + bool_drawWater)) : 54 == a.keyCode ? (bool_drawExplosions = !bool_drawExplosions,
                console.log("Toggled drawExplosions to " + bool_drawExplosions)) : 55 == a.keyCode ? (bool_drawSun = !bool_drawSun,
                console.log("Toggled drawSun to " + bool_drawSun)) : 56 == a.keyCode ? (bool_drawItems = !bool_drawItems,
                console.log("Toggled drawItems to " + bool_drawItems)) : 57 == a.keyCode ? (bool_drawTrails = !bool_drawTrails,
                console.log("Toggled drawTrails to " + bool_drawTrails)) : 48 == a.keyCode ? (bool_drawSplashes = !bool_drawSplashes,
                console.log("Toggled drawSplashes to " + bool_drawSplashes)) : 27 == a.keyCode ? (Bb(),
                da = .05 * N,
                $("#overlay").show(),
                hc(),
                Y = !0,
                Z || (ka = 1,
                v = null)) : 70 == a.keyCode && (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement ? document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen ? document.msExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen() : document.documentElement.requestFullscreen ? document.documentElement.requestFullscreen() : document.documentElement.msRequestFullscreen ? document.documentElement.msRequestFullscreen() : document.documentElement.mozRequestFullScreen ? document.documentElement.mozRequestFullScreen() : document.documentElement.webkitRequestFullscreen && document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),
                F.clearTip())))
            };
            b.keyup = function(a) {
                Y || 32 != a.keyCode || (Z ? A.sendShooting(!1) : (1 == ka ? (ka = 0,
                L.followTopPlayer()) : (ka = 1,
                v = null),
                u.isSpaceWars() && setTimeout(L.respawnParticles, 500)))
            };
            b.mousedown = function(a) {
                Y || (Z ? 0 == a.button && A.sendShooting(!0) : 0 == ka ? 0 == a.button ? L.PlayerFollowing(!0) : 2 == a.button && L.PlayerFollowing(!1) : (e = !0,
                f = a.clientX,
                d = a.clientY))
            };
            b.mouseup = function(a) {
                Y || (Z ? 0 == a.button && A.sendShooting(!1) : e = !1)
            };
            b.mousemove = function(a) {
                if (!Y && (b.mouseMoved = !0,
                qc = a.clientX,
                rc = a.clientY,
                e)) {
                    let c = a.clientY - d
                      , g = z.x - (a.clientX - f)
                      , h = document.y - c;
                    h < -E / 2 ? h = -E / 2 : h > E / 2 && (h = E / 2);
                    g < -$_sub ? g = -$_sub : g > $_sub && (g = $_sub);
                    z.setPosition(g, h);
                    f = a.clientX;
                    d = a.clientY
                }
            };
            this.addListeners = function() {
                document.addEventListener("mousedown", b.mousedown, !1);
                document.addEventListener("mousemove", b.mousemove, !1);
                document.addEventListener("mouseup", b.mouseup, !1);
                document.addEventListener("keydown", b.keydown, !1);
                document.addEventListener("keyup", b.keyup, !1)
            }
        }
          , Class_ParticleImpacts = function() {
            let b = [];
            this.draw = function(e) {
                let f, d, a, c, g, h, q, n, k, m, l, y, r, p;
                for (    f = [], d = 0; d < b.length; d++) {
                        a = b[d];
                    if (void 0 == B[a.id])
                        f.push(a);
                    else if (a.weapon == Qa) {
                        e.lineWidth = 2 + 5 * (1 - a.a);
                        e.beginPath();
                            c = parseInt(255 * a.a)
                          , g = e.createLinearGradient(a.hitPosition.x, a.hitPosition.y, a.origPosition.x, a.origPosition.y);
                        0 > a.a && (a.a = 0);
                            h = 255;
                        1 == a.special ? (h = 0,
                        c = parseInt(.4 * c)) : 2 == a.special && (h = 200,
                        c = parseInt(.1 * c));
                        g.addColorStop(0, "rgba(255," + h + "," + c + "," + a.a + ")");
                        g.addColorStop(a.a, "rgba(255," + h + "," + c + "," + a.a + ")");
                        g.addColorStop(1, "rgba(255," + h + "," + c + ",0.0)");
                        e.strokeStyle = g;
                        e.moveTo(a.origPosition.x, a.origPosition.y);
                        e.lineTo(a.hitPosition.x, a.hitPosition.y);
                        e.stroke();
                            g = (a.hitPosition.x - a.origPosition.x) / 100
                          , h = (a.hitPosition.y - a.origPosition.y) / 100
                          , q = a.angle
                          , n = a.origPosition.x
                          , k = a.origPosition.y
                          , m = 0;
                        e.beginPath();
                        e.lineWidth = 2 == a.special ? 10 : 4;
                            l = 5;
                        a.special && (l = 8);
                        for (c = 0; 100 > c; c++) {
                                m = m + Math.PI / 4
                              , n = Math.sin(m - 4 * a.a) * (6 + (1 - a.a) * l)
                              , y = n * Math.cos(q)
                              , r = n * Math.sin(q)
                              , n = a.origPosition.x + g * c
                              , k = a.origPosition.y + h * c;
                            0 == c ? e.moveTo(n + y, k + r) : e.lineTo(n + y, k + r)
                        }
                        e.stroke();
                        a.a -= .04;
                        0 > a.a && f.push(a)
                    } else if (u.isSpaceWars())
                        c = 45,
                        a.isKing && (c = 90),
                        g = a.curPosition.x,
                        h = a.curPosition.y,
                        q = a.curPosition.x - a.origPosition.x,
                        m = a.curPosition.y - a.origPosition.y,
                        q = Math.sqrt(q * q + m * m),
                        q > c ? (q = a.curPosition.x - a.direction.x * c,
                        m = a.curPosition.y - a.direction.y * c) : (q = a.origPosition.x,
                        m = a.origPosition.y),
                        a.isKing ? (e.shadowColor = "green",
                        e.lineWidth = 9,
                        e.strokeStyle = "rgba(50,255,50,0.7)",
                        e.beginPath(),
                        e.moveTo(g, h),
                        e.lineTo(q, m),
                        e.stroke(),
                        e.lineWidth = 4,
                        e.strokeStyle = "rgba(150,255,150,1.0)") : a.weapon != $a ? (e.shadowColor = "red",
                        e.lineWidth = 7,
                        e.strokeStyle = "rgba(255,50,50,1.0)",
                        e.beginPath(),
                        e.moveTo(g, h),
                        e.lineTo(q, m),
                        e.stroke(),
                        e.lineWidth = 3,
                        e.strokeStyle = "rgba(255,150,150,1.0)") : (e.shadowColor = "red",
                        e.lineWidth = 7,
                        e.strokeStyle = "rgba(255,126,39,1.0)",
                        e.beginPath(),
                        e.moveTo(g, h),
                        e.lineTo(q, m),
                        e.stroke(),
                        e.lineWidth = 3,
                        e.strokeStyle = "rgba(255,255,255,1.0)"),
                        e.beginPath(),
                        e.moveTo(g, h),
                        e.lineTo(q, m),
                        e.stroke(),
                        a.finish ? f.push(a) : (c = a.curPosition.x - a.hitPosition.x,
                        g = a.curPosition.y - a.hitPosition.y,
                        c = Math.sqrt(c * c + g * g),
                        a.a -= .05,
                        g = 70 + 10 * Math.random(),
                        c < g ? (a.finish = !0,
                        a.curPosition.x = a.hitPosition.x,
                        a.curPosition.y = a.hitPosition.y) : (a.curPosition.x += a.direction.x * g,
                        a.curPosition.y += a.direction.y * g));
                    else {
                        e.lineWidth = 3;
                        e.beginPath();
                        c = 140;
                        g = a.curPosition.x;
                        h = a.curPosition.y;
                        q = a.curPosition.x - a.origPosition.x;
                        m = a.curPosition.y - a.origPosition.y;
                        q = Math.sqrt(q * q + m * m);
                        q > c ? (q = a.curPosition.x - a.direction.x * c,
                        m = a.curPosition.y - a.direction.y * c) : (q = a.origPosition.x,
                        m = a.origPosition.y);
                            c = e
                          , n = r = y = l = void 0
                          , n = q - g
                          , r = m - h
                          , p = g + .05 * n
                          , k = h + .05 * r
                          , l = Math.sqrt(n * n + r * r)
                          , n = n / l
                          , r = r / l
                          , n = 3 * n
                          , r = 3 * r
                          , l = p + -r
                          , y = k + n
                          , r = p - -r
                          , n = k - n;
                        c.moveTo(g, h);
                        c.lineTo(l, y);
                        c.lineTo(q, m);
                        c.lineTo(r, n);
                        e.fillStyle = "rgba(255,255,255," + a.a + ")";
                        e.fill();
                        a.finish ? f.push(a) : (c = a.curPosition.x - a.hitPosition.x,
                        g = a.curPosition.y - a.hitPosition.y,
                        c = Math.sqrt(c * c + g * g),
                        a.a -= .05,
                        g = 100,
                        c < g ? (a.finish = !0,
                        a.curPosition.x = a.hitPosition.x,
                        a.curPosition.y = a.hitPosition.y) : (a.curPosition.x += a.direction.x * g,
                        a.curPosition.y += a.direction.y * g))
                    }
                }
                for (c = 0; c < f.length; c++)
                    e = b.indexOf(f[c]),
                    b.splice(e, 1);
                f.length = 0
            };
            this.addShot = function(e, f, d, a) {
                if (la() && xa) {
                    let c = B[e];
                    if (c) {
                        let g = {};
                        g.id = e;
                        g.angle = c.angle;
                        g.isKing = qa == e;
                        g.hitPosition = {
                            x: 10 * f,
                            y: 10 * d
                        };
                        g.special = 0;
                        u.isInstagib() ? g.special = 1 : u.isSpaceWars() && (g.special = 2);
                        g.a = 1;
                        g.weapon = a;
                        f = fb(0, -10, c.angle);
                        e = c.x + f.x;
                        d = c.y + f.y;
                        g.origPosition = {
                            x: e,
                            y: d
                        };
                        c = g.hitPosition.x - e;
                        f = g.hitPosition.y - d;
                        a != za && (a = Math.sqrt(c * c + f * f),
                        g.direction = {
                            x: c / a,
                            y: f / a
                        },
                        g.curPosition = {
                            x: e,
                            y: d
                        },
                        g.finish = !1,
                        (aa(e, d, 100) || aa(g.hitPosition.x, g.hitPosition.y, 100)) && b.push(g));
                        a = E / 2;
                        g.hitPosition.y > a && (e = f / c,
                        oa.addSplash((a - (g.hitPosition.y - e * g.hitPosition.x)) / e, a + 6, 1, !1))
                    }
                }
            };
            this.addMissileImpact = function(b, f) {
                let d = 10 * b
                  , a = 10 * f;
                if (aa(d, a, 100) && la()) {
                    let c = X.createAnimation("explosion");
                    c.setScale(1);
                    c.posX = 10 * b;
                    c.posY = 10 * f;
                    X.runAnimationBehind(c);
                    d = 1 - va(d, a, H.x, H.y) / Ra;
                    J.playSound(Qc, d, 1, Sa, null)
                }
            };
            this.addSplash = function(b, f, d, a) {
                if (bool_drawSplashes && !u.isSpaceWars() && aa(b, f, 100) && la()) {
                    let c = X.createAnimation("splash")
                      , g = X.createAnimation("splashReflex");
                    c.setScale(d);
                    a && (c.scaleX *= 1.2 + .4 * Math.random());
                    c.posX = b;
                    c.posY = f - 61 * c.scaleY / 2;
                    X.runAnimation(c);
                    g.scaleX = c.scaleX;
                    g.posX = c.posX;
                    g.posY = c.posY + 77;
                    g.scaleY = -2;
                    X.runAnimationLayer2(g)
                }
            }
        }
          , Class_UI_GameInfo = function() {
            let b
              , e
              , f
              , d = 0
              , a = !0
              , c
              , g
              , h
              , q
              , n = new Class_UI_KillStatus
              , k
              , m
              , l
              , y
              , r
              , K
              , pa
              , s
              , w
              , z = -1
              , ta = !1
              , F
              , C
              , P
              , R
              , S
              , O
              , Vb
              , ea = 1
              , Ga = 0
              , D = new Class_UI_ActivityMessages
              , Fa
              , ua
              , E
              , I = 0
              , Ta
              , Ha
              , Ia
              , H = 0
              , ab
              , L
              , X = -1
              , U = !1
              , V = 0
              , Q
              , W
              , $_sub
              , M
              , N
              , da
              , aa = null
              , ja = null
              , ca
              , fa
              , ia
              , ha
              , wa
              , na = 0
              , oa = 0
              , va = null
              , la
              , ma
              , ya
              , sa;
            this.draw = function(I) {
                let r, K, P, O, R, S;
                if (ta) {
                    C = document.createElement("canvas");
                    r = C.getContext("2d");
                    this.renderLeaderboard(r, C)
                }
                if (0 < na)
                    this.DrawWinnerLabel(I);
                else if (0 < oa)
                    this.DrawWarshipDestroyedLabel(I);
                else {
                    C && 0 < Gb && (!Y || Aa) && this.drawLeaderboard(I);
                    if (v && !Y) {
                        I.save();
                        G ? I.scale(1.5 * t, 1.5 * t) : I.scale(t, t);
                        K = p.frames.indicator;
                        I.translate(K.width / 2 + 6, K.height / 2 + 6);
                        K.draw(I);
                        this.DrawCurrentWeaponIcon(I, v.weapon);
                            r = 19
                          , P = 0;
                        G && (r = 24,
                        P = -5);
                        null == pa && (pa = new Class_StrokeStyle(r,"#FFFFFF"));
                        R = u.isInstagib();
                        if (z != v.GetAmmo() || null == s) {
                            S = "\u221e";
                            R || (z = v.GetAmmo(),
                            -1 < z && (S = z));
                            pa.setValue(S);
                            s = pa.render();
                            w = s.width
                        }
                        I.globalAlpha = 1;
                        I.drawImage(s, .57 * -w, .19 * K.height + r / 2 + P);
                        I.restore();
                        this.DrawScore(I)
                    }
                    if (0 < d) {
                        K = 0;
                        r = +new Date - d;
                        4E3 > r ? K = 3E3 > r ? 1 : 1 - (r - 3E3) / 1E3 : d = 0;
                        h || (P = 20,
                        G && (P = 30),
                        r = !1,
                        f ? (r = 40,
                        G && (r = 50),
                        q = new Class_TextStyle(r * t,"#FF0000","#990000"),
                        q.setValue(f),
                        q.setUsingFrame(!0),
                        r = !0,
                        G ? q.setAddTop(35) : q.setAddTop(25)) : (q = null,
                        P = G ? 45 : 35),
                        h = new Class_TextStyle(P * t,"#FF0000","#990000"),
                        h.setValue(e),
                        h.setUsingFrame(!r));
                        P = .25 * canvas.height;
                        a ? (h.setColor("#00ea11"),
                        h.setSecondColor("#006b08"),
                        q && (q.setColor("#00ea11"),
                        q.setSecondColor("#006b08"))) : (h.setColor("#ff0608"),
                        h.setSecondColor("#a20400"),
                        q && (q.setColor("#ff0608"),
                        q.setSecondColor("#a20400")));
                        r = h.render(), O;
                        f && (O = q.render());
                        I.globalAlpha = K;
                        O && I.drawImage(O, .5 * canvas.width - O.width / 2, P - 5);
                        I.drawImage(r, .5 * canvas.width - r.width / 2, P);
                        I.globalAlpha = 1
                    }
                    k && (P = .6 * canvas.height,
                    K = m / 1E3 * 10,
                    1 < K && (K = 1),
                    g || (r = 30,
                    G && (r = 40),
                    g = new Class_TextStyle(r * t,"#FF0000","#990000")),
                    g.setValue(k),
                    g.setUsingFrame(!0),
                    r = g.render(),
                    O = .1 * Math.sin(m / 100) * t,
                    I.save(),
                    I.translate(.5 * canvas.width, P),
                    I.scale(1 + O, 1 + O),
                    I.translate(-r.width / 2, 0),
                    I.globalAlpha = K,
                    I.drawImage(r, 0, 0),
                    I.restore());
                    l && (P = .397 * canvas.height,
                    K = 1,
                    y || (r = 20,
                    G && (r = 30),
                    y = new Class_TextStyle(r * t,"#FF0000","#990000")),
                    y.setValue(l),
                    y.setUsingFrame(!1),
                    r = y.render(),
                    I.save(),
                    I.translate(.5 * canvas.width, P),
                    I.scale(.8, .8),
                    I.translate(-r.width / 2, 0),
                    I.globalAlpha = K,
                    I.drawImage(r, 0, 0),
                    I.restore());
                    A.hasConnection && xa && (u.waiting && !G ? this.DrawWarmupTime(I) : u.isInEvent() ? this.DrawEventLabel(I) : La && !Y && this.DrawLaserDeployed(I));
                    null == k && n.shouldDraw() && (I.save(),
                    I.translate(.5 * canvas.width, .67 * canvas.height),
                    n.draw(I),
                    I.restore());
                    Z || Y || (O = "FREE MODE",
                    0 == ka && (O = v ? "Following " + ga(v.name) : "FOLLOW MODE"),
                    c || (c = new Class_TextStyle(30 * t,"#ffd118","#b56006")),
                    c.setValue(O),
                    c.setUsingFrame(!0),
                    r = c.render(),
                    I.globalAlpha = 1,
                    P = .14 * canvas.height,
                    I.drawImage(r, .5 * canvas.width - r.width / 2, P));
                    Ta && (4E3 > H ? (null == Ia && (r = 20,
                    G && (r = 30),
                    Ha = new Class_StrokeStyle(r * t,"#ffd118",!0,"#633504"),
                    Ha.setValue(Ta),
                    Ha.setStrokeWidth(5),
                    Ha.setRoundedFrameOpacity(.5),
                    Ha.setHMargin(5),
                    Ha.setUsingRoundedFrame(!0),
                    Ia = Ha.render()),
                    O = 1,
                    300 > H ? (O = H / 300,
                    O = Math.sqrt(O, 10)) : 3700 < H && (O = 1 - (H - 3700) / 300,
                    O = Math.sqrt(O, 10)),
                    I.drawImage(Ia, Ka / 2 - Ia.width / 2, 1.1 * Ia.height * O - Ia.height)) : Ta = null);
                    Y || G || D.draw(I);
                    !Y && 0 < qa && this.DrawKing(I);
                    ta && (ta = !1);
                    b != t && (c = g = null,
                    b = t)
                }
            };
            this.DrawKing = function(a) {
                if (F && 0 < F.length && 0 < Object.keys(B).length) {
                    let c = B[F[0]], d;
                    if (c) {
                        d = ga(c.name);
                        v && I != c.id && c.id == v.id && J.playSound(Tc, 1, 1, 1, null);
                        I = c.id;
                        d != Fa && (c = 25,
                        G && (c = 35),
                        ua = new Class_TextStyle(c * t,"#fe9b00","#6e3800"),
                        c = " ",
                        Ba || (c = ""),
                        G && (c = "  "),
                        ua.setValue(c + "  King: " + d),
                        ua.setUsingRoundedFrame(!0));
                        Fa = d;
                        E = ua.render()
                    }
                    ua && (a.save(),
                    d = .83 * canvas.height,
                    a.drawImage(E, .5 * canvas.width - E.width / 2, d),
                    c = 20,
                    Ba || (c = 13),
                    a.translate(.5 * canvas.width - E.width / 2 + c, d + E.height / 2 - 2 * t),
                    d = 1,
                    G && (d = 1.5),
                    a.scale(t * d, t * d),
                    p.frames.crown.draw(a),
                    a.restore())
                }
            };
            this.DrawLaserDeployed = function(a) {
                a.save();
                let c, d;
                if (Ma != X) {
                    X = Ma;
                    c = 25;
                    G && (c = 35);
                    L = new Class_TextStyle(c * t,"#fbc521","#c78109");
                    Ma ? L.setValue("     Super Weapon: " + Ma) : L.setValue("     Find The Super Weapon!");
                    L.setUsingRoundedFrame(!0);
                    ab = L.render()
                }
                c = .05 * canvas.height;
                a.drawImage(ab, .5 * canvas.width - ab.width / 2, c);
                d = 30;
                Ba || (d = 20);
                a.translate(.5 * canvas.width - ab.width / 2 + d, c + ab.height / 2);
                a.scale(t, t);
                p.frames.laser.draw(a);
                a.restore()
            };
            this.DrawRank = function(a) {
                0 < v.rank && (void 0 == rankCanvas && (rankCanvas = document.createElement("canvas"),
                rankCanvas.width = 200,
                rankCanvas.height = 200,
                rankCanvasContext = rankCanvas.getContext("2d")),
                lastRankNumber != v.rank && (rankCanvasContext.clearRect(0, 0, 200, 200),
                rankCanvasContext.globalAlpha = .3,
                rankCanvasContext.fillStyle = "rgba(0,0,0,1.0)",
                Ea(rankCanvasContext, 0, 0, 200, 200, 30 * t),
                ca = new Class_StrokeStyle(15 * t,"#EEEEEE"),
                ca.setValue(v.rank),
                ca.setUsingRoundedFrame(!1),
                fa = ca.render(),
                lastRankNumber = v.rank),
                a.drawImage(rankCanvas, Ka - 200, ib - 200))
            };
            this.DrawScore = function(a) {
                if (0 < v.rank) {
                    let c = 16 * t
                      , d = "Arial Black";
                    G && (c = 36 * t,
                    d = "Arial-BoldMT");
                    let b = P * t
                      , g = b
                      , h = 30 * t
                      , e = 5 * t
                      , k = 10 * t
                      , n = Ka - b - 5
                      , f = S + 5 + 5;
                    G && (h = 60 * t,
                    g = b);
                    void 0 == r && (r = document.createElement("canvas"),
                    K = r.getContext("2d"));
                    if (-1 != v.score)
                        for (r.width = g,
                        r.height = h,
                        K.font = c + "px 'proxima-nova-1','proxima-nova-2', " + d,
                        K.globalAlpha = .3,
                        K.textBaseline = "hanging",
                        Ea(K, 0, 0, b, h, 30 * t),
                        K.globalAlpha = 1,
                        c = 2; 0 <= c; c--)
                            d = 0,
                            0 != c ? (K.fillStyle = "rgba(100,49,0,1.0)",
                            d = c) : K.fillStyle = "rgba(255,156,0,1.0)",
                            K.fillText(v.rank + ". You ", e, k + d),
                            g = K.measureText(v.score).width,
                            K.fillText(v.score, b - e - g, k + d);
                    a.drawImage(r, n, f + 5)
                }
            };
            this.DrawWarmupTime = function(a) {
                if (U) {
                    U = !1;
                    let c = u.endTime - T;
                    if (0 > parseInt(c))
                        return;
                    W = new Class_TextStyle(23 * t,u.getEventColor(),"#6e3800");
                    W.setValue(u.getEventName());
                    N = W.render();
                    $_sub = new Class_TextStyle(20 * t,"#fe9b00","#6e3800");
                    $_sub.setValue("STARTS IN");
                    da = $_sub.render();
                    Q = new Class_TextStyle(27 * t,"#fe9b00","#6e3800");
                    Q.setValue(oc(c));
                    M = Q.render()
                }
                if (M) {
                    let c = .8 * canvas.height, d;
                        d = N.width
                      , d = da.width > d ? da.width : d
                      , d = M.width > d ? M.width : d;
                    a.fillStyle = "#000000";
                    a.globalAlpha = .3;
                    Ea(a, canvas.width - d - 20, c, d, 102, 20);
                    a.globalAlpha = 1;
                    a.drawImage(N, canvas.width - d - 20, c);
                    a.drawImage(da, canvas.width - d / 2 - da.width / 2 - 20, c + 36);
                    a.drawImage(M, canvas.width - d / 2 - M.width / 2 - 20, c + 60)
                }
            };
            this.DrawEventLabel = function(a) {
                if (U) {
                    U = !1;
                    let c = u.endTime - T;
                    0 > parseInt(c) && (c = 0);
                    W = new Class_TextStyle(25 * t,u.getEventColor(),"#6e3800");
                    W.setValue(u.getEventName());
                    N = W.render();
                    Q = new Class_TextStyle(25 * t,"#fe9b00","#6e3800");
                    u.isWarship() ? 0 < u.warshipsLeft ? Q.setValue("Warships Left: " + u.warshipsLeft) : 0 == u.warshipsEscaped ? Q.setValue("All Warships Destroyed!") : Q.setValue(u.warshipsDestroyed + " Destroyed, " + u.warshipsEscaped + " Escaped!") : Q.setValue(oc(c));
                    M = Q.render()
                }
                if (M) {
                    let c = .04 * canvas.height
                      , d = M.width < N.width ? N.width : M.width;
                    a.fillStyle = "#000000";
                    a.globalAlpha = .3;
                    Ea(a, canvas.width / 2 - d / 2, c, d, 69, 20);
                    a.globalAlpha = 1;
                    a.drawImage(N, canvas.width / 2 - N.width / 2, c);
                    a.drawImage(M, canvas.width / 2 - M.width / 2, c + 30)
                }
            };
            this.DrawWinnerLabel = function(a) {
                !ia && aa && (ia = new Class_TextStyle(55 * t,"#fe6800","#6e3800"),
                ia.setValue("WINNER"),
                ha = ia.render(),
                wa = new Class_TextStyle(45 * t,"#fe9b00","#6e3800"),
                wa.setValue(aa),
                renderedWinnerNameCachedText = wa.render());
                if (ha) {
                    let c = .13 * canvas.height
                      , d = ha.width > renderedWinnerNameCachedText.width ? ha.width : renderedWinnerNameCachedText.width;
                    a.fillStyle = "#000000";
                    a.globalAlpha = .3;
                    Ea(a, canvas.width / 2 - d / 2, c, d, 140, 20);
                    a.globalAlpha = 1;
                    a.drawImage(ha, canvas.width / 2 - ha.width / 2, c);
                    a.drawImage(renderedWinnerNameCachedText, canvas.width / 2 - renderedWinnerNameCachedText.width / 2, c + 70)
                }
            };
            this.DrawWarshipDestroyedLabel = function(a) {
                la || (la = new Class_TextStyle(45 * t,"#fe6800","#6e3800"),
                null == va ? la.setValue("WARSHIP") : la.setValue(va),
                ma = la.render(),
                ya = new Class_TextStyle(35 * t,"#fe9b00","#6e3800"),
                null == va ? ya.setValue("ESCAPED!") : ya.setValue("DESTROYED A WARSHIP!"),
                sa = ya.render());
                if (ma) {
                    let c = .13 * canvas.height
                      , d = ma.width > sa.width ? ma.width : sa.width;
                    a.fillStyle = "#000000";
                    a.globalAlpha = .3;
                    Ea(a, canvas.width / 2 - d / 2, c, d, 114, 20);
                    a.globalAlpha = 1;
                    a.drawImage(ma, canvas.width / 2 - ma.width / 2, c);
                    a.drawImage(sa, canvas.width / 2 - sa.width / 2, c + 60)
                }
            };
            this.DrawLastEventWinner = function(a) {
                null != aa && aa != ja && (ca = new Class_StrokeStyle(15 * t,"#EEEEEE"),
                ca.setFont("px 'proxima-nova-1','proxima-nova-2', Arial Black"),
                ca.setValue("Last Event Winner: " + ga(aa) + " "),
                ca.setUsingRoundedFrame(!0),
                ja = aa,
                fa = ca.render());
                if (fa) {
                    let c = 10 * t;
                    a.drawImage(fa, canvas.width - fa.width - c, canvas.height - fa.height - c)
                }
            };
            this.DrawCurrentWeaponIcon = function(a, c) {
                Vb != c && (Vb = c,
                Ga = 1);
                1 == Ga ? (ea -= .15,
                0 >= ea && (O = Vb,
                ea = 0,
                Ga = 2)) : 2 == Ga && (ea += .15,
                1 <= ea && (ea = 1,
                Ga = 0));
                let d = 0, b = 0, g = 0, h, e = !0;
                switch (O) {
                case Ua:
                    d = 254;
                    b = 69;
                    g = 31;
                    h = p.frames.iconRocket;
                    break;
                case Ja:
                    d = 112;
                    b = 130;
                    g = 144;
                    h = p.frames.iconMachinegun;
                    break;
                case $a:
                    d = 243;
                    b = 150;
                    g = 40;
                    h = p.frames.iconTrishoot;
                    break;
                case Qa:
                    d = 40;
                    b = 179;
                    g = 243;
                    h = p.frames.iconRailgun;
                    break;
                case bb:
                    d = 181;
                    b = 25;
                    g = 255;
                    h = p.frames.iconMelee;
                    break;
                case cb:
                    g = b = d = 127;
                    h = p.frames.iconBombdrop;
                    break;
                case za:
                    h = p.frames.iconLaserFull;
                    e = !1;
                    break;
                default:
                    return
                }
                a.save();
                let k = Math.sqrt(ea);
                a.translate(0, -16);
                a.scale(k, k);
                a.translate(0, 16);
                a.lineWidth = 3;
                e && (a.beginPath(),
                a.arc(-1, -11, 34, 0, 2 * Math.PI),
                a.closePath(),
                a.fillStyle = "rgba(0,0,0,0.4)",
                a.fill(),
                a.beginPath(),
                a.arc(-1, -17, 34, 0, 2 * Math.PI),
                a.closePath(),
                a.strokeStyle = "rgba(255,255,255,1.0)",
                a.fillStyle = "rgba(" + d + "," + b + "," + g + ",1.0)",
                a.fill(),
                a.stroke());
                a.translate(-1, -16);
                h.draw(a);
                a.restore()
            };
            this.update = function(a) {
                m += a;
                H += a;
                D.update(a);
                n.update(a);
                V -= a;
                0 > V && (V += 1E3,
                U = !0);
                0 < na && (na -= a);
                0 < oa && (oa -= a)
            };
            this.renderLeaderboard = function(a, c) {
                P = 270;
                S = 0;
                let d = 5 * t, b = 10 * t, g = 23 * t, h = 18 * t, e, k = 60 * t, n = 5 * t, f = 32, q = "Arial Black", I = 0, l, r, y, m;
                G && (f = 42,
                P = 300,
                g = 33 * t,
                h = 28 * t,
                q = "Arial-BoldMT");
                e = S += d + g + d;
                m = F.length;
                G && (m = 5);
                10 < m && (m = 10);
                for (l = 0; l < m; l++) {
                    r = B[F[l]];
                    r && (S += h + b,
                    r = a.measureText(ga(r.name)).width,
                    I < r && (I = r))
                }
                S -= b;
                I > k && (P += I - k);
                R = P * t;
                S += d;
                S += n;
                c.width = R;
                c.height = S;
                k = h + "px 'proxima-nova-1','proxima-nova-2', " + q;
                a.fillStyle = "rgba(0,0,0,0.3)";
                Ea(a, 0, 0, R, S, 30 * t);
                a.fillStyle = "rgba(204,84,0,1.0)";
                pc(a, 0, 2, R, f * t, 30 * t);
                a.fillStyle = "rgba(254,102,3,1.0)";
                pc(a, 0, 0, R, f * t, 30 * t);
                l = "LEADERBOARD";
                u.isInstagib() && (l = "KILLS");
                a.font = g + "px 'proxima-nova-1','proxima-nova-2', " + q;
                a.textBaseline = "hanging";
                r = a.measureText(l).width;
                a.fillStyle = "rgba(255,255,0,0.5)";
                a.fillText(l, R / 2 - r / 2, d + 1);
                a.fillStyle = "rgba(178,32,0,1.0)";
                a.fillText(l, R / 2 - r / 2, d);
                a.font = k;
                e += n;
                for (l = 0; l < m; l++)
                    if (r = B[F[l]]) {
                        for (n = 2; 0 <= n; n--) {
                            g = ". ";
                            r.inGame && r.id != qa || (g = ".     ");
                            q = l + 1 + g + ga(r.name);
                            g = 0;
                            0 != n ? (a.fillStyle = "rgba(100,49,0,1.0)",
                            g = n) : a.fillStyle = ra == r.id ? "rgba(255,156,0,1.0)" : "rgba(255,220,0,1.0)";
                            a.font = k;
                            a.measureText(q);
                            a.fillText(q, d, e + g);
                            q = a.measureText(r.score).width;
                            f = 1;
                            I = 0;
                            G && (I = -6,
                            f = 1.5);
                            if (r.inGame)
                                r.id == qa && (a.save(),
                                y = 38,
                                9 == l && (y = 50),
                                a.translate(y * t * f + I, e + g + 7 * t * f),
                                a.scale(t * f, t * f),
                                p.frames.crown.draw(a),
                                a.restore());
                            else {
                                a.save();
                                y = 38;
                                9 == l && (y = 50);
                                a.translate(y * t * f + I, e + g + 7 * t * f);
                                a.scale(t * f, t * f);
                                p.frames.skull.draw(a);
                                a.restore()
                            }
                            a.fillText(r.score, R - d - q, e + g)
                        }
                        e += h + b
                    }
            };
            this.drawLeaderboard = function(a) {
                a.drawImage(C, Ka - R - 5, 5)
            };
            this.addActivityMessage = function(a) {
                G || D.addActivityMessage(a)
            };
            this.addMessage = function(c, b, g) {
                e = c;
                h = null;
                f = g;
                d = +new Date;
                a = b
            };
            this.showTip = function(a) {
                G || (Ta && this.clearTip(),
                Ta = a,
                H = 0,
                Ia = null)
            };
            this.clearTip = function() {
                Ta = null
            };
            this.showTargetLockedMessage = function() {
                l || (l = "[ LOCKED ]")
            };
            this.clearTargetLockedMessage = function() {
                l = null
            };
            this.showWarningMessage = function(a) {
                k = a;
                m = 0
            };
            this.clearWarningMessage = function() {
                k = null
            };
            this.refreshLeaderboard = function(a) {
                F = a;
                ta = !0
            };
            this.addBonus = function(a, c) {
                n.push(a, c)
            };
            this.clearBonusDisplay = function() {
                n.clear()
            };
            this.clearNearMiss = function() {
                n.clearNearMiss()
            };
            this.setLastWinner = function(a, c) {
                aa = ga(a);
                console.log("Last Event Winner: " + a);
                c && (ia = null,
                na = 6E3)
            };
            this.setWarshipRemoved = function(a) {
                va = a;
                oa = 5E3;
                la = null
            };
        }
          , Class_UI_ActivityMessages = function() {
            let b = []
              , e = [];
            this.update = function(f) {
                0 < e.length && 15E3 < T - e[0] && (b.shift(),
                e.shift())
            };
            this.draw = function(e) {
                e.globalAlpha = 1;
                let d = canvas.height - 180 * t, a;
                for (a in b)
                    e.drawImage(b[a], 25, d + 26 * t + 5 + 14 * a * t + 15 * a * t)
            };
            this.addActivityMessage = function(f) {
                let d = new Class_StrokeStyle(14 * t,"#EEEEEE");
                d.setFont("px 'proxima-nova-1','proxima-nova-2', Arial Black");
                d.setValue("\u2022 " + f);
                d.setUsingRoundedFrame(!0);
                d.setHMargin(10);
                d.setVMargin(4);
                f = d.render();
                b.push(f);
                e.push(+new Date);
                5 < b.length && (b.shift(),
                e.shift());
                f = 0;
                for (let a in b)
                    d = b[a].width + 5 + 5,
                    d > f && (f = d)
            }
        }
          , Class_Plane = function() {
            let b = this
              , num_spawn_cooldown_ms = 0
              , f = 100
              , d = !1
              , a = new Class_ParticleTrails
              , c
              , g
              , h = 0
              , q = this.laserFrame = this.laserTimer = 0
              , n
              , k = 0
              , m = 0
              , l = 1
              , y = 0
              , r = [1, 2, 3, 4, 5, 6, 7, 8, 7, 6, 5, 4, 3, 2, 1]
              , K
              , pa = !1
              , s = 0
              , w = 0
              , t = 0
              , x = 0
              , z = 0
              , C = 0
              , P = 1
              , R = 0
              , S = 0
              , O = !1
              , G = !0
              , ea = !1
              , Ga = 0
              , D = 0
              , Fa = 0
              , ua = null
              , M = {
                    1: "rgba(255, 255, 255, 0.6)",
                    2: "rgba(255, 156, 0, 1.0)",
                    4: "rgba(255, 43, 0, 1.0)",
                    8: "rgba(0, 140, 255, 1.0)",
                    16: "rgba(255, 255, 0, 1.0)",
                    128: "rgba(255, 0, 255, 1.0)",
                    256: "rgba(137, 137, 137, 1.0)"
                };
            this.lastUpdate = this.highlightValue = 0;
            this.id = -1;
            this.dstY = this.dstX = this.origY = this.origX = this.prevY = this.prevX = this.y = this.x = 0;
            this.energy = 255;
            this.inGame = !0;
            this.updateBool = !1;
            this.momentum = this.speed = this.colorHue = 0;
            this.maxMomentum = 8;
            this.dstAngle = this.origAngle = this.angle = 0;
            this.controlAngle = -90;
            this.rotSpeed = 4;
            this.directionX = 0;
            this.directionY = -1;
            this.targetY = this.targetX = 0;
            this.targetMomentum = this.maxMomentum;
            this.name = "";
            this.first_set = !0;
            this.rank = -1;
            this.score = 0;
            this.frameSwitchTime = 40;
            this.timeToNextFrame = 0;
            this.flameState = 1;
            this.lastImage;
            this.lastImageReflex;
            this.flipLastImage = 1;
            this.planeImages = p.planeFrames;
            this.planeImagesReflex = p.planeFramesReflex;
            this.decalFrames;
            this.decalID = this.colorID = 0;
            this.isShooting = this.isBot = this.hadHover = this.hover = !1;
            a.fixedColor = !0;
            this.weapon = Ja;
            this.ammo = -1;
            this.update = function(b) {
                if (this.inGame) {
                    let g = 400, l;
                    ea && this.weapon == za && (g = 800);
                    aa(this.x, this.y, g) ? pa || (a && a.clear(),
                    c && c.clear(),
                    pa = !0) : pa = !1;
                    g = this.weapon == za && this.isShooting;
                    0 < num_spawn_cooldown_ms && (f -= b,
                    0 > f && (f = 100,
                    d = !d),
                    num_spawn_cooldown_ms -= b);
                    L.moveLeft && (this.controlAngle += this.rotSpeed);
                    L.moveRight && (this.controlAngle -= this.rotSpeed);
                    360 < this.controlAngle ? this.controlAngle = 0 : 0 > this.controlAngle && (this.controlAngle = 360);
                    let k = fa((T - this.lastUpdate) / Jb, 0, 1);
                    this.prevX = this.x;
                    this.prevY = this.y;
                    let m = k * (this.dstY - this.origY) + this.origY;
                    this.x = k * (this.dstX - this.origX) + this.origX;
                    this.y = m;
                    this.angle = k * (this.dstAngle - this.origAngle) + this.origAngle;
                    k = this.x + 12 * Math.sin(-this.angle);
                    m = this.y + 12 * Math.cos(-this.angle);
                    a && (a.setPosition(k, m),
                    u.isSpaceWars() && (a.width = .6,
                    this.id == qa && "#00FF00" != a.style && (a.style = "#00FF00")));
                    c && c.setPosition(k, m);
                    (k = !this.hover && !n && !this.isInvulnerable() && !g) ? 0 == this.hadHover && (this.hadHover = !0,
                    a.push()) : this.hadHover = !1;
                    a && (a.enabled = k,
                    a.update(b));
                    c && (c.enabled = k,
                    c.update(b));
                    k = E / 2;
                    m = k - 150;
                    if (this.y > m && this.y < k && 0 >= h) {
                        h = 5;
                        l = Math.random() / 2
                          , m = (.5 + (.5 - (k - this.y) / (k - m) * .5)) * (.95 + l)
                          , l = 20 * Math.sin(this.angle);
                        oa.addSplash(this.x - l, k + 5 * Math.random(), m, !0)
                    }
                    h -= b;
                    n && (k = this.x + 12 * Math.sin(-this.angle),
                    m = this.y + 12 * Math.cos(-this.angle),
                    n.setPosition(k, m),
                    n.update(b));
                    v == this && (hb = 0 == ha ? hb + b : 0);
                    2 != ha ? B[gb] && (w = Math.sqrt(hb / uc),
                    1 < w && (w = 1),
                    s -= b,
                    0 >= s && (0 == ha ? (s = .7 > w ? 200 + s : 80 + s,
                    J.playSound(Wb, .1, 1, Q, null)) : 1 == ha && (F.showTargetLockedMessage(),
                    s = 50 + s,
                    J.playSound(Wb, .1, 1.58, Q, null)))) : (s = 0,
                    F.clearTargetLockedMessage());
                    0 < ma ? (t -= b,
                    0 > t && (t = 100,
                    J.playSound(Wb, .1, .5, Q, null))) : t = 0;
                    this == v && (ia || J.playSound(Wc, .6, 1, Q, function(a) {
                        ia = a
                    }),
                    na || J.playSound(Xc, 0, 1, Q, function(a) {
                        na = a
                    }),
                    k = (E / 2 - this.y) / 1E3,
                    1 < k && (k = 1),
                    ia && (m = J.sound._nodeById(ia),
                    J.sound.volume(.5 * da, ia),
                    .01 > k && !u.isSpaceWars() ? m && m.bufferSource && (m.bufferSource.playbackRate.value = .1) : (l = this.speed / 30,
                    1 < l && (l = 1),
                    x += (.3 + .8 * l - x) / 30,
                    m && m.bufferSource && (m.bufferSource.playbackRate.value = x))),
                    na && (m = 0,
                    .2 > k && .01 < k && !u.isSpaceWars() && (m = 1.7 * (.2 - k)),
                    J.sound.volume(m * da, na)));
                    g ? (k = va(this.x, this.y, H.x, H.y),
                    g = 1 - k / 3E3,
                    1 < g && (g = 1),
                    .1 > g && (g = 0),
                    0 == Fa ? (J.playSound(Yc, .2 * g, .5, Q, null),
                    ua || J.playSound(Zc, .2 * g, 1, Q, function(a) {
                        nb = ua = a
                    })) : ua && J.sound.volume(.2 * g * da, ua),
                    this.laserTimer += b,
                    Fa += b) : this.stopLaserSound();
                    n && this.weapon == bb && 1 < this.ammo && (this.ammo = 1);
                    0 < q && (q -= b);
                    K && K.update(b);
                    0 < R && (R -= b)
                }
            };
            this.getCurrentFrameNum = function(a) {
                a = parseInt(g / (2 * Math.PI / 28)) + 1;
                return a = r[(a - 1) % 14]
            };
            this.draw = function(b, h) {
                if (this.inGame && pa) {
                    let e, f, K, s, v, R, w, S, O, t;
                    a && a.draw(b);
                    c && c.draw(b);
                    n || (b.save(),
                    b.translate(this.x, this.y),
                    this.timeToNextFrame -= h,
                    0 >= this.timeToNextFrame && (this.flameState = !this.flameState,
                    this.timeToNextFrame = this.frameSwitchTime),
                    this.hover && (u.isSpaceWars() ? b.scale(.5, .5) : b.scale(.8, .8)),
                    this.flameState && b.scale(.88, .88),
                    b.rotate(this.angle - Math.PI / 2),
                    b.translate(-23, 0),
                    this.isInvulnerable() && d && (b.globalAlpha = .3),
                    p.frames.throttleFlame.draw(b),
                    b.restore());
                    g = Math.abs((this.angle - Math.PI / 2) % (2 * Math.PI)) + 2 * Math.PI / 28 / 2;
                    0 < this.angle - Math.PI / 2 && (g = 2 * Math.PI - g);
                    this.flipLastImage = g > .5 * Math.PI && g < 1.5 * Math.PI ? -1 : 1;
                    if (0 < q) {
                        b.save();
                        b.translate(this.x, this.y);
                        b.scale(.8, .8 * this.flipLastImage);
                        b.rotate((this.angle - Math.PI / 2) * this.flipLastImage);
                        b.translate(-15, -4);
                        e = 1;
                        60 > q ? e = q / 60 : 240 < q && (e = (300 - q) / 60);
                        b.globalAlpha = e;
                        p.frames.punch.draw(b);
                        b.restore()
                    }
                    b.save();
                    b.translate(this.x, this.y);
                    b.scale(.7, .7);
                    b.rotate(this.angle - Math.PI / 2);
                    n ? (k -= h,
                    0 > k && (k = m,
                    y++,
                    8 == y && (l *= -1)),
                    y %= 14,
                    e = r[y]) : y = e = this.getCurrentFrameNum(b);
                    b.scale(1, this.flipLastImage * l);
                    this.lastImage = this.planeImages[e - 1];
                    void 0 == this.lastImage && (this.lastImage = this.planeImages[0]);
                    this.lastImageReflex = this.planeImagesReflex[e - 1];
                    void 0 == this.lastImageReflex && (this.lastImageReflex = this.planeImagesReflex[0]);
                    this.isInvulnerable() && d && (b.globalAlpha = .3);
                    this.lastImage.draw(b);
                    f = this.decalFrames[e - 1];
                    void 0 == f && (f = this.decalFrames[0]);
                    f.draw(b);
                    16 < this.speed ? (C += .06,
                    .9 < C && (C = .9)) : (C -= .06,
                    0 > C && (C = 0));
                    b.rotate(-Math.PI / 2);
                    b.translate(0, 8);
                    P++;
                    1 < P && (P = 0);
                    0 == P && (z += 1,
                    2 < z && (z = 0));
                    b.globalAlpha = C;
                    p.frames["turbo" + z].draw(b);
                    b.restore();
                    0 < this.highlightValue && !this.isInvulnerable() && (this.highlightValue -= .05,
                    0 > this.highlightValue && (this.highlightValue = 0),
                    b.save(),
                    b.translate(this.x, this.y - 1),
                    b.scale(.7, .7),
                    b.rotate(this.angle - Math.PI / 2),
                    b.globalAlpha = this.highlightValue,
                    e = p.whitePlaneImages["plane" + e],
                    g > .5 * Math.PI && g < 1.5 * Math.PI ? b.scale(1.2, -1.2) : b.scale(1.2, 1.2),
                    e && b.drawImage(e, -e.width / 2, -e.height / 2),
                    b.restore());
                    n && n.draw(b);
                    if (this.weapon == za) {
                        e = !1;
                        g > .5 * Math.PI && g < .5 * Math.PI + Math.PI || (e = !0);
                        if (this.isShooting) {
                            b.save();
                                K = this.x - 10 * Ga
                              , s = this.y - 10 * D
                              , f = 500;
                            ea && (f = Math.sqrt(K * K + s * s) - 10);
                            100 > f && (f = 100);
                                v = p.frames.laser_opening.height
                              , R = Fa / 50
                              , w = 1
                              , S = .75 * Math.PI
                              , K = !1;
                            R > S ? (R = R < 2 * S ? R - S : S,
                            w = Math.sin(.04 * Fa)) : K = !0;
                            b.translate(this.x, this.y);
                            b.rotate(this.angle + Math.PI);
                            e ? b.translate(2, 22) : b.translate(-2, 22);
                                O = s = Math.sin(R) / Math.sin(S)
                              , t = !0;
                            K && (R < .5 * Math.PI ? t = !1 : (R -= .5 * Math.PI,
                            O = Math.sin(R) / Math.sin(S)));
                            t && (b.scale((1 + .2 * w) * O, 1),
                            b.translate(0, v / 2),
                            p.frames.laser_opening.draw(b),
                            f -= v,
                            b.translate(0, f / 2 + v / 2 - 1),
                            b.scale(1, f),
                            p.frames.laser_stretch.draw(b),
                            b.scale(1, 1 / f),
                            b.translate(0, f / 2 - 10),
                            50 < this.laserTimer && (this.laserTimer = 0,
                            this.laserFrame = (this.laserFrame + 1) % 3),
                            ea ? p.frames["laser_collision" + this.laserFrame].draw(b) : (f = p.frames.laserfade.width,
                            b.rotate(Math.PI / 2),
                            b.translate(f / 2, 0),
                            p.frames.laserfade.draw(b)));
                            b.restore();
                            b.save();
                            b.translate(this.x, this.y);
                            b.rotate(this.angle + Math.PI);
                            e ? b.translate(2, 22) : b.translate(-2, 22);
                            K && (b.scale(s, s),
                            b.translate(0, 15),
                            b.beginPath(),
                            b.arc(0, 0, 15, 0, 2 * Math.PI),
                            b.fill());
                            b.restore()
                        }
                        b.save();
                        b.translate(this.x, this.y);
                        b.rotate(this.angle + Math.PI);
                        b.translate(-3, 18);
                        e && (b.scale(-1, 1),
                        b.translate(-6, 0));
                        b.rotate(-Math.PI / 2);
                        p.frames.laserplug.draw(b);
                        b.restore()
                    }
                }
            };
            this.drawReflection = function(a, c) {
                if (this.inGame && pa) {
                    let b = E / 2
                      , d = b - this.y;
                    if (!(0 > d || 170 < d)) {
                        let h = d / 170;
                        a.save();
                        a.translate(this.x, b + d - 25);
                        a.scale(.8, .8 * -this.flipLastImage * (1 + 4 * h));
                        g > .5 * Math.PI && g < 1.5 * Math.PI ? a.rotate(1.5 * Math.PI + (g - Math.PI / 2) + Math.PI) : a.rotate(this.angle - Math.PI / 2);
                        b = 1;
                        30 > d && 15 <= d ? b = (d - 15) / 15 : 15 > d && (b = 0);
                        a.globalAlpha = .7 * (1 - h) * b;
                        this.lastImageReflex.draw(a);
                        a.restore()
                    }
                }
            };
            this.drawInput = function(a) {
                if (this.inGame) {
                    let c = -V.angle + Math.PI
                      , b = !V.hover;
                    .01 >= b && (b = .3);
                    a.save();
                    a.translate(this.x, this.y);
                    a.rotate(c);
                    a.translate(0, -28 - 10 * b);
                    a.fillStyle = "rgba(255,255,255,0.4)";
                    a.beginPath();
                    a.moveTo(-8.8 * b, 0);
                    a.lineTo(8.8 * b, 0);
                    a.lineTo(0, -22 * b);
                    a.fill();
                    a.restore();
                    2 != ha && (c = B[gb]) && this.DrawLockCrosshair(a, c.x, c.y, w, ha);
                    0 < ma && this.DrawLockCrosshair(a, this.x, this.y, 1, 1);
                    a.lineWidth = 1;
                    a.beginPath();
                    u.isSpaceWars() ? a.strokeStyle = "rgba(255,255,255,0.3)" : a.strokeStyle = "rgba(0,0,255,0.1)";
                    a.arc(this.x, this.y, 75, 0, 2 * Math.PI);
                    a.closePath();
                    a.stroke()
                }
            };
            this.DrawLockCrosshair = function(a, c, b, d, g) {
                if (this.inGame) {
                    a.lineWidth = 4;
                    a.save();
                    let h = 1;
                    0 == ha && (h = 1 + 2 * (1 - d));
                    a.beginPath();
                    d = "hsla(43,100%," + (100 - 40 * d) + "%,1.0)";
                    1 == g ? d = "rgba(255,0,0,1.0)" : a.setLineDash([12 * h, 6 * h, 12 * h, 0]);
                    a.strokeStyle = d;
                    g = 30 * h;
                    a.rect(c - g / 2, b - g / 2, g, g);
                    a.stroke();
                    a.restore()
                }
            };
            this.drawInfo = function(a) {
                if (this.inGame && pa) {
                    let c, d;
                    a.save();
                    a.translate(this.x, this.y);
                    if (!u.isInstagib()) {
                        a.fillStyle = "rgba(126,219,226,1)";
                        a.shadowOffsetX = 0;
                        a.shadowOffsetY = 0;
                        a.shadowBlur = 0;
                        a.shadowColor = "rgba(255, 255, 255, 0.7)";
                        a.lineWidth = 1;
                        c = 28;
                        qa == this.id && (c *= 2);
                        d = 127.5;
                        127.5 > this.energy && 63.75 < this.energy ? d = 30 : 63.75 > this.energy && (d = 0);
                        a.fillStyle = "hsl(" + d + ", 100%, 50%)";
                        a.fillRect(-c / 2 + 0, 20, this.energy / 255 * c, 8);
                        a.strokeStyle = "rgba(255,255,255,1.0)";
                        a.strokeRect(-c / 2, 20, c, 8)
                    }
                    G && !lb && (a.fillStyle = "rgba(255,255,255,1)",
                    a.fillStyle = "rgba(255,255,255,1.0)",
                    a.font = "Bold 15px 'proxima-nova-1','proxima-nova-2', arial, sans-serif",
                    a.textBaseline = "hanging",
                    c = a.measureText(b.name).width,
                    d = 38,
                    u.isInstagib() && (d = 20),
                    a.fillText(b.name, -c / 2, d));
                    a.restore();
                    c = !1;
                    qa == this.id && (c = !0);
                    d = !1;
                    ub == this.id && (d = !0);
                    if (c || 0 < R || O || d)
                        a.save(),
                        a.translate(this.x, this.y - 30),
                        O ? p.frames.pause.draw(a) : c ? p.frames.crown.draw(a) : d ? p.frames.revengeIcon.draw(a) : p.frames.frenzyIcon.draw(a),
                        a.restore();
                    K && (a.save(),
                    d = 0,
                    c && (d = 30),
                    a.translate(this.x, this.y - d),
                    K.draw(a),
                    a.restore())
                }
            };
            this.setPose = function(b, d, g, h) {
                this.origX = this.x;
                this.origY = this.y;
                this.origAngle = this.dstAngle;
                this.dstX = 10 * b;
                this.dstY = 10 * d;
                this.dstAngle = g;
                this.first_set ? (this.origX = this.dstX,
                this.origY = this.dstY,
                this.x = this.dstX,
                this.y = this.dstY,
                this.origAngle = this.dstAngle,
                this.first_set = !1,
                A.firstClientListing || (num_spawn_cooldown_ms = 1E3 * tc)) : (b = this.dstX - this.origX,
                d = this.dstY - this.origY,
                this.speed = Math.sqrt(b * b + d * d) / 3);
                this.inGame || (this.inGame = !0,
                a && a.clear(),
                c && c.clear())
            };
            this.trailEffect = function() {
                wa && a && a.trailEffect()
            };
            this.hit = function(a) {
                la() && (this.highlightValue = 1)
            };
            this.setScore = function(a) {
                let c = a - this.score;
                0 < c && this == v && (K || (K = new Class_ScoreAccumInfo),
                la() && K.addScore(c));
                this.score = a
            };
            this.incScore = function(a) {
                this.setScore(this.score + a)
            };
            this.setName = function(c) {
                this.name = c;
                if ("" == c || null == c)
                    a = new Class_ParticleTrails,
                    a.fixedColor = !0,
                    a.style = M[Ja],
                    a.clear()
            };
            this.setFlagInfo = function(b) {
                if (0 < b) {
                    let d = b & 255;
                    b >>= 8;
                    let g = b & 255;
                    b >>= 8;
                    let h = 0 < (b & 4) ? !0 : !1
                      , e = 0 < (b & 2) ? !0 : !1;
                    G = 0 < (b & 8) ? !0 : !1;
                    c = new Class_ParticleFlags;
                    c.flipX = e;
                    c.flipY = h;
                    c.scale = g / 100;
                    c.stringScale = d / 100;
                    c.setTexture(this.name)
                } else
                    this.showName = !0;
                a = new Class_ParticleTrails;
                a.fixedColor = !0;
                a.style = M[Ja];
                a.clear()
            };
            this.setEnergy = function(a) {
                this.energy = a;
                25 > a && !n ? (n = new Class_ParticleManager,
                n.init(15, this.x, this.y),
                k = 0,
                m = 20 + 40 * Math.random(),
                v == this && (J.playSound(bd, .7, 1, Q, null),
                F.clearNearMiss())) : 25 <= a && n && (delete n,
                n = null,
                l = 1)
            };
            this.GetAmmo = function() {
                return 1 == this.weapon ? -1 : this.ammo
            };
            this.setColorID = function(a) {
                this.colorID = a;
                this.decalFrames = p.planes[this.decalID][this.colorID]
            };
            this.setDecalID = function(a) {
                this.decalID = a;
                this.decalFrames = p.planes[this.decalID][this.colorID]
            };
            this.setColorHue = function(a) {
                this.colorHue = a
            };
            this.getSpeedDirectionX = function() {
                return this.x - this.prevX
            };
            this.getSpeedDirectionY = function() {
                return this.y - this.prevY
            };
            this.setRank = function(a) {
                this.rank = a
            };
            this.isInvulnerable = function() {
                return 0 < num_spawn_cooldown_ms
            };
            a.style = M[Ja];
            this.setWeapon = function(c) {
                a.style = M[c];
                a.width = 1;
                this.weapon = c
            };
            this.cleanup = function() {
                ia && J.sound.stop(ia);
                na && J.sound.stop(na);
                this.stopLaserSound();
                na = ia = null;
                this.first_set = !0;
                this.inGame = !1;
                F.clearTargetLockedMessage();
                ma = 0
            };
            this.setFrenzy = function() {
                R = 1E4
            };
            this.incKills = function() {
                S++
            };
            this.getKills = function() {
                return S
            };
            this.setPaused = function(a) {
                O = a ? !0 : !1
            };
            this.setIsBot = function(a) {
                this.isBot = a
            };
            this.setIsShooting = function(a) {
                !a && this.isShooting && (this.laserTimer = Fa = 0);
                this.isShooting = a
            };
            this.laserHit = function(a, c, b) {
                Ga = a;
                D = c;
                ea = b
            };
            this.prepareFollow = function() {};
            this.stopLaserSound = function() {
                ua && (J.sound.stop(ua),
                ua = nb = null)
            };
            this.dash = function() {
                this == v && J.playSound(cd, .15, 1, Q, null);
                q = 300
            };
            this.dashing = function() {
                return 0 < q
            };
            this.clearTrail = function() {
                a && a.clear()
            }
        }
          , Class_SeaWater = function() {
            let e
              , f
              , d
              , a
              , c
              , g
              , h = []
              , q = 0;
            function b(a, c) {
                0 <= a && 24 > a && (f[a] += c)
            }
            this.update = function(b) {
                let k, m, l, y;
                c = 1.1 * canvas.width / z.zoom;
                g = c / 25;
                a = Math.floor(H.x / g);
                null != d && d != a && (0 < d - a ? (f.splice(24, 24),
                f.splice(0, 0, 0),
                e.splice(24, 24),
                e.splice(0, 0, 0)) : (f.splice(0, 1),
                f.push(0),
                e.splice(0, 1),
                e.push(0)));
                d = a;
                for (k = 0; 25 > k; k++)
                    e[k] = 2 * f[k] - e[k];
                k = f;
                f = e;
                e = k;
                    k = f[0]
                  , m = f[0]
                  , l = f[1];
                f[0] = .99 * (.9 * m + .5 * (k + l) * (1 - .9));
                f[0] = fa(f[0], -100, 100);
                for (y = 1; 24 > y; ++y)
                    k = m,
                    m = l,
                    l = f[y + 1],
                    f[y] = .99 * (.9 * m + .5 * (k + l) * (1 - .9)),
                    f[y] = fa(f[y], -100, 100);
                k = m;
                m = l;
                f[24] = .99 * (.9 * m + .5 * (k + l) * (1 - .9));
                f[24] = fa(f[24], -100, 100);
                k = m;
                m = l;
                f[0] = .99 * (.9 * m + .5 * (k + l) * (1 - .9));
                f[0] = fa(f[0], -100, 100);
                k = m;
                m = l;
                f[1] = .99 * (.9 * m + .5 * (k + l) * (1 - .9));
                f[1] = fa(f[1], -100, 100);
                k = m;
                f[24] = .99 * (.9 * l + .5 * (k + l) * (1 - .9));
                f[24] = fa(f[24], -100, 100);
                k = parseInt(24 * Math.random());
                m = 20 * Math.random() / 20;
                f[k - 1] += m / 2;
                f[k] += m;
                f[k + 1] += m / 2;
                l = z.getBounds();
                if (l[1].y > E / 2) {
                    k = h.length;
                    q -= b;
                    0 > q && (q = 125.6,
                    20 > k && (m = new ClassU_dd,
                    h.push(m),
                    l = l[1].x - l[0].x,
                    y = 0,
                    v && (y = 50 * v.getSpeedDirectionX()),
                    l = Math.random() * l - l / 2 + y,
                    y = 250 * Math.random(),
                    m.setPosition(l + H.x, E / 2 + y + 30, y)));
                    l = [];
                    for (y = 0; y < k; y++)
                        m = h[y],
                        m.update(b),
                        m.deleting && l.push(m);
                    for (b = 0; b < l.length; b++)
                        k = h.indexOf(l[b]),
                        h.splice(k, 1);
                    l.length = 0
                }
            };
            this.drawBehind = function(a) {
                let c = E / 2 - H.y
                  , b = .5 + c / (E / 2) * 6;
                this.drawWaterArea(a, 2 * b, "rgba(9,188,255,1.0)", 100, .25, .6, c);
                c = E / 2 - H.y;
                b = .5 + c / (E / 2) * 6;
                this.drawWaterArea(a, 4 * b, "rgba(8,164,254,1.0)", 100, .75, .8, c);
                this.drawWaterArea(a, 13 * b, "rgba(7,142,252,1.0)", 1E3, 0, 1, c)
            };
            this.drawFront = function(b) {
                let d = E / 2 - H.y
                  , e = a * g
                  , f = E / 2 + -30
                  , q = b.createLinearGradient(0, f, 0, f + (600 + 2 * d));
                q.addColorStop(0, "rgba(7,142,252,1.0)");
                q.addColorStop(.55, "rgba(0,132,232,1.0)");
                q.addColorStop(1, "rgba(0,90,190,1.0)");
                b.fillStyle = q;
                b.beginPath();
                b.moveTo(e + g - c / 2, f + 30);
                b.lineTo(e + g + c / 2, f + 30);
                b.lineTo(e + 25 * g - c / 2, 1030 + f);
                b.lineTo(e + g - c / 2, 1030 + f);
                b.fill();
                b.restore();
                e = h.length;
                for (f = 0; f < e; f++)
                    h[f].draw(b, d)
            };
            this.drawWaterArea = function(b, d, h, e, q, r, K) {
                K = a * g;
                let p = E / 2 + -30;
                b.save();
                b.fillStyle = h;
                b.beginPath();
                b.moveTo(K + g - c / 2, f[0] * r + p + d);
                for (h = 1; 25 > h; h++) {
                    let s = (h + parseInt(25 * q)) % 25;
                    b.lineTo(K + (h + 1) * g - c / 2, f[s] * r + d + p)
                }
                b.lineTo(K + 25 * g - c / 2, e + d + p);
                b.lineTo(K + g - c / 2, e + d + p);
                b.fill();
                b.restore()
            };
            this.disturbSurface = function(c, d) {
                let h = Math.floor(c / g) - a + 12.5;
                b(h - 2, d / 2);
                b(h - 1, d / 2);
                b(h, d);
                b(h + 1, d / 2);
                b(h + 2, d / 2)
            };
            (function() {
                e = [];
                f = [];
                for (let a = 0; 25 > a; a++)
                    e.push(0),
                    f.push(0)
            }
            )()
        }
          , ClassU_dd = function() {
            let b = [
                        118.17, 11.98,
                        26.9, -3.43, 1.91, -19.41, .45, -19.48,
                        -.82, -19.55, -52.05, 2.79, -118.88, 11.55,
                        -121.21, 11.85, -.57, -3.74, .26, -4.04,
                        .57, -4.15, 121.8, 12.59, 118.17, 11.98
                    ]
              , e
              , f
              , d
              , a
              , c = 0;
            this.deleting = !1;
            this.speed = .02;
            this.setPosition = function(c, b, q) {
                e = c;
                f = b;
                d = q;
                a = d / 250
            };
            this.update = function(a) {
                c += a / 1E3 * this.speed * 60;
                c >= Math.PI && (this.deleting = !0)
            };
            this.draw = function(d, h) {
                if (!this.deleting) {
                    let q, n;
                    d.save();
                    q = Math.sin(c);
                    d.globalAlpha = Math.sqrt(q);
                    d.translate(e, f - 4 * c + h / 500 * 150 * a);
                    d.scale(0 + 1 * q, 0 + .8 * q);
                    d.translate(0, -20);
                    d.fillStyle = "#b3dff9";
                    d.beginPath();
                        q = b.length
                      , n = .1 + .9 * a;
                    d.moveTo(b[0] * n + 0, b[1] * n + 0);
                    for (let k = 2; k < q; k += 6)
                        d.bezierCurveTo(b[k] * n + 0, b[k + 1] * n + 0, b[k + 2] * n + 0, b[k + 3] * n + 0, b[k + 4] * n + 0, b[k + 5] * n + 0);
                    d.fill();
                    d.restore()
                }
            }
        }
          , Class_Clouds = function() {
            let b = [
                        [
                            -142.21, -1.18,
                            -143.28, .36, -123.09, 11.23, -103.01, 13.96,
                            -81.96, 16.82, -65.17, 14.9, -64.36, 15.65,
                            -41.42, 37.12, -28.62, 36.17, -16.75, 36.02,
                            18.19, 35.56, 38.19, 16.67, 39.3, 18.03,
                            50.57, 31.83, 67.87, 39.26, 84.68, 33.47,
                            95.27, 29.83, 123.57, 5.67, 121.35, -3.74,
                            118.45, -15.98, 89.66, -8.14, 88.44, -10.77,
                            74.28, -41.45, 51.47, -22.75, 50.8, -23.76,
                            38.13, -43.02, 24.97, -62.52, -2.75, -60.1,
                            -31.37, -57.6, -55.13, -17.35, -55.49, -17.57,
                            -98.49, -44.18, -132.86, -14.55, -142.21, -1.18
                        ],
                        [
                            -162.55, -1.68, 
                            -169.22, -19.07, -134.4, -35.44, -105.42, -35.13,
                            -45.5, -34.48, -16.08, -8.51, 20.84, -12.63,
                            32.11, -13.89, 20.28, -39.57, 35.04, -45.63,
                            50.56, -52, 67.52, -44.38, 81.19, -32.08,
                            94.38, -20.22, 83.96, -10.24, 86.36, -8.17,
                            92.3, -3.06, 110.55, -8.9, 114.01, -1.75,
                            116.98, 4.4, 87.88, 27.98, 55.69, 21.98,
                            53.83, 21.64, 55.47, 33.56, 20.71, 36.54,
                            5.28, 37.87, -8.91, 30.47, -14.55, 25.77,
                            -17.17, 23.58, -33.82, 38.42, -52.98, 36.38,
                            -65.86, 35.01, -74.62, 20.26, -78.34, 16.38,
                            -80.92, 13.67, -151.51, 27.09, -162.55, -1.68
                        ],
                        [
                            -132.9, 30.86,
                            -125.9, 10.58, -96.55, -22.97, -85.94, -23.79, 
                            -61.71, -25.67, -53.16, -17.53, -50.03, -17.63, 
                            -46.79, -17.74, -37.17, -49.76, -6.45, -50.02, 
                            26.73, -50.29, 38.01, -16.34, 44.61, -16.75, 
                            52.59, -17.25, 57.84, -24.32, 79.01, -23.54, 
                            98.83, -22.8, 96.09, -12.23, 103.77, -9.21, 
                            111.97, -5.97, 134.38, -11.68, 144.73, 7.12, 
                            152.17, 20.65, 110.44, 38.48, 91.74, 39.3, 
                            47.05, 41.27, -50.64, 19.62, -67.45, 24.81, 
                            -90.4, 31.9, -100.01, 37.45, -121.08, 38.84, 
                            -125.4, 39.13, -134.8, 36.38, -132.9, 30.86
                        ],
                        [
                            -142.3, 3.86,
                            -142.68, -5.86, -66.59, -26.42, -45.57, -34.65, 
                            -22.55, -43.64, -21.3, -84.89, 5.81, -86.9, 
                            25.18, -88.34, 99.82, -49.94, 103.2, -10.26, 
                            104.1, .3, 137.86, -21.94, 136.83, -10.3, 
                            133.75, 24.38, 117.81, 21.85, 111.08, 24.7, 
                            107.63, 26.15, 88.76, 26.4, 83.17, 23.68, 
                            82.44, 23.32, 49.7, 40.09, 19.75, 36.6, 
                            -18.88, 32.08, -37.22, 21.23, -53.51, 11.08, 
                            -57.67, 8.49, -66.63, 26.07, -94.62, 26.33, 
                            -103.38, 26.41, -112.73, 24.98, -123.85, 15.85, 
                            -126.35, 13.8, -141.87, 14.59, -142.3, 3.86
                        ],
                        [
                            -142.63, 14.15,
                            -142.06, 12.44, -131.98, 6.01, -92.96, -13.64, 
                            -80.08, -20.13, -78.45, -40.22, -32.37, -45.14, 
                            6.08, -49.25, 5.44, -26.43, 8.78, -26.51, 
                            11.15, -26.56, 20.61, -40.86, 44.75, -43.15, 
                            61.05, -44.69, 72.86, -34.19, 77.21, -31.3, 
                            84.42, -26.5, 149.08, -20.62, 150.6, .29, 
                            152.12, 21.2, 123.52, 42.13, 64.54, 49.68, 
                            23.28, 54.96, 37.73, 31.1, 25.32, 30.57, 
                            13.73, 30.07, -6.57, 48.69, -21.45, 46.17, 
                            -44.71, 42.24, -48.23, 33.33, -81.8, 18.87, 
                            -122.06, 1.53, -142.83, 14.75, -142.63, 14.15
                        ],
                        [
                            -128.91, -3.91,
                            -100.79, -29.51, -75.44, -28.12, -55.48, -25.64, 
                            -35.53, -23.16, -10.93, -12.78, 7.7, -16, 
                            15.92, -17.42, 33.99, -43.08, 54.49, -43.88, 
                            83.11, -44.99, 85.4, -21.07, 89.46, -21.25, 
                            94.52, -21.48, 107.89, -29.23, 117.73, -3.17, 
                            118.89, -.07, 136.54, 16.66, 149.39, 19.53, 
                            149.68, 19.59, 95.95, 10.58, 17.5, 16.07, 
                            -5.04, 17.65, -60.8, 45.1, -108.87, 48.31, 
                            -130.84, 49.78, -145.13, 42.1, -143.01, 29.93, 
                            -140.38, 14.79, -134.29, .99, -128.91, -3.91
                        ],
                        [
                            -105.63, 33.5,
                            -112.73, 24.78, -104.42, 20.23, -104.9, 18.35, 
                            -106.19, 13.28, -101.31, -5.25, -88.8, -11.01, 
                            -73.37, -18.1, -65.27, -18.01, -49.55, -16.92, 
                            -46.11, -16.68, -52.73, -32.67, -37.48, -39.53, 
                            -19.05, -47.81, 18.24, -26.76, 24.38, -21.56, 
                            26.14, -20.07, 44.72, -32.26, 63.81, -26.11, 
                            106.07, -12.51, 112.47, 3.21, 124.03, 10.2, 
                            146.91, 24.05, 177.98, 16.35, 176.28, 17.17, 
                            108.58, 50.11, -.39, 35.83, -2.15, 35.9, 
                            -18.66, 36.6, -90.36, 52.25, -105.63, 33.5
                        ],
                        [
                            -515.42, -79.84,
                            -511.96, -82.38, -492.91, -99.15, -444.49, -84.74, 
                            -379.42, -65.39, -353.57, -29.63, -347.84, -16.74, 
                            -347.52, -16.02, -326.45, -32.16, -294.56, -21.93, 
                            -266.34, -12.88, -255.45, 16.99, -233.61, 34.9, 
                            -195.97, 65.76, -153.63, 30.14, -135.04, 43.22, 
                            -79.08, 82.59, .11, -91.66, 104.06, 4.27, 
                            177.97, 72.49, 215.12, 9.81, 234.44, 16.08, 
                            252.34, 21.9, 289.03, 43.31, 332.29, 27.33, 
                            368.2, 14.06, 416.81, -38.28, 429.68, -21.59, 
                            445.63, -.91, 440.5, -8.41, 442.5, -17, 
                            454.3, -67.56, 497.46, -97.75, 506.29, -79.88, 
                            515.12, -62.02, 527.33, 105.09, 482.02, 105.88, 
                            436.97, 106.67, -558.17, 136.12, -560.32, 90.04, 
                            -566.63, -45.23, -534.53, -65.79, -515.42, -79.84
                        ]
                    ]
              , e = [
                        [876.66, -374.819, 1, 1.26],
                        [97.633, -380.736, 0, 1],
                        [192.926, 241.051, 2, 1],
                        [-600.648, -471.205, 3, 1],
                        [-1012.119, -182.729, 4, 1],
                        [-309.131, -16.817, 5, 1],
                        [-909.922, 275.895, 6, 1],
                        [433.972, -27.105, 4, .82],
                        [1061.589, 28.127, 5, 1],
                        [1393.747, -174.289, 5, .61],
                        [1571.903, 160.019, 0, 1.4],
                        [2070.708, -424.461, 5, 1],
                        [1890.094, -38.011, 3, .74],
                        [2641.256, 167.835, 2, 1.3],
                        [2775.003, -273.566, 1, 1.73],
                        [3600.865, -10.901, 6, 1],
                        [4304.657, -434.446, 3, 1.02],
                        [4514.504, 49.961, 5, 1.34],
                        [-1873.248, 78.997, 2, 1.85],
                        [-1738.956, -423.752, 0, 1],
                        [-2562.487, -248.492, 5, 1],
                        [-2908.07, 273.062, 1, 1],
                        [-3511.442, -140.75, 3, 1],
                        [-3067.546, -513.007, 5, 1],
                        [-4294.653, 81.801, 4, 1.18],
                        [-4341.772, -444.099, 2, 1.49],
                        [4534.451, 552.148, 7, 1],
                        [3523.869, 548.891, 7, 1],
                        [2523.538, 545.869, 7, 1],
                        [1527.226, 539.951, 7, 1],
                        [524.44, 534.033, 7, 1],
                        [-491.107, 531.244, 7, 1],
                        [-1491.259, 530.667, 7, 1],
                        [-2491.026, 527.456, 7, 1],
                        [-3488.818, 522.618, 7, 1],
                        [-4489.133, 520.724, 7, 1],
                        [5540.582, 549.447, 7, 1],
                        [6532.003, 553.506, 7, 1],
                        [5332.871, -202.519, 3, .92],
                        [6297.753, -518.992, 0, 1.4],
                        [6571.46, 146.567, 1, 1],
                        [-5608.643, -91.44, 1, 1],
                        [-6554.049, -474.834, 5, 1],
                        [-6324.28, 338.097, 5, 1],
                        [-5497.194, 515.894, 7, 1],
                        [-6495.769, 511.43, 7, 1]
                    ]
              , f = []
              , d = [];
            this.drawCloudShape = function(a, c, b, d, e) {
                a.beginPath();
                let f = d.length;
                a.moveTo(d[0] * e + c, d[1] * e + b);
                for (let k = 2; k < f; k += 6)
                    a.bezierCurveTo(d[k] * e + c, d[k + 1] * e + b, d[k + 2] * e + c, d[k + 3] * e + b, d[k + 4] * e + c, d[k + 5] * e + b);
                a.fill()
            };
            this.drawCloud = function(a, c, g, h, e, f, k, m) {
                -7E3 > c && (c = (-c + 7E3) % 14E3,
                c = 7E3 - c);
                let l = c + d[h][0] * e
                  , y = g + d[h][1] * e
                  , r = c + d[h][2] * e
                  , K = g + d[h][3] * e
                  , p = z.getBounds();
                l = l > p[1].x || r < p[0].x || y > p[1].y || K < p[0].y ? !1 : !0;
                l && (a.save(),
                a.fillStyle = "rgba(190,227,249," + f + ")",
                this.drawCloudShape(a, c, g, b[h], e),
                a.clip(),
                a.fillStyle = "rgba(179,222,250," + f + ")",
                this.drawCloudShape(a, c + k, g + m, b[h], e),
                a.restore())
            };
            this.drawPreRenderedCloud = function(a, c, b, e, q, n) {
                -7E3 > c && (c = (-c + 7E3) % 14E3,
                c = 7E3 - c);
                let k = d[q][0]
                  , m = d[q][1]
                  , l = c + k * n
                  , y = b + m * n
                  , r = c + d[q][2] * n;
                q = b + d[q][3] * n;
                let K = z.getBounds();
                l = l > K[1].x || r < K[0].x || y > K[1].y || q < K[0].y ? !1 : !0;
                l && a.drawImage(f[e], c + k * n, b + m * n)
            };
            this.update = function(a) {
                Xa -= .03 * a
            };
            this.drawClouds = function(a) {
                for (let c = e.length, b = 0; b < c; b++) {
                    let d = 2
                      , f = e[b][0]
                      , n = e[b][1]
                      , k = 1
                      , m = 1
                      , l = 3
                      , y = 9;
                    0 == b % 2 && 7 != e[b][2] ? (f += .2 * (H.x - f),
                    n += .2 * (H.y - n),
                    k = .2,
                    m = .7,
                    l = 1,
                    y = 3,
                    d = .5,
                    n *= Kb) : 7 == e[b][2] && (k = .8,
                    n = Nb);
                    this.drawCloud(a, f + Xa / 4 * d, n, e[b][2], e[b][3] * m, k, l, y)
                }
            };
            this.drawPreRenderedClouds = function(a) {
                let c = e.length
                  , b = Xa
                  , d = Kb;
                xa || (d = .6,
                b = 200);
                for (let f = 0; f < c; f++) {
                    let n = 2
                      , k = e[f][0]
                      , m = e[f][1]
                      , l = 1;
                    0 == f % 2 && 7 != e[f][2] ? (k += .2 * (H.x - k),
                    m += .2 * (H.y - m),
                    n = .5,
                    m *= d,
                    l = .7) : 7 == e[f][2] && (m = Nb);
                    this.drawPreRenderedCloud(a, k + b / 4 * n, m, f, e[f][2], e[f][3] * l)
                }
            };
            this.preRender = function(a) {
                a = e.length;
                for (let c = 1, g = 0; g < a; g++) {
                    let h = e[g][2], q = -d[h][0] + d[h][2], n = -d[h][1] + d[h][3], k;
                    k = document.createElement("canvas");
                    let m = k.getContext("2d")
                      , l = c = 1
                      , y = 3
                      , r = 9;
                    0 == g % 2 && 7 != e[g][2] ? (c = .2,
                    l = .7,
                    y = 1,
                    r = 3) : 7 == e[g][2] && (c = .8);
                        l = e[g][3] * l;
                    let K = -d[h][0] * l
                      , p = -d[h][1] * l;
                    k.width = q * l;
                    k.height = n * l;
                    m.fillStyle = "rgba(190,227,249," + c + ")";
                    this.drawCloudShape(m, K, p, b[h], l);
                    m.clip();
                    m.fillStyle = "rgba(179,222,250," + c + ")";
                    this.drawCloudShape(m, K + y, p + r, b[h], l);
                    f.push(k)
                }
            };
            (function() {
                for (let a = 0; a < b.length; a++) {
                    let c = b[a], e = c.length, h = 9999, f = 9999, n = -9999, k = -9999, m = !0;
                    for (let l = 0; l < e; l++) {
                        let y = c[l];
                        m ? (y < h && (h = y),
                        y > n && (n = y)) : (y < f && (f = y),
                        y > k && (k = y));
                        m = !m
                    }
                    d.push([h, f, n, k])
                }
            }
            )();
            this.preRender()
        }
          , Class_Backgrounds = function() {
            let b = []
              , e = 0
              , f = new Class_Clouds
              , c = !1;
            this.waves = new Class_SeaWater;
            let d = function() {
                this.vertexes = [];
                this.type = 0;
                this.add = function(a, c, b) {
                    this.vertexes.push({
                        x: a,
                        y: c
                    });
                    this.type = b
                };
                this.draw = function(a, c) {
                    if (7 == this.type) {
                        if (a.fillStyle = "#F0F000",
                        3 != c)
                            return
                    } else if (8 == this.type) {
                        if (a.fillStyle = "#0000F0",
                        2 != c)
                            return
                    } else if (a.fillStyle = "#f00000",
                    1 != c)
                        return;
                    a.beginPath();
                    let b = this.vertexes.length
                      , d = this.vertexes[0];
                    a.moveTo(d.x, d.y);
                    for (d = 1; d < b; d++) {
                        let e = this.vertexes[d];
                        a.lineTo(e.x, e.y)
                    }
                    a.closePath();
                    a.fill()
                }
            }
              , a = function() {
                this.posY = this.posX = 0;
                this.radius = 10;
                this.draw = function(a, c) {
                    1 == c && (a.beginPath(),
                    a.fillStyle = "#f00",
                    a.arc(this.posX, this.posY, this.radius, 0, 2 * Math.PI),
                    a.closePath(),
                    a.fill())
                }
            };
            this.loadColliders = function(c) {
                let e = new XMLHttpRequest;
                e.open("GET", c, !0);
                e.responseType = "arraybuffer";
                e.onload = function(c) {
                    if (c = e.response) {
                        let g, f, m, l, y, v, u;
                        c = new DataView(c);
                            g = 0
                          , f = c.getUint8(g, !0)
                          , g = g + 1;
                        if (191 != f)
                            console.log("ERROR LOADING MAP FILE");
                        else
                            for (; ; ) {
                                    m = c.getUint8(g, !0)
                                  , g = g + 1;
                                if (0 == m)
                                    break;
                                else if (1 == m || 2 == m || 3 == m || 4 == m || 5 == m || 6 == m || 7 == m || 8 == m)
                                    if (f = c.getUint8(g, !0),
                                    g += 1,
                                    1 == f) {
                                            f = c
                                          , m = new a
                                          , l = f.getFloat32(g, !0)
                                          , g = g + 4
                                          , y = f.getFloat32(g, !0)
                                          , g = g + 4
                                          , f = f.getFloat32(g, !0)
                                          , g = g + 4;
                                        m.posX = 10 * l;
                                        m.posY = 10 * -y;
                                        m.radius = 10 * f;
                                        b.push(m)
                                    } else {
                                        if (2 == f)
                                            for (f = c,
                                            l = f.getUint16(g, !0),
                                            g += 2,
                                            y = 0; y < l; y++) {
                                                for (let r = f.getUint16(g, !0), g = g + 2, p = new d, s = 0; s < r; s++) {
                                                        v = f.getFloat32(g, !0)
                                                      , g = g + 4
                                                      , u = f.getFloat32(g, !0)
                                                      , g = g + 4;
                                                    p.add(10 * v, 10 * -u, m)
                                                }
                                                b.push(p)
                                            }
                                    }
                                else
                                    9 == m || 10 == m || 11 == m ? (g += 4,
                                    g += 4,
                                    g += 4) : 43 == m && (g += 4,
                                    g += 4,
                                    g += 4)
                            }
                    }
                };
                e.send(null);
                console.log("Map loaded!")
            };
            this.drawColliders = function(a) {
                for (let c = b.length, d = 0; d < c; d++)
                    b[d].draw(a, 1)
            };
            this.drawWater = function(a) {
                if (bool_drawWater)
                    for (let c = b.length, d = 0; d < c; d++)
                        b[d].draw(a, 2)
            };
            this.drawGrassSand = function(a) {
                for (let c = b.length, d = 0; d < c; d++)
                    b[d].draw(a, 3)
            };
            this.drawGradient = function(a) {
                let c, b, d, f, m;
                    c = (canvas.width / 2 + (z.x * z.zoom - canvas.width / 2)) / z.zoom
                  , b = (canvas.height / 2 + (z.y * z.zoom - canvas.height / 2)) / z.zoom
                  , d = .75 * E;
                u.isSpaceWars() && (d = E);
                    d = a.createLinearGradient(0, -d, 0, d)
                  , f = 39
                  , m = 161;
                u.isSpaceWars() && (f = 0,
                m = 55);
                if (0 < e) {
                    let l = e / 2500;
                    1 < l && (l = 1);
                    f += (255 - f) * l;
                    m += (255 - m) * l
                }
                u.isSpaceWars() ? (d.addColorStop(0, "rgba(" + parseInt(f) + ",0,0,1.0)"),
                d.addColorStop(.3, "rgba(" + parseInt(m) + ",0,55,1.0)"),
                d.addColorStop(.5, "rgba(" + parseInt(m) + ",0,75,1.0)"),
                d.addColorStop(.7, "rgba(" + parseInt(m) + ",0,55,1.0)"),
                d.addColorStop(1, "rgba(" + parseInt(f) + ",0,0,1.0)")) : bool_drawGradient ? (d.addColorStop(0, "rgba(" + parseInt(f) + ",145,202,1.0)"),
                d.addColorStop(1, "rgba(" + parseInt(m) + ",231,252,1.0)")) : d = "#62bae2";
                a.fillStyle = d;
                a.fillRect(c - canvas.width / 2 / z.zoom, b - canvas.height / 2 / z.zoom, canvas.width / z.zoom, canvas.height / z.zoom)
            };
            this.drawWaterBehind = function(a) {
                bool_drawWater && this.waves.drawBehind(a)
            };
            this.drawWaterFront = function(a) {
                bool_drawWater && this.waves.drawFront(a)
            };
            this.drawLimits = function(a) {
                let c = (canvas.width / 2 + (z.x * z.zoom - canvas.width / 2)) / z.zoom
                  , b = (canvas.height / 2 + (z.y * z.zoom - canvas.height / 2)) / z.zoom
                  , d = 500
                  , e = 2 * E
                  , f = 0
                  , l = 0
                  , y = 0
                  , r = 0
                  , p;
                if (0 < c) {
                    p = $_sub - c;
                    p < d && (f = Math.min(1 - p / d, 1),
                    f *= .2)
                } else
                    p = $_sub + c,
                    p < d && (l = Math.min(1 - p / d, 1),
                    l *= .2);
                u.isSpaceWars() && (d = 200,
                0 > b ? (p = E / 2,
                p += b,
                p < d && (y = Math.min(1 - p / d, 1),
                y *= .2)) : (p = E / 2,
                p -= b,
                p < d && (r = Math.min(1 - p / d, 1),
                r *= .2)));
                0 < c ? (d = f,
                d = y > d ? y : d,
                f = d = r > d ? r : d) : (d = l,
                d = y > d ? y : d,
                l = d = r > d ? r : d);
                r = y = d;
                0 < f ? (a.fillStyle = "rgba(200,0,0," + f + ")",
                a.fillRect($_sub, -e / 2, 2500, e)) : (a.fillStyle = "rgba(200,0,0," + l + ")",
                a.fillRect(-$_sub - 2500, -e / 2, 2500, e));
                u.isSpaceWars() && (0 > b ? (a.fillStyle = "rgba(200,0,0," + y + ")",
                a.fillRect(-$_sub, -E / 2 - 2500, 2 * $_sub, 2500)) : (a.fillStyle = "rgba(200,0,0," + r + ")",
                a.fillRect(-$_sub, E / 2, 2 * $_sub, 2500)));
                u.isSpaceWars() || (a.fillStyle = "rgba(255,255,255,0.10)",
                a.fillRect(c - canvas.width / 2 / z.zoom, -E / 2 - 1, canvas.width / z.zoom, 6))
            };
            this.draw = function(a) {
                if (bool_drawSun && !u.isSpaceWars()) {
                    let c = .97 * z.x + 450
                      , b = .97 * z.y - 100
                      , d = a.createRadialGradient(c, b, 70, c, b, 350);
                    d.addColorStop(0, "rgba(255,255,255,0.4)");
                    d.addColorStop(.1, "rgba(255,255,255,0.13)");
                    d.addColorStop(.15, "rgba(255,255,255,0.05)");
                    d.addColorStop(.2, "rgba(255,255,255,0)");
                    a.fillStyle = d;
                    a.fillRect(c - 175, b - 175, 350, 350);
                    a.fillStyle = "rgba(255,255,255,1)";
                    a.beginPath();
                    a.arc(c, b, 70, 0, 2 * Math.PI);
                    a.fill()
                }
                ob && !u.isSpaceWars() && f.drawPreRenderedClouds(a)
            };
            this.update = function(a) {
                if (xa || !c)
                    if (c = !0,
                    this.waves.update(a),
                    f.update(a),
                    null != v) {
                        let b = v.x < -$_sub || v.x > $_sub;
                        u.isSpaceWars() && (b |= v.y > E / 2 || v.y < -E / 2);
                        b ? (0 == e && (J.playSound(gd, 1, 1, 1, null),
                        F.showWarningMessage("YOU ABANDONED THE FIGHT!")),
                        e += a) : (0 < e && F.clearWarningMessage(),
                        e = 0)
                    }
            };
        }
          , Class_PickupItem = function() {
            let b = this.alpha = 0
              , e = 0
              , f = Math.random() * Math.PI * 2
              , d = 1
              , a = 0
              , c = 0
              , g = 0
              , h
              , q
              , n = 1
              , k = 1
              , m = 1
              , l = 0
              , y = !1;
            this.id = -1;
            this.y = this.x = 0;
            this.radius = 1.5;
            this.type;
            this.sinScaleY = this.sinScaleX = 0;
            this.fadingOut = this.grabbing = !1;
            this.update = function(f) {
                let p = .06 * f, s, v;
                if (64 != this.type) {
                    if (!u.isSpaceWars()) {
                            s = E / 2 - 20
                          , v = this.y + e;
                        l += f / 400;
                        v < s ? (v > s - 30 && (d = (s - v) / 30),
                        1 > this.alpha && (this.alpha += f / 1E3,
                        1 < this.alpha && (this.alpha = 1)),
                        e = (T - b) / 1E3 * Ac * 60) : (a += .1 * p,
                        e += .1,
                        k -= .008,
                        0 > k && (k = 0),
                        m = Math.sqrt(k))
                    }
                    this.fadingOut && (y || u.isSpaceWars() || u.isInstagib() ? delete W[this.id] : (e += .25,
                    this.alpha -= f / 1E3,
                    0 >= this.alpha && delete W[this.id]))
                }
                this.grabbing && ((f = B[c]) ? (s = Math.pow(g, 2),
                this.x = h + (f.x - h) * s,
                this.y = q + (f.y - q) * s,
                n = 1 - s,
                g += .07 * p,
                1 < g && delete W[this.id]) : delete W[this.id])
            };
            this.drawItem = function(c, b) {
                let g;
                if (64 == this.type)
                    c.save(),
                    c.beginPath(),
                    this.sinScaleX += .1,
                    this.sinScaleY += .12,
                    c.translate(this.x, this.y + e),
                    c.scale((1 + Math.sin(this.sinScaleX) / 6) * n * 1.3, (1 + Math.sin(this.sinScaleY) / 6) * n * 1.3),
                    b.draw(c);
                else if (y || u.isSpaceWars())
                    v && u.isSpaceWars() && v.id == qa && (g = .3),
                    c.save(),
                    c.beginPath(),
                    this.sinScaleX += .1,
                    this.sinScaleY += .12,
                    c.translate(this.x, this.y),
                    c.scale((1 + Math.sin(this.sinScaleX) / 6) * n * 1.3, (1 + Math.sin(this.sinScaleY) / 6) * n * 1.3),
                    c.scale(2, 2),
                    c.globalAlpha = g,
                    p.frames.wing.draw(c),
                    c.scale(.5, .5),
                    b.draw(c);
                else {
                    g = 1;
                    !v || v.weapon != za || this.type != $a && this.type != Ua && this.type != Qa && this.type != bb && this.type != cb || (g = .3);
                    let h = p.frames.parachute;
                    h.y = -h.height / 2 + 100 * (1 - m);
                    c.save();
                    this.grabbing ? c.translate(this.x, this.y) : c.translate(this.x, this.y + e);
                    c.rotate(.2 * Math.sin(l + f) * d);
                    c.scale(1 * n, 1 * n);
                    c.translate(0, 10);
                    c.globalAlpha = this.alpha * g * 1;
                    c.save();
                    0 < a && (c.globalAlpha = m * g * 1);
                    c.scale(1 * (1 + (1 - m)), 1 * m);
                    h.draw(c);
                    c.restore();
                    g = 0;
                    this.type == za && (g = 8);
                    c.translate(0, 4 * Math.sin(a) + g + 10);
                    b.draw(c);
                    c.globalAlpha = 1
                }
                c.restore()
            };
            this.draw = function(a) {
                if (bool_drawItems) {
                    let c = 40, b;
                    32 == this.type ? b = p.frames.health : this.type == $a ? b = p.frames.trishoot : this.type == Qa ? b = p.frames.railgun : this.type == Ua ? b = p.frames.missile : this.type == bb ? b = p.frames.melee : this.type == cb ? b = p.frames.bombdrop : this.type == za ? b = p.frames.laser : 64 == this.type && (c = 10,
                    b = p.frames.wing);
                    let d = this.y;
                    this.grabbing || (d += e);
                    if (!this.grabbing) {
                        if (!aa(this.x, d, c))
                            return
                    } else if (!aa(this.x, this.y, c))
                        return;
                    this.drawItem(a, b)
                }
            };
            this.fadeOut = function() {
                this.fadingOut = !0
            };
            this.playerGrab = function(a) {
                this.grabbing = !0;
                c = a;
                this.y += e;
                h = this.x;
                q = this.y;
                delete W[this.id];
                this.id = "g" + this.id;
                W[this.id] = this;
                v && c == v.id && !u.isInstagib() && (64 == this.type ? v.incScore(vc) : v.incScore(wc))
            };
            this.setPosition = function(a, c) {
                this.x = 10 * a;
                this.y = 10 * c;
                this.y > -E / 2 && (this.alpha = 1);
                b = +new Date
            };
            u.isSpaceWars() && (y = !0)
        }
          , Class_WS_Connection = function() {
            let f;
            function b(b, a, c) {
                169 != a && 172 != a && 162 != a && 178 != a || c || (ja = []);
                let e, h, f, n, k, m, l, y, r, p, s, u, w, t, x, z, C, P, R, S, O, G, ea;
                    e = !1
                  , h = 1
                  , f = 1
                  , n = 0;
                c || (A.lastUpdateBool = !A.lastUpdateBool);
                for (; ; ) {
                    n++;
                        k = b.getUint32(h, !0)
                      , h = h + 4;
                    if (0 == k) {
                        c = b;
                        f = a;
                        n = c.getUint8(h, !0);
                        h += 1;
                        for (k = 0; k < n; k++) {
                                m = c.getUint32(h, !0)
                              , h = h + 4;
                            if (163 == f || 162 == f || 169 == f)
                                    l = c.getUint8(h, !0)
                                  , h = h + 1;
                                y = c.getFloat32(h, !0)
                              , h = h + 4
                              , r = -c.getFloat32(h, !0)
                              , h = h + 4
                              , p = c.getUint32(h, !0)
                              , h = h + 4
                              , s = M[m];
                            if (null == s) {
                                s = new Class_Missile;
                                M[m] = s;
                                163 != f && 162 != f && 169 != f || s.setType(l);
                                    m = B[p]
                                  , u = !1;
                                m || (u = !0,
                                m = U[p]);
                                if (m) {
                                        w = Q
                                      , t = 1;
                                    u ? (w = Sa,
                                    u = va(m.x, m.y, H.x, H.y),
                                    t = 1 - u / Ra,
                                    .01 < t && J.playSound(ld, t, 1, w, null),
                                    m.cannonShoot()) : (v && p == v.id || (w = Sa,
                                    u = va(m.x, m.y, H.x, H.y),
                                    t = 1 - u / Ra),
                                    .01 < t && J.playSound(md, t, 1, w, null),
                                    m.ammo--)
                                }
                            }
                            s.lastUpdate = T;
                            s.setPosition(y, r, p)
                        }
                        if (162 == a || 178 == a || 163 == a || 179 == a || 169 == a || 172 == a)
                            for (l = h; ; ) {
                                c = b.getUint32(l, !0);
                                l += 4;
                                if (0 == c)
                                    break;
                                h = U[c];
                                if (178 == a || 162 == a)
                                    f = b.getUint8(l, !0),
                                    l += 1,
                                    null == h && (h = new Class_Warship,
                                    U[c] = h,
                                    h.setType(f));
                                h.id = c;
                                h.lastUpdate = T;
                                c = b.getFloat32(l, !0);
                                l += 4;
                                f = -b.getFloat32(l, !0);
                                l += 4;
                                n = b.getFloat32(l, !0);
                                l += 4;
                                k = b.getUint16(l, !0);
                                l += 2;
                                y = b.getUint8(l, !0);
                                l += 1;
                                h.type == zb ? (r = -b.getFloat32(l, !0),
                                l += 4,
                                p = b.getFloat32(l, !0),
                                l += 4,
                                h.setCannonAngle(p),
                                h.setFloatValue(r)) : h.type != db || 162 != a && 178 != a || (r = b.getUint8(l, !0),
                                l += 1,
                                h.setFragment(r));
                                h.setState(y);
                                h.setPose(c, f, n);
                                h.setEnergy(k)
                            }
                        break
                    }
                        x = b.getUint16(h, !0)
                      , h = h + 2
                      , y = x & 1
                      , r = x & 2
                      , z = x & 4
                      , p = x & 1024
                      , s = x & 2048;
                    1 != n || 163 != a && 179 != a || (qa = x & 512 ? k : 0);
                    y && (m = b.getFloat32(h, !0),
                    h += 4,
                    w = -b.getFloat32(h, !0),
                    h += 4,
                    u = b.getFloat32(h, !0),
                    h += 4,
                    t = b.getUint8(h, !0),
                    h += 1);
                        C = B[k]
                      , P = x & 256;
                    if (C && (P && C.setFrenzy(),
                    C.setPaused(z),
                    v == C)) {
                            z = x & 8
                          , R = x & 16
                          , S = x & 32
                          , O = x & 128
                          , G = x & 4096;
                        x & 64 ? F.addBonus(64, 0) : S ? F.addBonus(32, 0) : R ? F.addBonus(16, 0) : z && F.addBonus(8, 0);
                        G && (F.addBonus(4096, 0),
                        Za[C.id] = 0);
                        O && F.addBonus(128, 0);
                        P && F.addBonus(256, C.getKills())
                    }
                        ea;
                    if (162 == a || 178 == a || 169 == a || 172 == a)
                        ea = b.getUint32(h, !0),
                        h += 4;
                    if (162 != a && 178 != a || !y)
                        162 != a && 178 != a || y || null != C || (C = new Class_Plane,
                        B[k] = C,
                        C.inGame = !1);
                    else {
                        162 == a ? (x = b.getUint16(h, !0),
                        h += 2) : (x = b.getUint8(h, !0),
                        h += 1);
                        P = b.getUint16(h, !0);
                        h += 2;
                        z = b.getUint8(h, !0);
                        h += 1;
                        R = b.getUint8(h, !0);
                        h += 1;
                        S = b.getUint32(h, !0);
                        h += 4;
                        for (O = ""; ; ) {
                            G = b.getUint16(h, !0);
                            h += 2;
                            if (0 == G)
                                break;
                            O += String.fromCharCode(G)
                        }
                        null == C && (C = new Class_Plane,
                        B[k] = C);
                        -1 != O.indexOf("\ufdfd") && (O = "<Unnamed>");
                        C.setColorID(z);
                        C.setDecalID(R);
                        C.setName(O);
                        C.setFlagInfo(S);
                        C.setWeapon(x);
                        C.ammo = P
                    }
                    if (null == C)
                        console.log("ERROR: Receiving data for a player (" + k + ") that does not exist, ignoring!");
                    else if (C.id = k,
                    C.lastUpdate = T,
                    C.updateBool = A.lastUpdateBool,
                    y && (C.setPose(m, w, u),
                    C.energy = t,
                    C.setEnergy(t),
                    C.hover = r,
                    C.setIsBot(p),
                    C.setIsShooting(s)),
                    169 == a || 172 == a || 162 == a || 178 == a)
                        C.setScore(ea),
                        c || (1 == f && (sc = k),
                        ja.push(k),
                        e = !0,
                        C.setRank(f),
                        f++)
                }
                e && F.refreshLeaderboard(ja)
            }
            function e(b, a) {
                let c, e, f, q, n, k;
                    c = 1, e = b.getUint16(c, !0), c = c + 2, f = b.getUint32(c, !0), c = c + 4, q;
                168 == a ? (q = b.getUint8(c, !0),
                c += 1) : (q = b.getUint16(c, !0),
                c += 2);
                if (0 < f) {
                        n = 1
                      , k = od;
                    32 > q || 128 == q || 256 == q ? (c = b.getUint16(c, !0),
                    B[f].setWeapon(q),
                    B[f].ammo = c) : 64 == q ? (B[f].trailEffect(),
                    k = pd,
                    null != this.lastGrabbedWingTime && (q = T - this.lastGrabbedWingTime,
                    1E3 > q ? A.wingsInARow++ : A.wingsInARow = 0,
                    n = 1 + .05 * A.wingsInARow,
                    1.5 < n && (n = 1.5)),
                    this.lastGrabbedWingTime = T) : 32 == q && (k = qd);
                    v && f == v.id && J.playSound(k, 1, n, Q, null);
                    W[e].playerGrab(f)
                } else
                    W[e].fadeOut()
            }
            this.firstClientListing = !0;
            this.sentHello = this.hasConnection = !1;
            this.lastGrabbedWingTime = this.remoteHost = null;
            this.connectRetry = this.wingsInARow = 0;
            this.lastUpdateBool = !1;
            this.roomNumber = 0;
            this.directed = !1;
            this.roomID = 0;
            this.getServerAndConnect = function() {
                let b, c, a;
                if (!G) {
                        b = null, b = "", a;
                    Hb() || (a = parent.location.hash);
                    if (a)
                        b = a,
                        b = b.substring(1, b.length),
                        b = ";" + b,
                        A.directed = !0;
                    else if (Pa.ip) {
                        b = Pa.ip;
                        b = b.replace("%3A", ":");
                        A.remoteHost = b;
                        A.connect();
                        return
                    }
                    a = vb;
                    Pa.cc && (a = Pa.cc);
                    if (void 0 == a)
                        setTimeout(A.getServerAndConnect, 200);
                    else {
                            c = "";
                        Ib && (c = "s");
                        $.ajax({
                            url: "http" + c + "://master.wings.io/",
                            type: "POST",
                            success: function(a) {
                                if ("0" == a)
                                    $("#topGui").hide(),
                                    $("#topGuiConnecting").hide(),
                                    $("#roomFailed").show();
                                else {
                                    a = a.split("!");
                                    A.roomID = 0;
                                    1 < a.length && (A.roomID = a[1]);
                                        c = a[0];
                                    a = c.split("/");
                                    A.roomNumber = 0;
                                    1 < a.length && (A.roomNumber = a[1],
                                    c = a[0]);
                                    A.remoteHost = c;
                                    A.connect()
                                }
                            },
                            error: function() {
                                setTimeout(A.getServerAndConnect, 1E3)
                            },
                            dataType: "text",
                            contentType: "text/plain",
                            method: "PUT",
                            cache: !1,
                            crossDomain: !0,
                            data: a + b
                        })
                    }
                }
            };
            this.connect = function() {
                let b;
                if (wa || G) {
                        b = "ws://" + A.remoteHost;
                    console.log("fullhost: " + b);
                    if (Ib) {
                            b = A.remoteHost.split(":")[0].split(".")
                          , a = parseInt(A.roomNumber) + 8079 + 1E3
                          , b = "wss://ip-" + b[0] + "-" + b[1] + "-" + b[2] + "-" + b[3] + ".wings.io:" + a;
                        console.log("isSecure RoomNumber: " + A.roomNumber)
                    } else
                        0 < A.roomNumber && (b = "ws:" + b.split(":")[1] + ":" + (parseInt(A.roomNumber) + 8079),
                        console.log("New full host: " + b));
                    try {
                        f = new WebSocket(b)
                    } catch (c) {
                        setTimeout(A.getServerAndConnect, 1E3);
                        return
                    }
                    f.binaryType = "arraybuffer";
                    f.onopen = A.onSocketOpen;
                    f.onclose = A.onSocketClose;
                    f.onmessage = A.onSocketMessage;
                    f.onerror = A.onSocketError
                } else
                    setTimeout(A.getServerAndConnect, 100)
            };
            this.disconnect = function() {
                A.directed && (Hb() || (window.location.hash = ""),
                A.directed = !1);
                A.roomID = 0;
                f && f.close()
            };
            this.onSocketOpen = function(b) {
                window.didSendLoadingTime || (b = +new Date - window.startTime,
                window.stats && console.log("ltct " + b),
                window.mixpanel.track("Load Time To Play", {
                    deltatime: b,
                    domain: window.location.hostname
                }),
                window.didSendLoadingTime = !0);
                A.connectRetry = 0;
                A.hasConnection = !0;
                A.directed = !1;
                p.loaded && A.hello()
            };
            this.onSocketClose = function(b) {
                A.connectionClosed()
            };
            this.onSocketMessage = function(b) {
                A.processMessage(b.data)
            };
            this.onSocketError = function(b) {
                console.log("socket error")
            };
            this.hello = function() {
                G ? A.sendSingleByte(32) : A.sendSingleByte(1);
                A.ping();
                A.sentHello = !0;
                $("#copyLink").fadeIn(300);
                $("#topGui").show();
                $("#topGuiConnecting").hide();
                $(".btn-needs-server").removeAttr("disabled");
                $("#nick").focus();
                1 == G && ("undefined" != typeof messageHandlers && messageHandlers.didConnect ? messageHandlers.didConnect(JSON.stringify({})) : window.webkit.messageHandlers.didConnect.postMessage({}))
            };
            this.processMessage = function(d) {
                let a, c, f, h, q, n, k, m, l, y, r, s, t, x, z, Ca, ta;
                d = new DataView(d);
                    a = d.getUint8(0);
                if (0 != a)
                    if (160 == a) {
                            c = 1
                          , a = -d.getUint32(c, !0)
                          , c = c + 4
                          , f = d.getFloat32(c, !0)
                          , c = c + 4
                          , h = d.getFloat32(c, !0)
                          , c = c + 4
                          , q = d.getFloat32(c, !0)
                          , c = c + 4
                          , n = d.getFloat32(c, !0)
                          , c = c + 4
                          , k = d.getFloat32(c, !0)
                          , c = c + 4
                          , m = d.getFloat32(c, !0)
                          , c = c + 4
                          , l = d.getFloat32(c, !0)
                          , c = c + 4
                          , y = d.getFloat32(c, !0)
                          , c = c + 4
                          , r = d.getFloat32(c, !0);
                        d = d.getFloat32(c + 4, !0);
                        Xa = a;
                        $_sub = 10 * f;
                        E = 10 * h;
                        uc = 1E3 * q;
                        tc = n;
                        Kb = E / 2 / 650;
                        Nb = E / 2 - 100;
                        lc = k;
                        Ac = m;
                        yc = l;
                        vc = y;
                        wc = r;
                        xc = d
                    } else if (161 == a || 171 == a)
                        xa = !0,
                        G && ("undefined" != typeof messageHandlers && messageHandlers.didEnterGame ? messageHandlers.didEnterGame(JSON.stringify({})) : window.webkit.messageHandlers.didEnterGame.postMessage({})),
                        c = 1,
                        f = d.getUint32(c, !0),
                        c += 4,
                        h = d.getFloat32(c, !0),
                        c += 4,
                        q = -d.getFloat32(c, !0),
                        c += 4,
                        n = d.getFloat32(c, !0),
                        c += 4,
                        k = d.getUint8(c, !0),
                        c += 1,
                        m = d.getUint8(c, !0),
                        c += 1,
                        d = d.getUint32(c, !0),
                        v = new Class_Plane,
                        v.id = f,
                        v.setColorID(k),
                        v.setDecalID(m),
                        v.setName(myName),
                        v.setFlagInfo(d),
                        v.setPose(h, q, n),
                        v.updateBool = A.lastUpdateBool,
                        B[f] = v,
                        ra = f,
                        Z = !0,
                        Db(),
                        Va(),
                        161 == a && (Za[f] = 0);
                    else if (162 == a || 178 == a)
                        b(d, a, !1),
                        this.firstClientListing = !1,
                        Va();
                    else if (169 == a || 172 == a)
                        b(d, a, !1),
                        Va();
                    else if (163 == a || 179 == a)
                        b(d, a, !1);
                    else if (164 == a || 180 == a)
                        164 == a ? b(d, 162, !0) : b(d, 178, !0),
                        Va();
                    else if (165 == a) {
                        q = 1;
                        a = d.getUint32(q, !0);
                        q += 4;
                        if (c = B[a])
                            f = d.getUint32(q, !0),
                            q += 4,
                            h = d.getUint8(q, !0),
                            d = d.getUint32(q + 1, !0),
                            q = v,
                            !q && Qb && (q = Qb),
                            q && f == q.id && (n = ga(B[a].name),
                            F.addMessage("You killed", !0, n),
                            u.isInstagib() || (a == qa ? q.incScore(yc) : q.incScore(xc))),
                            0 < f ? ((f = B[f]) ? (F.addActivityMessage(ga(c.name) + " was Killed by " + ga(f.name)),
                            f.incKills(),
                            Za[c.id] = f.id) : F.addActivityMessage(ga(c.name) + " was Killed"),
                            X.addExplosion(c.dstX, c.dstY, c.getSpeedDirectionX(), c.getSpeedDirectionY()),
                            v && v.id == a && (f ? F.addMessage("Killed by", !1, ga(f.name)) : F.addMessage("You were killed", !1, null),
                            Z ? (Z = !1,
                            Qb = v,
                            v = null,
                            ka = 1,
                            wasKilled(d),
                            Fb(d)) : (v = null,
                            L.waitUntilNextFollow()))) : (Za[c.id] = 0,
                            v && v.id == a && (5 == h ? F.addMessage("You left!", !1, null) : 4 == h ? F.addMessage("Abandoned!", !1, null) : 1 == h ? F.addMessage("Crashed!", !1, null) : 6 == h ? F.addMessage("Exploded!", !1, null) : 7 == h ? F.addMessage("KAMIKAZE!!", !1, null) : 8 == h ? F.addMessage("You were killed by a Warship!", !1, null) : 3 == h ? (F.addMessage("Splash!", !1, null),
                            J.playSound(rd, .7, 1, Q, null),
                            oa.addSplash(v.x, E / 2 + 10, 2, !1)) : F.addMessage("You were killed!", !1, null),
                            Z ? (Z = !1,
                            v = null,
                            ma = 0,
                            ka = 1,
                            wasKilled(d),
                            Fb(d)) : (v = null,
                            L.waitUntilNextFollow())),
                            5 == h ? F.addActivityMessage(ga(c.name) + " left") : 4 == h && F.addActivityMessage(ga(c.name) + " abandoned"),
                            X.addExplosion(c.dstX, c.dstY, .5 * c.getSpeedDirectionX(), .5 * c.getSpeedDirectionY())),
                            null == c ? console.log("ERROR: Trying to remove a player that didnt exist!") : B[a].cleanup();
                        else if (d = U[a])
                            d.type == db && u.isSpaceWars() && (X.addExplosion(d.x, d.y, 0, 0),
                            3 != d.fragment && (d = 1 - va(d.x, d.y, H.x, H.y) / Ra,
                            .01 < d && J.playSound(Fc, d, .4, Sa, null))),
                            U[a].cleanup(),
                            delete U[a];
                        Va()
                    } else if (166 == a || 176 == a)
                        for (c = 1,
                        f = d.getUint16(c, !0),
                        c += 2,
                        h = 0; h < f; h++) {
                            n = d.getUint32(c, !0);
                            c += 4;
                            176 == a ? (q = d.getUint16(c, !0),
                            c += 2) : (q = d.getUint8(c, !0),
                            c += 1);
                            m = 1;
                            l = Gc;
                            switch (q) {
                            case Ja:
                                l = u.isSpaceWars() ? qa == n ? sd : Yb : td;
                                break;
                            case $a:
                                u.isSpaceWars() ? (m = .7,
                                l = Yb) : l = ud;
                                break;
                            case Qa:
                                u.isSpaceWars() ? (l = Yb,
                                m = 1.3) : l = vd
                            }
                            k = B[n];
                            !k && 0 < n && (y = U[n]) && console.log("specialEntity did shoot: " + y.id);
                            y = Q;
                            r = 1;
                            v && n == v.id || !k || (y = Sa,
                            r = 1 - va(k.x, k.y, H.x, H.y) / Ra);
                            .01 < r && l != Gc && J.playSound(l, r, m, y, null);
                            m = d.getUint16(c, !0);
                            c += 2;
                            q == bb && k.dash();
                            l = d.getUint8(c, !0);
                            c += 1;
                            for (y = 0; y < l; y++) {
                                    r = d.getFloat32(c, !0)
                                  , c = c + 4
                                  , s = -d.getFloat32(c, !0)
                                  , c = c + 4
                                  , t = 0
                                  , t = !1;
                                if (q != Ua && q != cb)
                                    oa.addShot(n, r, s, q);
                                else {
                                        t = d.getUint32(c, !0)
                                      , c = c + 4
                                      , x = M[t];
                                    x && (delete M[t],
                                    delete x);
                                    t = !0
                                }
                                for (x = !1; ; ) {
                                        z = d.getUint32(c, !0)
                                      , c = c + 4;
                                    if (0 == z)
                                        break;
                                        Ca = B[z]
                                      , ta = !1;
                                    Ca || (Ca = U[z]) && (ta = !0);
                                    z == qa || ta || (t = !1);
                                    Ca && (Ca.hit(q),
                                    k && q == za && (x = !0,
                                    k.laserHit(r, s, !0)),
                                    v && (v.id == z ? J.playSound(Hc, 1, 1, Q, null) : n == v.id && J.playSound(Hc, 1, 2, Q, null)))
                                }
                                k && !x && k.laserHit(r, s, !1);
                                t && oa.addMissileImpact(r, s)
                            }
                            0 < n && (n = B[n]) && q != Ua && q != cb && (n.ammo = m,
                            n.setWeapon(q))
                        }
                    else if (167 == a || 174 == a)
                        for (c = 1; ; ) {
                            f = d.getUint16(c, !0);
                            if (0 == f)
                                break;
                            c += 2;
                            174 == a ? (h = d.getUint16(c, !0),
                            c += 2) : (h = d.getUint8(c, !0),
                            c += 1);
                            q = d.getFloat32(c, !0);
                            c += 4;
                            n = -d.getFloat32(c, !0);
                            c += 4;
                            k = new Class_PickupItem;
                            W[f] = k;
                            k.id = f;
                            k.setPosition(q, n);
                            k.type = h
                        }
                    else if (168 == a || 173 == a)
                        e(d, a);
                    else if (170 == a)
                        a = 1,
                        c = d.getUint8(a, !0),
                        3 == c ? ma++ : 4 == c ? ma-- : (gb = 2 != c ? d.getUint32(a + 1, !0) : 0,
                        hb = 0,
                        ha = c);
                    else if (16 == a)
                        c = d.getUint8(1, !0),
                        a = d.getUint32(2, !0),
                        u.type = c,
                        u.waiting = !0,
                        u.endTime = +new Date + 1E3 * a;
                    else if (17 == a)
                        u.type = u.eventType.EVENT_NONE,
                        u.waiting = !1,
                        u.endTime = 0;
                    else if (18 == a || 19 == a)
                        c = 1,
                        f = d.getUint8(c, !0),
                        c++,
                        a = d.getUint32(c, !0),
                        c += 4,
                        u.waiting = !1,
                        u.setType(f),
                        u.type == u.eventType.EVENT_WARSHIP && (h = d.getUint8(c, !0),
                        c++,
                        f = d.getUint8(c, !0),
                        c++,
                        d = d.getUint8(c, !0),
                        u.setWarshipInfo(h, f, d)),
                        L.whiteFlash = 1,
                        u.endTime = +new Date + 1E3 * a,
                        u.isInstagib() ? u.railSwitch = !0 : u.isWarship() ? p.loadWarshipEvent() : u.isSpaceWars() && p.loadAsteroidEvent();
                    else if (20 == a) {
                        u.type != u.eventType.EVENT_WARSHIP && (L.whiteFlash = 1);
                        u.waiting = !1;
                        if (u.isInstagib() || u.isSpaceWars())
                            u.machinegunSwitch = !0;
                        u.setType(u.eventType.EVENT_NONE)
                    } else if (22 == a)
                        u.waiting = !1,
                        u.type != u.eventType.EVENT_NONE && (u.type != u.eventType.EVENT_WARSHIP && (L.whiteFlash = 1),
                        u.setType(u.eventType.EVENT_NONE));
                    else if (23 == a) {
                        c = 1;
                        f = d.getUint32(c, !0);
                        c += 4;
                        if (0 < f) {
                            if (a = B[f])
                                a = ga(a.name),
                                F.setWarshipRemoved(a)
                        } else
                            F.setWarshipRemoved(null);
                        a = d.getUint8(c, !0);
                        c += 1;
                        f = d.getUint8(c, !0);
                        c += 1;
                        d = d.getUint8(c, !0);
                        u.setWarshipInfo(a, f, d)
                    } else if (21 == a) {
                        f = d.getUint8(1, !0);
                        c = 2;
                        for (a = ""; ; ) {
                            h = d.getUint16(c, !0);
                            c += 2;
                            if (0 == h)
                                break;
                            a += String.fromCharCode(h)
                        }
                        F.setLastWinner(a, f)
                    }
            };
            this.connectionClosed = function() {
                L.gameCleanup();
                A.sentHello = !1;
                A.hasConnection = !1;
                A.firstClientListing = !0;
                connectionClosed();
                Fb(-1);
                $("#topGui").hide();
                $("#topGuiConnecting").show();
                $("#copyLink").fadeOut(300);
                $(".btn-needs-server").attr("disabled", "disabled");
                let b = this.connectRetry;
                5 < b && (b = 5);
                setTimeout(this.getServerAndConnect, 1E3 + 1E3 * b);
                A.connectRetry++
            };
            this.sendSingleByte = function(b) {
                let a = new ArrayBuffer(1);
                (new DataView(a)).setUint8(0, b);
                f.send(a)
            };
            this.sendNick = function(b, a) {
                myName = b;
                let c = new ArrayBuffer(3 + 2 * b.length)
                  , e = new DataView(c)
                  , h = 2;
                a && (h = 8);
                e.setUint8(0, h);
                e.setUint8(1, bc);
                e.setUint8(2, dc);
                for (h = 0; h < b.length; ++h)
                    e.setUint16(3 + 2 * h, b.charCodeAt(h), !0);
                f.send(c)
            };
            this.sendInput = function() {
                let b = new ArrayBuffer(10)
                  , a = new DataView(b);
                a.setUint8(0, 3);
                a.setFloat64(1, V.angle, !0);
                let c = 0;
                if (V.hover || !wa)
                    c |= 1;
                if (!wa || Y)
                    c |= 2;
                a.setUint8(9, c, !0);
                f.send(b)
            };
            this.sendDirection = function() {
                let b = new ArrayBuffer(9)
                  , a = new DataView(b);
                a.setUint8(0, 4);
                a.setFloat64(1, V.angle, !0);
                f.send(b)
            };
            this.sendThrottle = function() {
                let b = new ArrayBuffer(2)
                  , a = new DataView(b);
                a.setUint8(0, 6);
                1 == V.throttle ? a.setUint8(1, 1) : a.setUint8(1, 0);
                f.send(b)
            };
            this.sendBraking = function(b) {
                let a = new ArrayBuffer(2)
                  , c = new DataView(a);
                c.setUint8(0, 4);
                b ? c.setUint8(1, 1) : c.setUint8(1, 0);
                f.send(a)
            };
            this.sendShooting = function(b) {
                let a = new ArrayBuffer(2)
                  , c = new DataView(a);
                c.setUint8(0, 5);
                b ? c.setUint8(1, 1) : c.setUint8(1, 0);
                f.send(a)
            };
            this.leave = function() {
                let b = new ArrayBuffer(1);
                (new DataView(b)).setUint8(0, 7);
                f.send(b)
            };
            this.ping = function() {
                if (this.hasConnection) {
                    let b = new ArrayBuffer(1);
                    (new DataView(b)).setUint8(0, 0);
                    f.send(b)
                }
            }
        }
          , ClassR_FollowMode = function(b) {
            let f = this
              , d
              , a
              , c = 0
              , g = 0
              , h = 0
              , q = !1
              , n = 1
              , k
              , m = 0
              , l = 0
              , y = !1
              , r = 1
              , x
              , pa = 0
              , L = 0
              , T = !1
              , Ca = 1
              , ta
              , N;
            function e() {
                Z && A.hasConnection && A.sendInput()
            }
            this.whiteFlash = 0;
            f.followTopPlayer = function() {
                let a = -1
                  , b = 0;
                for (id in B)
                    if (B[id].inGame) {
                        let c = B[id].score;
                        a < c && (a = c,
                        b = id)
                    }
                b && (v = B[b],
                v.prepareFollow(),
                Oa = ra = b)
            };
            f.PlayerFollowing = function(a) {
                c = 0;
                let b, d, e;
                if (0 == ja.length)
                    ra = 0,
                    v = null;
                else {
                    b = !1;
                    0 == Oa && (b = !0);
                    if (!b) {
                        b = !1, d;
                        for (d in ja) {
                            if (b) {
                                e = B[ja[d]];
                                if (!e.inGame)
                                    continue;
                                ra = ja[d];
                                v = e;
                                v.prepareFollow();
                                Oa = ra;
                                return
                            }
                            if (ja[d] == Oa)
                                if (a)
                                    b = !0;
                                else {
                                    d--;
                                    0 > d && (d = ja.length - 1);
                                    e = B[ja[d]];
                                    ra = ja[d];
                                    v = e;
                                    v.prepareFollow();
                                    Oa = ra;
                                    return
                                }
                        }
                    }
                    ra = a = ja[0];
                    v = B[a];
                    v.prepareFollow();
                    Oa = a
                }
            };
            f.waitUntilNextFollow = function() {
                c = 3E3
            };
            f.update = function(a) {
                let b, e, f, s, t, w, D, C, E, Q, I, N, Y, ba;
                if (p.loaded) {
                    v && !v.inGame && 0 == ka && (v = null,
                    ra = 0);
                    F && F.update(a);
                    mb && J.sound.volume(da, mb);
                    La = !1;
                    for (b in W)
                        W[b].update(a),
                        W[b] && !La && W[b].type == za && (La = !0,
                        Ma = null);
                    e = null;
                    for (b in M)
                        M[b].update(a),
                        M[b].finished && (e = b);
                    e && delete M[e];
                    e = null;
                    for (b in B)
                        B[b].updateBool != A.lastUpdateBool ? (B[b] == v && (ra = 0),
                        delete B[b]) : (!La && B[b].weapon == za && B[b].inGame && (La = !0,
                        Ma = ga(B[b].name)),
                        sc == b && B[b].inGame && (e = B[b]),
                        u.railSwitch ? (B[b].setWeapon(Qa),
                        B[b].ammo = -1) : u.machinegunSwitch && (B[b].setWeapon(Ja),
                        B[b].ammo = -1),
                        B[b].update(a));
                    for (b in U)
                        U[b].update(a);
                    u.railSwitch && (u.railSwitch = !1);
                    u.machinegunSwitch && (u.machinegunSwitch = !1);
                    z.update(a);
                    if (!Z && 0 == ka && null == v && (c -= a,
                    0 >= c))
                        for (b in B) {
                            B[b].inGame && (v = B[b],
                            v.prepareFollow(),
                            ra = b);
                            break
                        }
                    if (u.isSpaceWars()) {
                        for (i in sa) {
                            sa[i].update(z.getBounds(), z.zoom);
                            f = sa[i];
                            .1 < Math.abs(ca.x) + Math.abs(ca.y) && (f.x -= (f.z - 1) * ca.x * .5,
                            f.y -= (f.z - 1) * ca.y * .5)
                        }
                        ca.x = 0;
                        ca.y = 0
                    }
                    X.update(a);
                    H = {
                        x: (d.width / 2 + (z.x * z.zoom - d.width / 2)) / z.zoom,
                        y: (d.height / 2 + (z.y * z.zoom - d.height / 2)) / z.zoom
                    };
                    ya.update(a);
                    if (!G && null != v)
                        if (V.mouseMoved) {
                            a = 1;
                            Ba || (a = 2);
                            Zb = (qc + (z.x * z.zoom - d.width * a / 2)) / z.zoom;
                            $b = (rc + (z.y * z.zoom - d.height * a / 2)) / z.zoom;
                            a = Zb - v.x;
                                s = $b - v.y
                              , f = Math.sqrt(a * a + s * s);
                            a /= f;
                            s /= f;
                            V.hover = 75 < f ? 0 : 1;
                            t = f = 0;
                            wa && (f = a,
                            t = -s);
                            0 != f && (a = Math.atan(t / f),
                            0 > f && (a = Math.PI + a),
                            a += Math.PI / 2,
                            V.angle = a)
                        } else
                            V.hover = 1,
                            V.angle = Math.PI;
                    t = z.getBounds();
                    a = t[1].x;
                    f = t[0].x;
                    s = t[0].y;
                    t = t[1].y;
                    if (e && !aa(e.x, e.y, 30)) {
                            w = H.x - e.x
                          , D = H.y - e.y
                          , C = Math.sqrt(w * w + D * D);
                        n = 1;
                        1300 < C && (n = 1300 / C,
                        .4 > n && (n = .4));
                        D /= w;
                        C = H.y - D * H.x;
                        h = 0 > w ? D * a + C : D * f + C;
                        h < s ? h = s : h > t && (h = t);
                        g = (h - C) / D;
                        1 < D ? D = 1 : -1 > D && (D = -1);
                        k = Math.acos(D);
                        0 > w && (k += Math.PI);
                        q = !0
                    } else
                        q = !1;
                        E, w = !1;
                    (ub = v ? Za[v.id] : 0) && 0 < ub && (E = B[ub],
                    E == e && (w = !0));
                    !E || aa(E.x, E.y, 30) || w ? y = !1 : (w = H.x - E.x,
                    D = H.y - E.y,
                    E = Math.sqrt(w * w + D * D),
                    r = 1,
                    1300 < E && (r = 1300 / E,
                    .4 > r && (r = .4)),
                    D /= w,
                    C = H.y - D * H.x,
                    l = 0 > w ? D * a + C : D * f + C,
                    l < s ? l = s : l > t && (l = t),
                    m = (l - C) / D,
                    1 < D ? D = 1 : -1 > D && (D = -1),
                    x = Math.acos(D),
                    0 > w && (x += Math.PI),
                    y = !0);
                    if (u.isWarship()) {
                        E = 99999;
                        e = 0, Q, I, N, Y;
                        for (b in U)
                            if (C = U[b],
                            C.state == Ic && C.x > -$_sub && C.x < $_sub) {
                                    w = H.x - C.x
                                  , D = H.y - C.y
                                  , ba = Math.sqrt(w * w + D * D);
                                ba < E && (Q = C.x,
                                I = C.y,
                                E = ba,
                                e = b,
                                N = w,
                                Y = D)
                            }
                        0 < e ? aa(Q, I, 120) ? T = !1 : (1300 < E && (Ca = 900 / E,
                        .3 > Ca && (Ca = .3)),
                        D = Y / N,
                        C = H.y - D * H.x,
                        L = 0 > N ? D * a + C : D * f + C,
                        L < s ? L = s : L > t && (L = t),
                        pa = (L - C) / D,
                        1 < D ? D = 1 : -1 > D && (D = -1),
                        ta = Math.acos(D),
                        0 > N && (ta += Math.PI),
                        T = !0) : T = !1
                    }
                }
            };
            f.draw = function(b) {
                if (p.loaded) {
                    z.setupContext();
                    ya.drawGradient(a);
                    ya.draw(a);
                    let c = z.getBounds()[1].y
                      , e = !1
                      , f;
                    if (u.isSpaceWars())
                        for (i in sa)
                            sa[i].draw(a);
                    else
                        c > E / 2 - 25 && (e = !0,
                        ya.drawWaterBehind(a));
                    if (xa) {
                        for (f in W)
                            W[f].draw(a);
                        oa.draw(a);
                        for (f in M)
                            M[f].draw(a, b);
                        for (f in B)
                            B[f].draw(a, b);
                        for (f in B)
                            B[f].drawInfo(a);
                        Z && v.drawInput(a);
                        for (f in U)
                            U[f].draw(a);
                        X.drawExplosions(a);
                        X.drawBehind(a)
                    }
                    e && ya.drawWaterFront(a);
                    if (xa) {
                        if (!u.isSpaceWars()) {
                            for (f in B)
                                B[f].drawReflection(a, b);
                            for (f in M)
                                M[f].drawReflection(a, b);
                            for (f in U)
                                U[f].drawReflection(a, b)
                        }
                        X.drawLayer2(a);
                        X.draw(a);
                        for (f in U)
                            U[f].drawInfo(a);
                        ya.drawLimits(a);
                        q && (b = 1,
                        c = 0 < qa,
                        a.save(),
                        a.translate(g, h),
                        a.scale(n, n),
                        c && (a.save(),
                        e = fb(0, 50, -k),
                        a.translate(e.x, e.y),
                        p.frames.crown.draw(a),
                        a.restore()),
                        a.rotate(-k),
                        e = 1.2,
                        c ? (a.translate(0, -(-20 - 10 * b)),
                        e = .9) : a.translate(0, -(-30 - 10 * b)),
                        a.fillStyle = "rgba(255,102,0,0.8)",
                        a.beginPath(),
                        a.moveTo(-8 * b * e, 0),
                        a.lineTo(8 * b * e, 0),
                        a.lineTo(0, -20 * b * e),
                        a.fill(),
                        a.restore());
                        y && (b = 1,
                        a.save(),
                        a.translate(m, l),
                        a.scale(r, r),
                        a.save(),
                        e = fb(0, 50, -x),
                        a.translate(e.x, e.y),
                        p.frames.revengeIcon.draw(a),
                        a.restore(),
                        a.rotate(-x),
                        a.translate(0, -(-20 - 10 * b)),
                        e = .9,
                        a.fillStyle = "rgba(255,102,0,0.8)",
                        a.beginPath(),
                        a.moveTo(-8 * b * e, 0),
                        a.lineTo(8 * b * e, 0),
                        a.lineTo(0, -20 * b * e),
                        a.fill(),
                        a.restore());
                        T && p.warshipIcon && (b = 1,
                        a.save(),
                        a.translate(pa, L),
                        a.scale(Ca, Ca),
                        a.save(),
                        e = fb(0, 80, -ta),
                        a.translate(e.x, e.y),
                        a.drawImage(p.warshipIcon, -p.warshipIcon.width / 2, -p.warshipIcon.height / 2),
                        a.restore(),
                        a.rotate(-ta),
                        e = .9,
                        a.translate(0, -(-20 - 10 * b)),
                        a.fillStyle = "rgba(255,102,0,0.8)",
                        a.beginPath(),
                        a.moveTo(-8 * b * e, 0),
                        a.lineTo(8 * b * e, 0),
                        a.lineTo(0, -20 * b * e),
                        a.fill(),
                        a.restore())
                    }
                    z.startUILayer();
                    bool_drawUI && F.draw(a);
                    0 < this.whiteFlash && (a.save(),
                    a.globalAlpha = this.whiteFlash,
                    a.fillStyle = "#FFFFFF",
                    a.fillRect(0, 0, d.width, d.height),
                    a.restore(),
                    this.whiteFlash -= .015)
                }
            };
            f.gameCleanup = function() {
                v = void 0;
                ra = 0;
                Z = !1;
                gb = ma = 0;
                F && F.clearBonusDisplay();
                for (id in W)
                    delete W[id];
                W = {};
                for (id in M)
                    delete M[id];
                M = {};
                for (id in B)
                    delete B[id];
                B = {};
                for (id in U)
                    delete U[id];
                U = {}
            };
            f.resize = function(a) {
                C();
                u.isSpaceWars() && (N && clearTimeout(N),
                N = setTimeout(f.respawnParticles, 200))
            };
            let C = function() {
                let a = 2, b, c;
                Ba && (a = 1);
                d.width = window.innerWidth / a;
                d.height = window.innerHeight / a;
                Ka = d.width;
                ib = d.height;
                    b = ib * a
                  , c = -50 + 50 * a + "%"
                  , a = "translate(" + c + "," + c + ") scale(" + a + ")";
                $("#canvas").css({
                    transform: a
                });
                $("#canvas").css({
                    "-ms-transform": a
                });
                $("#canvas").css({
                    "-webkit-transform": a
                });
                t = .92 * Math.max(ib / 1016, Ka / 1500);
                t *= window.devicePixelRatio / jb;
                b = Math.min(1, b / 1016);
                0 < 640 * b && (b = "translate(-50%,0%) scale(" + b + ")",
                $("#mainDialog").css({
                    transform: b
                }),
                $("#mainDialog").css({
                    "-ms-transform": b
                }),
                $("#mainDialog").css({
                    "-webkit-transform": b
                }),
                $("#mainDialog").css({
                    top: "25%"
                }))
            };
            f.respawnParticles = function() {
                sa = [];
                for (let a = 0; 150 > a; a++)
                    sa.push(new ClassU_xd)
            };
            d = b;
            a = d.getContext("2d");
            C();
            ya = new Class_Backgrounds;
            X = new Class_AnimationManager;
            f.respawnParticles();
            p = new Class_Assets;
            p.load(function() {
                console.log("Resources loaded!");
                1 == G && ("undefined" != typeof messageHandlers && messageHandlers.didLoad ? messageHandlers.didLoad(JSON.stringify({})) : window.webkit.messageHandlers.didLoad.postMessage({}));
                F = new Class_UI_GameInfo;
                oa = new Class_ParticleImpacts;
                A.hasConnection && !A.sentHello && A.hello();
                setInterval(e, 40);
                cc(Math.floor(5 * Math.random()) + 1);
                ac(Math.floor(5 * Math.random()) + 1);
                console.log("Loading sounds!");
                J = new Class_SFXmanager;
                J.load(function() {
                    J.playSound(Ad, 1, 1, Q, function(a) {
                        mb = a
                    })
                })
            });
            myName = "";
            z = new Class_UI_Anchor_Shake(d,a,0,0);
            A = new Class_WS_Connection;
            A.getServerAndConnect()
        }
          , Class_UI_Anchor_Shake = function(b, e, f, d) {
            let a = this
              , c = 0
              , g
              , h = 0
              , q = 0
              , n = 0
              , k = 0;
            this.x = f;
            this.y = d;
            this.minZoom = 1;
            this.maxZoom = 2;
            this.zoom = this.minZoom;
            this.setupContext = function() {
                let c = a.zoom
                  , d = b.width / 2 - a.x * c
                  , f = b.height / 2 - a.y * c;
                e.setTransform(1, 0, 0, 1, 0, 0);
                e.translate(d + n, f + k);
                e.scale(c, c)
            };
            this.applyShake = function(a) {
                if (xa)
                    if (0 < c) {
                        let b = g, d;
                        250 > c && (b = c / 1E3 / .5 * g);
                        h += 1;
                        q += 1.1;
                            d = Math.sin(h) * (b / 4)
                          , b = Math.cos(q) * b;
                        n = d;
                        k = b;
                        c -= a
                    } else
                        k = n = 0
            };
            this.update = function(b) {
                let c = a.maxZoom + (a.minZoom - a.maxZoom);
                xa || (a.y = 470);
                Z || 1 != ka || Y ? (a.zoom = 1 / (window.devicePixelRatio / jb) * 1.2,
                a.zoom *= t,
                G && (a.zoom += .3),
                null != v && (ca.x = v.x - a.x,
                ca.y = v.y - a.y,
                a.x = v.x,
                a.y = v.y)) : (c = 1 / (window.devicePixelRatio / jb) * .7 * t,
                a.zoom += (c - a.zoom) / 10);
                this.applyShake(b)
            };
            this.setPosition = function(b, c) {
                ca.x = b - a.x;
                ca.y = c - a.y;
                a.x = b;
                a.y = c
            };
            this.shake = function() {
                xa && (c = 500,
                g = 7)
            };
            this.getBounds = function() {
                return [{
                    x: a.x - b.width / 2 / a.zoom,
                    y: a.y - b.height / 2 / a.zoom
                }, {
                    x: a.x + b.width / 2 / a.zoom,
                    y: a.y + b.height / 2 / a.zoom
                }]
            };
            this.getOuterBounds = function() {
                return [{
                    x: a.x - b.width / 2 / a.minZoom,
                    y: a.y - b.height / 2 / a.minZoom
                }, {
                    x: a.x + b.width / 2 / a.minZoom,
                    y: a.y + b.height / 2 / a.minZoom
                }]
            };
            this.getInnerBounds = function() {
                return [{
                    x: a.x - b.width / 2 / a.maxZoom,
                    y: a.y - b.height / 2 / a.maxZoom
                }, {
                    x: a.x + b.width / 2 / a.maxZoom,
                    y: a.y + b.height / 2 / a.maxZoom
                }]
            };
            this.startUILayer = function() {
                e.setTransform(1, 0, 0, 1, 0, 0)
            }
        }
          , Class_RenderManager = function() {
            let b
              , e
              , f
              , d
              , a = void 0
              , c
              , g;
            this.width;
            this.height;
            this.y = this.x = 0;
            this.canvas;
            this.frameWithCanvas = function(a, b, d) {
                this.width = a.width;
                this.height = a.height;
                this.canvas = a;
                c = b;
                g = d
            };
            this.setFrameInfo = function(h, q) {
                a = q;
                b = h[1];
                e = h[2];
                this.width = h[3];
                this.height = h[4];
                f = h[5];
                d = h[6];
                c = -this.width * f;
                g = -this.height * d
            };
            this.draw = function(d) {
                a ? d.drawImage(a, b, e, this.width, this.height, c + this.x, g + this.y, this.width, this.height) : d.drawImage(this.canvas, 0, 0, this.width, this.height, c + this.x, g + this.y, this.width, this.height)
            };
            this.renderTintedFrame = function(d) {
                let f = document.createElement("canvas")
                  , n = f.getContext("2d");
                f.width = this.width;
                f.height = this.height;
                let k = document.createElement("canvas");
                k.width = this.width;
                k.height = this.height;
                let m = k.getContext("2d");
                m.fillStyle = d;
                m.fillRect(0, 0, k.width, k.height);
                m.globalCompositeOperation = "destination-atop";
                m.drawImage(a, b, e, this.width, this.height, 0, 0, this.width, this.height);
                n.globalAlpha = 1;
                n.drawImage(k, 0, 0);
                d = new Class_RenderManager;
                d.frameWithCanvas(f, c, g);
                return d
            };
            this.getImageCopy = function() {
                let c = document.createElement("canvas");
                c.width = this.width;
                c.height = this.height;
                let d = c.getContext("2d");
                d.drawImage(a, b, e, this.width, this.height, 0, 0, this.width, this.height);
                let f = d.getImageData(0, 0, this.width, this.height);
                return {
                    canvas: c,
                    ctx: d,
                    toData: f.data,
                    to: f
                }
            };
            this.generateTintImage2 = function(d, f, n, k) {
                let m = document.createElement("canvas");
                m.width = this.width;
                m.height = this.height;
                let l = m.getContext("2d");
                l.drawImage(a, b, e, this.width, this.height, 0, 0, this.width, this.height);
                let p, r, s, t;
                for (p = l.getImageData(0, 0, this.width, this.height), r = p.data, s = r.length, t = 0; t < s; )
                    r[t] = r[t++] * (1 - k) + d * k,
                    r[t] = r[t++] * (1 - k) + f * k,
                    r[t] = r[t++] * (1 - k) + n * k,
                    r[t] = .8 * r[t++];
                l.putImageData(p, 0, 0);
                d = new Class_RenderManager;
                d.frameWithCanvas(m, c, g);
                return d
            };
            this.generateTintImage = function(a, b, d, e) {
                let f = document.createElement("canvas");
                f.width = this.width;
                f.height = this.height;
                let l = f.getContext("2d");
                l.globalAlpha = 1;
                l.globalCompositeOperation = "copy";
                l.drawImage(a[3], 0, 0);
                l.globalCompositeOperation = "lighter";
                0 < b && (l.globalAlpha = b / 255,
                l.drawImage(a[0], 0, 0));
                0 < d && (l.globalAlpha = d / 255,
                l.drawImage(a[1], 0, 0));
                0 < e && (l.globalAlpha = e / 255,
                l.drawImage(a[2], 0, 0));
                a = new Class_RenderManager;
                a.frameWithCanvas(f, c, g);
                return a
            };
            this.generateRGBKs = function() {
                let c = []
                  , d = document.createElement("canvas");
                d.getContext("2d");
                d.width = this.width;
                d.height = this.height;
                d = document.createElement("canvas");
                d.width = this.width;
                d.height = this.height;
                d = d.getContext("2d");
                d.drawImage(a, b, e, this.width, this.height, 0, 0, this.width, this.height);
                let f = d.getImageData(0, 0, this.width, this.height).data, g = f.length, m = this.getImageCopy(), l = this.getImageCopy(), p = this.getImageCopy();
                d = this.getImageCopy();
                for (let r = 0; r < g; r += 4)
                    m.toData[r] = f[r],
                    m.toData[r + 1] = 0,
                    m.toData[r + 2] = 0,
                    m.toData[r + 3] = f[r + 3],
                    l.toData[r] = 0,
                    l.toData[r + 1] = f[r + 1],
                    l.toData[r + 2] = 0,
                    l.toData[r + 3] = f[r + 3],
                    p.toData[r] = 0,
                    p.toData[r + 1] = 0,
                    p.toData[r + 2] = f[r + 2],
                    p.toData[r + 3] = f[r + 3],
                    d.toData[r] = 0,
                    d.toData[r + 1] = 0,
                    d.toData[r + 2] = 0,
                    d.toData[r + 3] = f[r + 3];
                m.ctx.putImageData(m.to, 0, 0);
                l.ctx.putImageData(l.to, 0, 0);
                p.ctx.putImageData(p.to, 0, 0);
                d.ctx.putImageData(d.to, 0, 0);
                f = new Image;
                f.src = m.canvas.toDataURL();
                m = new Image;
                m.src = l.canvas.toDataURL();
                l = new Image;
                l.src = p.canvas.toDataURL();
                p = new Image;
                p.src = d.canvas.toDataURL();
                c.push(f);
                c.push(m);
                c.push(l);
                c.push(p);
                return c
            };
            this.renderToCanvas = function() {
                let c = document.createElement("canvas")
                  , d = c.getContext("2d");
                c.width = this.width;
                c.height = this.height;
                let f = document.createElement("canvas");
                f.width = this.width;
                f.height = this.height;
                f.getContext("2d");
                a ? d.drawImage(a, b, e, this.width, this.height, 0, 0, this.width, this.height) : d.drawImage(this.canvas, 0, 0, this.width, this.height, 0, 0, this.width, this.height);
                d.globalAlpha = 1;
                d.drawImage(f, 0, 0);
                return c
            }
        }
          , Class_AnimationManager = function() {
            let b = {}
              , e = []
              , f = []
              , d = []
              , a = [];
            this.addAnimationInfo = function(a, d) {
                b[a] = d
            };
            this.setAnimationInterval = function(a, d) {
                b[a].setInterval(d)
            };
            this.createAnimation = function(a) {
                a = b[a];
                let d = new Class_DrawAnimation;
                d.setup(a);
                return d
            };
            this.runAnimation = function(a) {
                e.push(a)
            };
            this.runAnimationLayer2 = function(a) {
                f.push(a)
            };
            this.runAnimationBehind = function(a) {
                d.push(a)
            };
            this.addBlast = function(a, b, d, e, f) {
                let k = X.createAnimation("explosion");
                k.setScale(d);
                k.posX = a;
                k.posY = b;
                X.runAnimationBehind(k);
                a = 1 - va(a, b, H.x, H.y) / Ra;
                .01 < a && J.playSound(Fc, a * f, 1, e, null)
            };
            this.addExplosion = function(b, d, e, f) {
                if (bool_drawExplosions && aa(b, d, 100) && la()) {
                    if (1 >= a.length) {
                        let n = new Class_ParticleDebrisManager;
                        n.init(b, d, e, f);
                        a.push(n)
                    }
                    this.addBlast(b, d, 1, Sa, 1);
                    z.shake()
                }
            };
            this.update = function(b) {
                let g, h, q;
                for (g in e) {
                    h = e[g];
                    h.update(b);
                    h.deleting && (e.splice(g, 1),
                    delete h)
                }
                for (g in d)
                    h = d[g],
                    h.update(b),
                    h.deleting && (d.splice(g, 1),
                    delete h);
                for (g in f)
                    h = f[g],
                    h.update(b),
                    h.deleting && (f.splice(g, 1),
                    delete h);
                for (q in a)
                    g = a[q],
                    g.update(b),
                    g.deleting && (a.splice(q, 1),
                    delete g)
            };
            this.drawBehind = function(a) {
                for (let b in d) {
                    let e = d[b];
                    a.save();
                    a.translate(e.posX, e.posY);
                    a.scale(e.scaleX, e.scaleY);
                    a.rotate(e.rotation);
                    e.draw(a);
                    a.restore()
                }
            };
            this.drawLayer2 = function(a) {
                for (let b in f) {
                    let d = f[b];
                    a.save();
                    a.translate(d.posX, d.posY);
                    a.scale(d.scaleX, d.scaleY);
                    a.rotate(d.rotation);
                    d.draw(a);
                    a.restore()
                }
            };
            this.draw = function(a) {
                for (let b in e) {
                    let d = e[b];
                    a.save();
                    a.translate(d.posX, d.posY);
                    a.scale(d.scaleX, d.scaleY);
                    a.rotate(d.rotation);
                    d.draw(a);
                    a.restore()
                }
            };
            this.drawExplosions = function(b) {
                for (let d in a)
                    a[d].draw(b)
            }
        }
          , Class_DrawAnimation = function() {
            let b = 0
              , e = 0
              , f = 0;
            this.frames;
            this.frameCount = 0;
            this.deleting = !1;
            this.posY = this.posX = 0;
            this.scaleY = this.scaleX = 1;
            this.rotation = 0;
            this.alpha = 1;
            this.copy = function(b) {
                b = new Class_DrawAnimation;
                b.frames = this.frames;
                b.frameCount = this.frameCount;
                b.deleting = this.deleting;
                b.posX = this.posX;
                b.posY = this.posY;
                b.scaleX = this.scaleX;
                b.scaleY = this.scaleY;
                b.rotation = this.rotation;
                b.alpha = this.alpha;
                b.setInterval(e);
                return b
            };
            this.setup = function(b) {
                e = b.interval;
                this.frames = b.frames;
                this.frameCount = b.frames.length
            };
            this.setInterval = function(b) {
                e = b
            };
            this.update = function(d) {
                this.deleting || (f > e && (b++,
                f -= e),
                f += d,
                b >= this.frameCount && (this.deleting = !0))
            };
            this.setScale = function(b) {
                this.scaleY = this.scaleX = b
            };
            this.draw = function(d) {
                1 > this.alpha && (d.globalAlpha = this.alpha);
                this.frames[b].draw(d)
            }
        }
          , Class_Animation = function() {
            this.frames = [];
            this.interval = 0;
            this.addFrame = function(b) {
                this.frames.push(b)
            };
            this.setInterval = function(b) {
                this.interval = b
            }
        }
          , ClassR_ParticleU = function() {
            this.color = {
                h: "61",
                s: "100%",
                l: "100%",
                a: 1
            };
            this.rotation = 0;
            this.scale = 1;
            this.pos = {
                x: 0,
                y: 0
            };
            this.speed = {
                x: 0,
                y: 0
            };
            this.time = 0;
            this.used = this.active = !1;
            this.rotationSpeed = 0;
            this.draw = function(b) {
                b.save();
                b.translate(this.pos.x, this.pos.y);
                b.scale(this.scale, this.scale);
                b.rotate(this.rotation);
                let e = "hsla(" + this.color.h + "," + this.color.s + "," + this.color.l + "," + this.color.a + ")";
                b.translate(20, -2);
                b.beginPath();
                b.arc(0, 0, 25, 0, 2 * Math.PI, !1);
                b.fillStyle = e;
                b.fill();
                b.beginPath();
                b.arc(-15, -32, 7, 0, 2 * Math.PI, !1);
                b.fillStyle = e;
                b.fill();
                b.restore()
            }
        }
          , Class_ParticleManager = function() {
            let b = 0
              , e = 0
              , f = []
              , d = 0
              , a
              , c
              , g
              , h;
            this.life = 400;
            this.debreeAge = 0;
            this.alpha = 1;
            this.init = function(q, n, k) {
                d = q;
                a = 0;
                c = -.03;
                h = g = 0;
                b = n;
                e = k;
                q = this.life / d;
                for (n = 0; n < d; n++)
                    k = new ClassR_ParticleU,
                    this.resetParticle(k),
                    k.active = !1,
                    k.time = q * n,
                    f.push(k)
            };
            this.resetParticle = function(a) {
                a.pos.x = b;
                a.pos.y = e;
                a.speed.x = g;
                a.speed.y = h;
                a.time = 0;
                a.color.a = 1;
                a.rotationSpeed = (Math.random() - .5) / 10;
                a.rotation = 360 * Math.random()
            };
            this.update = function(b) {
                b = 1E3 / 60;
                let e, g, h, l;
                for (e = 0; e < d; e++) {
                    g = f[e];
                    g.time >= this.life && (g.active || (g.active = !0,
                    g.time %= this.life),
                    this.resetParticle(g));
                    g.time += b;
                    if (g.active) {
                        h = g.time / this.life;
                        1 < h && (h = 1);
                        g.pos.x += 1 * g.speed.x;
                        g.pos.y += 1 * g.speed.y;
                        if (0 <= h && .1 > h) {
                            l = h / .1;
                            g.scale = .2
                        } else
                            g.scale = .2 + (h - .1);
                        g.rotation += g.rotationSpeed;
                        0 <= h && .1 > h ? (l = h / .1,
                        .8 < l && (l = .8),
                        g.color.a = l) : g.color.a = .9 - (h - .1);
                        0 <= h && .25 > h ? (l = h / .25,
                        g.color.h = 61 * (1 - l),
                        g.color.s = "100%",
                        g.color.l = "50%") : .25 <= h && .3 >= h && (l = (h - .25) / (.3 - .25),
                        g.color.h = 0,
                        g.color.s = 100 * (1 - l) + "%",
                        g.color.l = 100 * (.4 + .1 * (1 - l)) + "%");
                        g.speed.x += 1 * a;
                        g.speed.y += 1 * c
                    }
                }
            };
            this.updateExplosion = function(b) {
                b = 1E3 / 60;
                let e, g, h, l;
                for (e = 0; e < d; e++) {
                    g = f[e];
                    g.time >= this.life && (g.active || (g.active = !0,
                    g.time %= this.life),
                    this.resetParticle(g));
                    g.time += b;
                    if (g.active) {
                        h = g.time / this.life;
                        1 < h && (h = 1);
                        g.pos.x += 1 * g.speed.x;
                        g.pos.y += 1 * g.speed.y;
                        if (0 <= h && .1 > h) {
                            l = h / .1;
                            g.scale = .25
                        } else
                            g.scale = .25 + (h - .1);
                        g.rotation += g.rotationSpeed;
                        0 <= h && .1 > h ? (l = h / .1,
                        .8 < l && (l = .8),
                        g.color.a = l * (1 - this.debreeAge)) : (l = Math.pow(1 - (h - .1) / .9, 1 + 5 * this.debreeAge),
                        g.color.a = l.toFixed(2));
                        g.color.a *= this.alpha;
                        0 <= h && .25 > h ? (l = h / .25,
                        g.color.h = (61 * (1 - l)).toFixed(2),
                        h = 100 * (1 - this.debreeAge),
                        g.color.s = h.toFixed(2) + "%",
                        g.color.l = "50%") : .25 <= h && .4 >= h && (l = (h - .25) / (.4 - .25),
                        g.color.h = 0,
                        h = 100 * (1 - l) * (1 - this.debreeAge),
                        g.color.s = h.toFixed(2) + "%",
                        g.color.l = (100 * (.4 + .1 * (1 - l))).toFixed(2) + "%");
                        g.speed.x += 1 * a;
                        g.speed.y += 1 * c
                    }
                }
            };
            this.updateMissileSmoke = function(b) {
                b = 1E3 / 60;
                let e, g, h, l;
                for (e = 0; e < d; e++) {
                    g = f[e];
                    g.time >= this.life && (g.active || (g.active = !0,
                    g.time %= this.life),
                    this.resetParticle(g));
                    g.time += b;
                    if (g.active) {
                        h = g.time / this.life;
                        1 < h && (h = 1);
                        g.pos.x += 1 * g.speed.x;
                        g.pos.y += 1 * g.speed.y;
                        if (0 <= h && .1 > h) {
                            l = h / .1;
                            g.scale = .2
                        } else
                            g.scale = .2 + .1 * (h - .1);
                        g.rotation += g.rotationSpeed;
                        0 <= h && .1 > h ? (l = h / .1,
                        .8 < l && (l = .8),
                        g.color.a = l) : g.color.a = .9 - (h - .1);
                        0 <= h && .25 > h ? (g.color.h = 57,
                        g.color.s = "21%",
                        g.color.l = "50%") : .25 <= h && (l = (h - .25) / .75,
                        g.color.h = 57,
                        g.color.s = "21%",
                        h = 50 - 50 * l,
                        10 > h && (h = 10),
                        g.color.l = h + "%");
                        g.speed.x += 1 * a;
                        g.speed.y += 1 * c
                    }
                }
            };
            this.setPosition = function(a, c) {
                b = a;
                e = c
            };
            this.setLife = function(a) {
                this.life = a
            };
            this.draw = function(a) {
                for (let b = d - 1; 0 <= b; b--) {
                    let c = f[b];
                    c.active && c.draw(a)
                }
            }
        }
          , Class_ParticleDebrisManager = function() {
            let e = []
              , f
              , d;
            function b(a) {
                return Math.random() * a - a / 2
            }
            this.deleting = !1;
            this.init = function(a, c, e, h) {
                let q, n, k, m, l, p, r;
                f = a;
                d = c;
                a = 2 + 4 * Math.random();
                c = 2 + 4 * Math.random();
                q = 2 + 4 * Math.random();
                Math.random();
                    n = Math.PI / 4
                  , k = b(Math.PI / 2)
                  , m = b(n) + k
                  , l = Math.cos(m)
                  , m = Math.sin(m)
                  , p = 2 / 3 * Math.PI + b(n) + k
                  , r = Math.cos(p)
                  , p = Math.sin(p)
                  , k = 4 / 3 * Math.PI + b(n) + k
                  , n = Math.cos(k)
                  , k = Math.sin(k);
                this.addDebree(l * a + e, m * a + h);
                this.addDebree(r * c + e, p * c + h);
                this.addDebree(n * q + e, k * q + h)
            };
            this.addDebree = function(a, b) {
                let g = new Class_ParticleDebris;
                g.init(f, d);
                g.setSpeed(a, b);
                e.push(g)
            };
            this.update = function(a) {
                let b = 0;
                for (debreeID in e) {
                    let d = e[debreeID];
                    d.update(a);
                    d.deleting && (e.splice(debreeID, 1),
                    delete d);
                    b++
                }
                0 == b && (this.deleting = !0)
            };
            this.draw = function(a) {
                for (debreeID in e)
                    e[debreeID].draw(a)
            }
        }
          , Class_ParticleDebris = function() {
            let b
              , e
              , f
              , d
              , a
              , c = .08
              , g
              , h
              , q
              , n = 0;
            u.isSpaceWars() && (c = 0);
            this.deleting = !1;
            this.init = function(a, b) {
                g = a;
                h = b;
                q = new Class_ParticleManager;
                q.init(15, g, h)
            };
            this.setSpeed = function(c, g) {
                b = c;
                e = g;
                f = 0;
                d = .2 * b;
                a = .2 * e
            };
            this.update = function(k) {
                f += c;
                g += b;
                h += e + f;
                b *= .975;
                e *= .975;
                c *= .975;
                Math.abs(b) < Math.abs(d) && (b = d);
                Math.abs(e) < Math.abs(a) && (e = a);
                3 < f && (f = 3);
                n += k;
                500 < n && 2300 >= n ? q.debreeAge = (n - 500) / 2300 : 2300 < n && 2500 >= n ? q.alpha = (2500 - n) / 200 : 2500 < n && (delete q,
                this.deleting = !0);
                this.deleting || (q.setPosition(g, h),
                q.updateExplosion(k))
            };
            this.draw = function(a) {
                this.deleting || q.draw(a)
            }
        }
          , Class_Missile = function() {
            let b = new Class_ParticleTrails
              , e = 0
              , f = 0;
            this.lastUpdate = 0;
            this.id = -1;
            this.angle = this.speed = this.dstY = this.dstX = this.origY = this.origX = this.prevY = this.prevX = this.y = this.x = 0;
            this.controlAngle = -90;
            this.frameSwitchTime = 40;
            this.timeToNextFrame = 0;
            this.flameState = 1;
            this.lastImage;
            this.first_set = !0;
            this.colorHue = 0;
            this.finished = !1;
            this.type = 0;
            this.update = function(d) {
                let a = fa((T - this.lastUpdate) / Jb, 0, 1)
                  , c = this.y - this.prevY
                  , g;
                0 == this.x - this.prevX && 0 == c && (f++,
                50 < f && (this.finished = !0));
                this.prevX = this.x;
                this.prevY = this.y;
                this.x = a * (this.dstX - this.origX) + this.origX;
                this.y = a * (this.dstY - this.origY) + this.origY;
                b.setPosition(this.x, this.y);
                b.update(d);
                if (1 == this.type)
                    u.isSpaceWars() && (this.angle += .2);
                else if (2 != this.type) {
                    a = E / 2;
                    c = a - 100;
                    if (this.y > c && this.y < a && 0 >= e) {
                        e = 5;
                            g = Math.random() / 2
                          , c = (.2 + (.5 - (a - this.y) / (a - c) * .5)) * (.95 + g)
                          , g = 20 * Math.sin(this.angle);
                        oa.addSplash(this.x - g, a + 5 * Math.random(), c, !0)
                    }
                    e -= d
                }
            };
            this.draw = function(d, a) {
                let c = 1;
                this.timeToNextFrame -= a;
                0 >= this.timeToNextFrame && (this.flameState = !this.flameState,
                this.timeToNextFrame = this.frameSwitchTime);
                let e = .7;
                this.flameState && (e = 1);
                0 == this.type && (b.width = 1.5 * e,
                b.style = "rgba(247, 189, 57, 1.0)",
                b.draw(d),
                b.width = .4 * e,
                b.style = "rgba(232, 247, 59, 1.0)",
                b.draw(d),
                d.save(),
                d.translate(this.x, this.y),
                this.flameState ? d.scale(.7, .7) : d.scale(.9, .9),
                d.rotate(this.angle),
                d.translate(-27, 0),
                p.frames.throttleFlame.draw(d),
                d.restore());
                d.save();
                d.translate(this.x, this.y);
                2 != this.type ? (1 == this.type && (c = 1.4),
                d.scale(c, c),
                1 == this.type && p.blinkImage && u.isSpaceWars() && (d.scale(2, 2),
                d.drawImage(p.blinkImage, -p.blinkImage.width / 2, -p.blinkImage.height / 2),
                d.scale(.5, .5)),
                d.rotate(this.angle),
                0 == this.type ? p.frames.missile_attack.draw(d) : p.frames.bomb.draw(d)) : (d.beginPath(),
                d.fillStyle = "#FF0000",
                d.arc(0, 0, 6, 0, 2 * Math.PI),
                d.fill(),
                d.beginPath(),
                d.fillStyle = "#FFFFFF",
                d.arc(0, 0, 4, 0, 2 * Math.PI),
                d.fill());
                d.restore()
            };
            this.drawReflection = function(b, a) {
                let c = E / 2
                  , e = c - this.y;
                if (!(0 > e || 170 < e)) {
                    let f = e / 170;
                    b.save();
                    b.translate(this.x, c + e - 25);
                    c = 1;
                    30 > e && 15 <= e ? c = (e - 15) / 15 : 15 > e && (c = 0);
                    b.globalAlpha = .7 * (1 - f) * c;
                    b.scale(1.1, .6);
                    b.beginPath();
                    b.fillStyle = "rgba(0,100,255,1.0)";
                    b.arc(0, 0, 10, 0, 2 * Math.PI);
                    b.fill();
                    b.restore()
                }
            };
            this.setPosition = function(b, a, c) {
                this.origX = this.dstX;
                this.origY = this.dstY;
                this.dstX = 10 * b;
                this.dstY = 10 * a;
                this.first_set && ((b = B[c]) ? (a = 5 * Math.abs(Math.cos(b.angle + Math.PI / 2)),
                this.origX = b.x,
                this.origY = b.y + a,
                this.x = b.x,
                this.y = b.y) : (this.x = this.dstX,
                this.y = this.dstY,
                this.origX = this.dstX,
                this.origY = this.dstY),
                this.first_set = !1,
                1 == this.type && (this.angle = Math.PI / 2));
                0 == this.type && (b = this.dstX - this.origX,
                a = this.dstY - this.origY,
                this.angle = 0 <= b ? Math.atan(a / b) : Math.atan(a / b) + Math.PI)
            };
            this.setColorHue = function(b) {
                this.colorHue = b
            };
            this.setType = function(d) {
                this.type = d;
                0 != d && delete b
            };
            this.getSpeedDirectionX = function() {
                return this.x - this.prevX
            };
            this.getSpeedDirectionY = function() {
                return this.y - this.prevY
            };
            b.tailAddJointInterval = 30;
            b.enabled = !0;
            b.trailTime = 100;
            b.width = 1.2;
            b.fixedColor = !0
        }
          , Class_ParticleTrails = function() {
            let b
              , e;
            this.tailAddJointInterval = 50;
            this.timeToNextJoint = 0;
            this.tailJoints = [[]];
            this.trailTimeEffectStart = this.trailTime = 600;
            this.trailEffectTime = 0;
            this.enabled = !1;
            this.width = 1;
            this.fixedColor = !1;
            this.style;
            this.update = function(f) {
                let d = this.tailJoints.length - 1, c, g, a;
                if (0 >= this.timeToNextJoint && -1 < d) {
                    this.timeToNextJoint = this.tailAddJointInterval;
                    this.enabled && this.tailJoints[d].push({
                        x: b,
                        y: e,
                        origX: b,
                        origY: e,
                        t: T,
                        fx: (600 - Math.abs(this.trailEffectTime - 600)) / 600,
                        style: this.style
                    });
                    for (a = 0; a <= d; a++) {
                        c = this.tailJoints[a].length;
                        if (0 < c) {
                            c = T - this.tailJoints[a][0].t;
                            c > this.trailTime && (this.tailJoints[a].splice(0, 1),
                            0 == this.tailJoints[a].length && this.tailJoints.splice(a, 1));
                            break
                        }
                    }
                }
                for (g = this.timeToNextJoint / 50, d = this.tailJoints.length - 1, a = 0; a <= d; a++)
                    c = this.tailJoints[a].length,
                    1 >= c || (c = T - this.tailJoints[a][0].t,
                    c > this.trailTime - this.tailAddJointInterval && (c = this.tailJoints[a][0].origY - this.tailJoints[a][1].origY,
                    this.tailJoints[a][0].x = this.tailJoints[a][1].origX + (this.tailJoints[a][0].origX - this.tailJoints[a][1].origX) * g,
                    this.tailJoints[a][0].y = this.tailJoints[a][1].origY + c * g));
                this.timeToNextJoint -= f;
                this.trailEffectTime = 0 > this.trailEffectTime ? 0 : this.trailEffectTime - f
            };
            this.draw = function(b) {
                if (bool_drawTrails)
                    for (let d = this.tailJoints.length, a = 0; a < d; a++)
                        for (let c = this.tailJoints[a].length, e = 0; e < c - 1; e++) {
                            b.strokeStyle = this.tailJoints[a][e].style;
                            let h = e / c * (8 + 8 * this.tailJoints[a][e].fx);
                            0 == h && (h = .1);
                            b.lineWidth = h * this.width;
                            b.beginPath();
                            b.lineTo(this.tailJoints[a][e].x, this.tailJoints[a][e].y);
                            b.lineTo(this.tailJoints[a][e + 1].x, this.tailJoints[a][e + 1].y);
                            b.stroke()
                        }
            };
            this.setPosition = function(f, d) {
                b = f;
                e = d
            };
            this.push = function() {
                this.tailJoints.push([])
            };
            this.trailEffect = function() {
                this.trailEffectTime = 1200
            };
            this.clear = function() {
                this.tailJoints = [[]]
            }
        }
          , Class_ParticleFlags = function() {
            let b
              , e;
            this.tailJoints = [[]];
            this.maxPoints = 1;
            this.flagDivisions = 5;
            this.letterMinDistance = this.pointMinDistance = 10;
            this.texture;
            this.textureWidth;
            this.textureHeight;
            this.loaded = this.enabled = !1;
            this.width = 1;
            this.style;
            this.flagHeight;
            this.flipX = !1;
            this.flipY = !0;
            this.stringScale = this.scale = 1;
            this.setTexture = function(b) {
                this.texture = new Image;
                this.texture.src = "flags/" + b.toLowerCase() + ".png";
                let d = this;
                this.texture.onload = function() {
                    d.textureWidth = d.texture.width;
                    d.textureHeight = d.texture.height;
                    d.maxPoints = parseInt(d.textureWidth / 12);
                    d.flagDivisions = d.maxPoints - 1;
                    let a = d.scale;
                    d.flagHeight = .5 * d.textureHeight * a;
                    a = d.textureWidth * a / d.flagDivisions;
                    d.pointMinDistance = a;
                    d.letterMinDistance = a;
                    d.enabled = !0;
                    d.loaded = !0
                }
            };
            this.update = function(f) {
                f = !1;
                let d = this.tailJoints[0].length;
                if (0 == d)
                    f = !0;
                else {
                    let a = this.tailJoints[0][d - 1]
                      , c = a = Math.sqrt(Math.pow(a.x - b, 2) + Math.pow(a.y - e, 2));
                    1 < d && (c = this.tailJoints[0][d - 2],
                    c = Math.sqrt(Math.pow(c.x - b, 2) + Math.pow(c.y - e, 2)));
                    a > this.pointMinDistance && c > 3 * this.pointMinDistance && (f = !0)
                }
                f && (this.tailJoints[0].push({
                    x: b,
                    y: e,
                    origX: b,
                    origY: e,
                    t: T,
                    fx: 0,
                    style: this.style
                }),
                d > this.maxPoints && this.tailJoints[0].splice(0, 1))
            };
            this.draw = function(f) {
                if (bool_drawTrails && this.loaded && 0 < this.tailJoints.length)
                    for (let d, a, c = this.letterMinDistance, g = !0, h = 0, q = 0, n, k, m, l, p, r, s = this.tailJoints[0].length - 2; 0 <= s; s--) {
                        let t = this.tailJoints[0][s].x, w = this.tailJoints[0][s].y, u;
                        g && (d = b,
                        a = e);
                        let v = t - d, x = w - a, A, C, z, B, E;
                        u = Math.sqrt(Math.pow(v, 2) + Math.pow(x, 2));
                        0 == u ? console.log("OOPS! Division by ZERO! " + s + " : " + v + ":::" + x) : (A = v / u,
                        C = x / u);
                        v = !1;
                        if (0 < u - c) {
                            z = d + A * c;
                            B = a + C * c;
                            c = this.letterMinDistance;
                            if (0 < h) {
                                if (q < this.flagDivisions) {
                                    d = this.flagHeight;
                                    n = z - n;
                                    k = B - k;
                                    n /= this.letterMinDistance;
                                    k /= this.letterMinDistance;
                                    k = -k * d;
                                    n *= d;
                                    u = z + k;
                                        v = B + n
                                      , x = z - k
                                      , E = B - n;
                                    d = this.textureWidth;
                                    a = this.textureHeight;
                                    let F, G, H, J;
                                    this.flipY && 0 < A ? (F = 0,
                                    G = a) : (F = a,
                                    G = 0);
                                    this.flipX && 0 < A ? (H = q / this.flagDivisions * d,
                                    J = (q + 1) / this.flagDivisions * d) : (H = d * (1 - q / this.flagDivisions),
                                    J = d * (1 - (q + 1) / this.flagDivisions));
                                    d = f;
                                    a = this.texture;
                                    m = [{
                                        x: p,
                                        y: r,
                                        u: H,
                                        v: F
                                    }, {
                                        x: m,
                                        y: l,
                                        u: H,
                                        v: G
                                    }, {
                                        x: u,
                                        y: v,
                                        u: J,
                                        v: G
                                    }, {
                                        x: x,
                                        y: E,
                                        u: J,
                                        v: F
                                    }];
                                    l = [[0, 1, 2], [2, 3, 0]];
                                    for (p = 0; 2 > p; p++) {
                                        let D = l[p];
                                        r = m[D[0]].x;
                                        u = m[D[1]].x;
                                        v = m[D[2]].x;
                                        x = m[D[0]].y;
                                        E = m[D[1]].y;
                                        F = m[D[2]].y;
                                        G = m[D[0]].u;
                                        H = m[D[1]].u;
                                        J = m[D[2]].u;
                                        let L = m[D[0]].v
                                          , M = m[D[1]].v;
                                            D = m[D[2]].v;
                                        d.save();
                                        d.beginPath();
                                        d.moveTo(r, x);
                                        d.lineTo(u, E);
                                        d.lineTo(v, F);
                                        d.closePath();
                                        d.clip();
                                        let N = G * M + L * J + H * D - M * J - L * H - G * D;
                                        d.transform((r * M + L * v + u * D - M * v - L * u - r * D) / N, (x * M + L * F + E * D - M * F - L * E - x * D) / N, (G * u + r * J + H * v - u * J - r * H - G * v) / N, (G * E + x * J + H * F - E * J - x * H - G * F) / N, (G * M * v + L * u * J + r * H * D - r * M * J - L * H * v - G * u * D) / N, (G * M * F + L * E * J + x * H * D - x * M * J - L * H * F - G * E * D) / N);
                                        d.drawImage(a, 0, 0);
                                        d.restore()
                                    }
                                    q++
                                } else
                                    break;
                                m = z + k;
                                l = B + n;
                                p = z - k;
                                r = B - n
                            } else
                                d = this.flagHeight,
                                n = z - b,
                                k = B - e,
                                n /= this.letterMinDistance,
                                k /= this.letterMinDistance,
                                k = -k * d,
                                n *= d,
                                m = z + k,
                                l = B + n,
                                p = z - k,
                                r = B - n,
                                f.strokeStyle = "rgba(255, 255, 255, 0.3)",
                                f.lineWidth = 2,
                                f.beginPath(),
                                f.lineTo(b, e),
                                f.lineTo(z + k * this.stringScale, B + n * this.stringScale),
                                f.stroke(),
                                f.beginPath(),
                                f.lineTo(b, e),
                                f.lineTo(z - k * this.stringScale, B - n * this.stringScale),
                                f.stroke();
                            n = z;
                            k = B;
                            h++;
                            v = !0
                        } else
                            c -= u;
                        v ? (d = z,
                        a = B,
                        s++) : (d = t,
                        a = w);
                        g && (g = !1)
                    }
            };
            this.setPosition = function(f, d) {
                b = f;
                e = d
            };
            this.push = function() {};
            this.trailEffect = function() {};
            this.clear = function() {
                this.tailJoints = [[]]
            }
        }
          , Class_ScoreAccumInfo = function() {
            let b = []
              , e = []
              , f;
            this.update = function(d) {
                0 < e.length && 2E3 < T - e[0] && (b.shift(),
                e.shift())
            };
            this.draw = function(d) {
                d.globalAlpha = 1;
                for (let a in b) {
                    let c = b[a]
                      , f = Math.sqrt((T - e[a]) / 2E3)
                      , h = .8 >= f ? f / .8 : 1 - (f - .8) / .2;
                    d.globalAlpha = h;
                    d.drawImage(c, -c.width / 2, 40 * -f - 10)
                }
                d.globalAlpha = 1
            };
            this.addScore = function(d) {
                let a = !1, c;
                f && 500 > T - f && (a = !0);
                c = new Class_StrokeStyle(13,"#FFFFFF");
                c.setFont("px 'proxima-nova-1','proxima-nova-2', Arial Black");
                a ? d = b[b.length - 1].number + d : f = T;
                c.setValue("+" + d);
                c = c.render();
                c.number = d;
                a ? (b.pop(),
                b.push(c)) : (b.push(c),
                e.push(+new Date))
            }
        }
          , Class_SFXmanager = function() {
            let b = !1
              , e = {}
              , f = {
                bigsplash: [0, 1889.795918367347],
                cannonshoot: [3E3, 777.8684807256235],
                crash: [5E3, 991.7913832199545],
                env: [7E3, 4486.984126984126, 1],
                hgrab: [13E3, 208.9115646258506],
                king: [15E3, 1162.01814058957],
                kinglaser: [18E3, 533.9909297052152],
                laser: [2E4, 203.4467120181418],
                laserloop: [22E3, 898.934240362813, 1],
                lasershot: [24E3, 367.6643990929698],
                lockon: [26E3, 46.14512471655274],
                mexpl: [28E3, 1007.8231292517011],
                mlaunch: [31E3, 661.4512471655338],
                phit: [33E3, 206.30385487528002],
                planeloop: [35E3, 1427.7551020408196, 1],
                rail: [38E3, 840.7482993197277],
                shot: [4E4, 101.81405895691853],
                trishot: [42E3, 392.81179138321676],
                warn: [44E3, 2109.365079365077],
                waterloop: [48E3, 629.9092970521514, 1],
                weapgrab: [5E4, 202.06349206349472],
                winggrab: [52E3, 111.97278911564723],
                woosh: [54E3, 486.2585034013591]
            };
            this.sound;
            this.load = function(d) {
                this.sound = new Howl({
                    urls: ["sounds/out.ogg", "sounds/out.m4a", "sounds/out.mp3", "sounds/out.ac3"],
                    sprite: f,
                    onload: function() {
                        b = !0;
                        d && d()
                    }
                })
            };
            this.playSound = function(d, a, c, g, h) {
                if (b && 0 != N && wa) {
                    a *= da;
                    let q = f[d];
                    e[d] || (e[d] = 0);
                    0 < g && e[d] >= g || (this.sound.play(d, function(b) {
                        d = J.sound._nodeById(b);
                        d && d.bufferSource && (d.bufferSource.playbackRate.value = c);
                        J.sound.volume(a, b);
                        h && h(b)
                    }),
                    q = q[1],
                    g != Q && e[d]++,
                    setTimeout(function() {
                        g != Q && e[d]--
                    }, q))
                }
            };
            this.stop = function(d) {
                b && d.stop()
            };
            this.setVolume = function(b) {
                this.sound.volume(b)
            }
        }
          , Class_UI_KillStatus = function() {
            let b = []
              , f = null
              , d = null
              , a = null
              , c = null
              , g = 0
              , h = 0
              , e = 2E3
              , q = !1
              , n = 1
              , k = !1
              , m = 0
              , l = 0;
            this.update = function(a) {
                1 == g && (h += a,
                h > e && (q = !0));
                q ? (g -= .2,
                0 > g && (g = 0,
                b.shift(),
                0 < b.length ? this.processCode(b[0]) : d = null),
                m = -(1 - g)) : (1 > g && (g += .2,
                1 < g && (g = 1)),
                m = 1 - (1.5 * g - .75) / .75)
            };
            this.draw = function(a) {
                d && (a.globalAlpha = g,
                a.scale((n + .2 * m) * t, (n + .2 * m) * t),
                a.drawImage(d, -d.width / 2, -d.height + 120),
                a.drawImage(currentText2Render, -currentText2Render.width / 2, 110),
                k ? (c.y = 30,
                c.draw(a)) : a.drawImage(c, -c.width / 2 - 5, -c.height - d.height + 120))
            };
            this.replaceCode = function(a) {
                for (let c in b) {
                    if (64 >= b[c] && 64 >= a)
                        return b[c] < a ? (b[c] = a,
                        c) : -2;
                    if (256 == b[c] && 256 == a || 128 == b[c] && 128 == a || 4096 == a)
                        return c
                }
                return -1
            };
            this.push = function(a, c) {
                256 == a && (l = c);
                let d = this.replaceCode(a);
                -1 == d ? (b.push(a),
                1 == b.length && this.processCode(a)) : 0 == d && this.processCode(a)
            };
            this.processCode = function(b) {
                q = !1;
                g = h = 0;
                let e = "", m = "KILL", s;
                k = !1;
                8 == b ? (e = "DOUBLE",
                s = "#cd9a6d",
                c = p.doubleKillCanvas,
                n = .8) : 16 == b ? (e = "TRIPLE",
                s = "#95b9c9",
                c = p.tripleKillCanvas,
                n = .9,
                m += "!") : 32 == b ? (e = "QUAD",
                s = "#f0a400",
                c = p.quadKillCanvas,
                n = 1,
                m += "!!") : 64 == b ? (e = "MULTI",
                s = "#de0000",
                c = p.multiKillCanvas,
                n = 1.1,
                m += "!!") : 128 == b ? (e = "NEAR",
                s = "#ffe774",
                c = p.frames.nearmiss,
                n = .8,
                m = "MISS",
                k = !0) : 4096 == b ? (e = "REVENGE",
                s = "#dd1824",
                c = p.frames.revenge,
                n = 1,
                m = "KILL",
                k = !0) : 256 == b && (e = l + " KILL STREAK!",
                s = "#a5dd11",
                c = p.frames.frenzy,
                n = .8,
                m = "",
                k = !0);
                "" != e && (f = new Class_StrokeStyle(40,s,!0,"#000000"),
                f.setValue(e),
                f.setStrokeWidth(10),
                d = f.render(),
                a = new Class_StrokeStyle(40,s,!0,"#000000"),
                a.setValue(m),
                a.setStrokeWidth(10),
                currentText2Render = a.render())
            };
            this.clearNearMiss = function() {
                for (let a in b)
                    if (128 == b[a]) {
                        0 == a ? h = e : b.splice(a, 1);
                        break
                    }
            };
            this.clear = function() {
                b = [];
                null != d && (q = !0)
            };
            this.shouldDraw = function() {
                return g
            }
        }
          , ClassU_xd = function() {
            let b = this;
            b.x = 0;
            b.y = 0;
            b.z = 1 * Math.random() + .3;
            b.size = 1.2;
            b.opacity = .8 * Math.random() + .1;
            b.update = function(e) {
                if (0 == b.x || 0 == b.y)
                    b.x = Math.random() * (e[1].x - e[0].x) + e[0].x,
                    b.y = Math.random() * (e[1].y - e[0].y) + e[0].y;
                let f = e[1].x - e[0].x
                  , d = e[1].y - e[0].y;
                b.x < e[0].x && (b.x += Math.ceil((e[0].x - b.x) / f) * f);
                b.y < e[0].y && (b.y += Math.ceil((e[0].y - b.y) / d) * d);
                b.x > e[1].x && (b.x -= Math.ceil((b.x - e[1].x) / f) * f);
                b.y > e[1].y && (b.y -= Math.ceil((b.y - e[1].y) / d) * d)
            };
            b.draw = function(e) {
                e.fillStyle = "rgba(226,219,226," + b.opacity + ")";
                e.beginPath();
                e.arc(b.x, b.y, this.z * this.size, 0, 2 * Math.PI, !0);
                e.closePath();
                e.fill()
            }
        }
          , Class_Warship = function() {
            let e = 1
              , f = 20
              , d = 100
              , a = 1
              , b = this.isShooting = this.isBot = !1;
            this.lastUpdate = this.highlightValue = this.state = 0;
            this.id = -1;
            this.dstFloatValue = this.dstY = this.dstX = this.origFloatValue = this.origY = this.origX = this.prevFloatValue = this.prevY = this.prevX = this.floatValue = this.y = this.x = 0;
            this.energy = 255;
            this.inGame = !0;
            this.updateBool = !1;
            this.dstAngle = this.origAngle = this.angle = Math.PI / 2;
            this.name = "";
            this.first_set = !0;
            this.type = 0;
            this.warshipContext = this.warshipCanvas = null;
            this.fragment = 1;
            this.recoilTime = this.cannonAngle = 0;
            this.update = function(c) {
                if (this.inGame) {
                    aa(this.x, this.y + this.floatValue, 120) ? b || (b = !0) : b = !1;
                    let g = fa((T - this.lastUpdate) / Jb, 0, 1);
                    this.prevX = this.x;
                    this.prevY = this.y;
                    this.prevFloatValue = this.floatValue;
                    let h = g * (this.dstY - this.origY) + this.origY
                      , q = g * (this.dstFloatValue - this.origFloatValue) + this.origFloatValue;
                    this.x = g * (this.dstX - this.origX) + this.origX;
                    this.y = h;
                    this.floatValue = q;
                    this.angle = g * (this.dstAngle - this.origAngle) + this.origAngle;
                    this.cannonAngle = g * (this.dstCannonAngle - this.origCannonAngle) + this.origCannonAngle;
                    0 < this.highlightValue && (this.highlightValue -= .06,
                    0 > this.highlightValue && (this.highlightValue = 0));
                    this.type == zb && 1 == this.state && 0 < f && (e -= .02,
                    0 > e && (e = 0),
                    d -= c,
                    0 > d && (d = 150,
                    f -= 1,
                    g = Math.random() * p.warshipImage.width - p.warshipImage.width / 2,
                    h = Math.random() * p.warshipImage.height / 2 - p.warshipImage.height / 4,
                    X.addBlast(this.x + g, this.y + h + q, .5, Q, 2)));
                    2 == this.state ? (a -= .01,
                    0 > a && (a = 0)) : (a += .01,
                    1 < a && (a = 1));
                    this.recoilTime = 0 < this.recoilTime ? this.recoilTime - c : 0
                }
            };
            this.loadWarshipCanvas = function() {
                let a = document.createElement("canvas")
                  , b = a.getContext("2d")
                  , d = p.warshipImage.height;
                a.width = p.warshipImage.width;
                a.height = d;
                this.warshipCanvas = a;
                this.warshipContext = b
            };
            this.draw = function(c) {
                if (this.inGame && b)
                    if (this.type == zb && p.warshipLoaded) {
                        if (p.warshipImage && !this.warshipCanvas && this.loadWarshipCanvas(),
                        this.warshipCanvas) {
                            c.save();
                            c.globalAlpha = a;
                            c.translate(this.x, this.y - 4);
                            this.warshipContext.clearRect(0, 0, this.warshipCanvas.width, this.warshipCanvas.height);
                            let d = .267 * this.warshipCanvas.width
                              , e = .63 * this.warshipCanvas.height;
                            this.warshipContext.save();
                            this.warshipContext.translate(0, this.floatValue + 4);
                            this.warshipContext.translate(this.warshipCanvas.width / 2, this.warshipCanvas.height / 2);
                            this.warshipContext.rotate(this.angle);
                            this.warshipContext.translate(-this.warshipCanvas.width / 2, -this.warshipCanvas.height / 2);
                            this.warshipContext.translate(d, e);
                            this.warshipContext.rotate(-this.cannonAngle);
                            d = 10 * (1 - this.recoilTime / 200);
                            this.warshipContext.translate(.5 * -p.cannonImage.width, -20 - d);
                            this.warshipContext.drawImage(p.cannonImage, 0, 0);
                            this.warshipContext.restore();
                            this.warshipContext.save();
                            this.warshipContext.translate(0, this.floatValue + 4);
                            this.warshipContext.translate(this.warshipCanvas.width / 2, this.warshipCanvas.height / 2);
                            this.warshipContext.rotate(this.angle);
                            this.warshipContext.translate(-this.warshipCanvas.width / 2, -this.warshipCanvas.height / 2);
                            this.warshipContext.drawImage(p.warshipImage, 0, 0);
                            0 < this.highlightValue && (this.warshipContext.globalAlpha = .8 * this.highlightValue,
                            this.warshipContext.drawImage(p.whiteWarshipImage, 0, 0),
                            this.warshipContext.globalAlpha = 1);
                            this.warshipContext.restore();
                            1 == this.state && (c.globalAlpha = .8);
                            c.drawImage(this.warshipCanvas, -p.warshipImage.width / 2, -p.warshipImage.height / 2);
                            c.restore()
                        }
                    } else
                        this.type == db && p.asteroidImage && (c.save(),
                        c.globalAlpha = a,
                        c.translate(this.x, this.y),
                        c.rotate(-this.angle),
                        d = (3 - this.fragment + 1) / 3,
                        c.scale(d, d),
                        c.drawImage(p.asteroidImage, -p.asteroidImage.width / 2, -p.asteroidImage.height / 2),
                        0 < this.highlightValue && (c.globalAlpha = .8 * this.highlightValue,
                        c.drawImage(p.whiteAsteroidImage, -p.asteroidImage.width / 2, -p.asteroidImage.height / 2),
                        c.globalAlpha = 1),
                        c.restore())
            };
            this.drawReflection = function(c, d) {
                this.inGame && b && this.type == zb && p.warshipLoaded && (c.save(),
                c.globalAlpha = .15 * a,
                c.translate(this.x, this.y + this.warshipCanvas.height - 4),
                c.scale(1, -1),
                c.drawImage(this.warshipCanvas, -p.warshipImage.width / 2, -p.warshipImage.height / 2),
                c.restore(),
                c.save(),
                c.translate(this.x + 85 + this.floatValue + 100 * this.angle, this.y + this.warshipCanvas.height / 2 - 4),
                c.globalAlpha = e * a,
                c.beginPath(),
                c.moveTo(-3, 1.5),
                c.lineTo(0, -1.5),
                c.lineTo(-300, 0),
                c.fillStyle = "rgba(255,255,255,1.0)",
                c.fill(),
                c.restore(),
                c.globalAlpha = 1)
            };
            this.drawInput = function(a) {};
            this.drawInfo = function(a) {
                if (this.inGame && b && this.state == Ic && 65535 != this.energy) {
                    a.save();
                    a.translate(this.x, this.y);
                    a.fillStyle = "rgba(126,219,226,1)";
                    a.shadowOffsetX = 0;
                    a.shadowOffsetY = 0;
                    a.shadowBlur = 0;
                    a.shadowColor = "rgba(255, 255, 255, 0.7)";
                    a.lineWidth = 1;
                    let d = 28, e;
                    this.type == db ? (e = 50 / this.fragment,
                    d *= 3 / this.fragment) : (e = 55,
                    d *= 5);
                    let f = 512;
                    32767.5 > this.energy && 16383.75 < this.energy ? f = 30 : 16383.75 > this.energy && (f = 0);
                    a.fillStyle = "hsl(" + f + ", 100%, 50%)";
                    a.fillRect(-d / 2 + 0, e + 0, this.energy / 65535 * d, 8);
                    a.strokeStyle = "rgba(255,255,255,1.0)";
                    a.strokeRect(-d / 2, e, d, 8);
                    a.restore()
                }
            };
            this.hit = function(a) {
                la() && (this.highlightValue = a == Ua || this.type == db ? this.highlightValue + 1 : this.highlightValue + .3,
                1 < this.highlightValue && (this.highlightValue = 1))
            };
            this.setPose = function(a, b, d) {
                this.origX = this.x;
                this.origY = this.y;
                this.origAngle = this.dstAngle;
                this.dstX = 10 * a;
                this.dstY = 10 * b;
                this.dstAngle = d;
                this.first_set ? (this.origX = this.dstX,
                this.origY = this.dstY,
                this.x = this.dstX,
                this.y = this.dstY,
                this.origAngle = this.dstAngle,
                this.first_set = !1) : (a = this.dstX - this.origX,
                b = this.dstY - this.origY,
                this.speed = Math.sqrt(a * a + b * b) / 3);
                this.inGame || (this.inGame = !0)
            };
            this.setFloatValue = function(a) {
                this.origFloatValue = this.floatValue;
                this.dstFloatValue = 10 * a;
                this.first_set && (this.floatValue = this.dstFloatValue)
            };
            this.setType = function(a) {
                this.type = a
            };
            this.setState = function(a) {
                this.state = a
            };
            this.setEnergy = function(a) {
                this.energy = a
            };
            this.setFragment = function(b) {
                this.fragment = b;
                3 != b && 1 == b && (a = 0)
            };
            this.setCannonAngle = function(a) {
                this.origCannonAngle = this.cannonAngle;
                this.dstCannonAngle = a;
                this.first_set && (this.cannonAngle = this.dstCannonAngle)
            };
            this.cannonShoot = function() {
                this.recoilTime = 200
            };
            this.getSpeedDirectionX = function() {
                return this.x - this.prevX
            };
            this.getSpeedDirectionY = function() {
                return this.y - this.prevY
            };
            this.cleanup = function() {
                this.first_set = !0;
                this.inGame = !1
            }
        };
        window.onload = function() {
            Modernizr.canvas && Modernizr.websockets && (null == L && (window.devicePixelRatio && (jb = 1 < window.devicePixelRatio ? 2 : 1),
            u = new Class_EventManager,
            L = new ClassR_FollowMode(document.getElementById("canvas")),
            window.addEventListener("resize", L.resize, !1),
            V = new Class_InputManager,
            V.addListeners(),
            window.requestAnimationFrame ? window.requestAnimationFrame(Rb) : setInterval(Rb, 1E3 / 60),
            $("#overlay").show()),
            L.resize(),
            gc())
        }
    }
    )(window, document, jQuery);
</script>
</body></html>
